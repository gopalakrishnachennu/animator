(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const il="modulepreload",rl=function(t){return"/"+t},Nr={},ol=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=rl(l),l in Nr)return;Nr[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":il,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};function gt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ke={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ln={duration:.5,overwrite:!1,delay:0},lr,Te,ie,it=1e8,ee=1/it,Ni=Math.PI*2,sl=Ni/4,al=0,Qo=Math.sqrt,ll=Math.cos,cl=Math.sin,Ae=function(e){return typeof e=="string"},pe=function(e){return typeof e=="function"},_t=function(e){return typeof e=="number"},cr=function(e){return typeof e>"u"},ht=function(e){return typeof e=="object"},Ne=function(e){return e!==!1},ur=function(){return typeof window<"u"},Un=function(e){return pe(e)||Ae(e)},Jo=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Pe=Array.isArray,ul=/random\([^)]+\)/g,fl=/,\s*/g,Br=/(?:-?\.?\d|\.)+/gi,es=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Jt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ei=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ts=/[+-]=-?[.\d]+/,dl=/[^,'"\[\]\s]+/gi,hl=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ue,ct,Bi,fr,Ze={},ni={},ns,is=function(e){return(ni=cn(e,Ze))&&Ue},dr=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},Sn=function(e,n){return!n&&console.warn(e)},rs=function(e,n){return e&&(Ze[e]=n)&&ni&&(ni[e]=n)||Ze},An=function(){return 0},pl={suppressEvents:!0,isStart:!0,kill:!1},Jn={suppressEvents:!0,kill:!1},ml={suppressEvents:!0},hr={},Tt=[],Yi={},os,qe={},Si={},Yr=30,ei=[],pr="",mr=function(e){var n=e[0],i,r;if(ht(n)||pe(n)||(e=[e]),!(i=(n._gsap||{}).harness)){for(r=ei.length;r--&&!ei[r].targetTest(n););i=ei[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Ms(e[r],i)))||e.splice(r,1);return e},Yt=function(e){return e._gsap||mr(rt(e))[0]._gsap},ss=function(e,n,i){return(i=e[n])&&pe(i)?e[n]():cr(i)&&e.getAttribute&&e.getAttribute(n)||i},Be=function(e,n){return(e=e.split(",")).forEach(n)||e},ye=function(e){return Math.round(e*1e5)/1e5||0},ce=function(e){return Math.round(e*1e7)/1e7||0},rn=function(e,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},gl=function(e,n){for(var i=n.length,r=0;e.indexOf(n[r])<0&&++r<i;);return r<i},ii=function(){var e=Tt.length,n=Tt.slice(0),i,r;for(Yi={},Tt.length=0,i=0;i<e;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},gr=function(e){return!!(e._initted||e._startAt||e.add)},as=function(e,n,i,r){Tt.length&&!Te&&ii(),e.render(n,i,!!(Te&&n<0&&gr(e))),Tt.length&&!Te&&ii()},ls=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(dl).length<2?n:Ae(e)?e.trim():e},cs=function(e){return e},Qe=function(e,n){for(var i in n)i in e||(e[i]=n[i]);return e},yl=function(e){return function(n,i){for(var r in i)r in n||r==="duration"&&e||r==="ease"||(n[r]=i[r])}},cn=function(e,n){for(var i in n)e[i]=n[i];return e},Gr=function t(e,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=ht(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},ri=function(e,n){var i={},r;for(r in e)r in n||(i[r]=e[r]);return i},vn=function(e){var n=e.parent||ue,i=e.keyframes?yl(Pe(e.keyframes)):Qe;if(Ne(e.inherit))for(;n;)i(e,n.vars.defaults),n=n.parent||n._dp;return e},_l=function(e,n){for(var i=e.length,r=i===n.length;r&&i--&&e[i]===n[i];);return i<0},us=function(e,n,i,r,o){var s=e[r],a;if(o)for(a=n[o];s&&s[o]>a;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=e[i],e[i]=n),n._next?n._next._prev=n:e[r]=n,n._prev=s,n.parent=n._dp=e,n},mi=function(e,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=n._prev,s=n._next;o?o._next=s:e[i]===n&&(e[i]=s),s?s._prev=o:e[r]===n&&(e[r]=o),n._next=n._prev=n.parent=null},It=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gt=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},xl=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},Gi=function(e,n,i,r){return e._startAt&&(Te?e._startAt.revert(Jn):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,r))},vl=function t(e){return!e||e._ts&&t(e.parent)},Hr=function(e){return e._repeat?un(e._tTime,e=e.duration()+e._rDelay)*e:0},un=function(e,n){var i=Math.floor(e=ce(e/n));return e&&i===e?i-1:i},oi=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},gi=function(e){return e._end=ce(e._start+(e._tDur/Math.abs(e._ts||e._rts||ee)||0))},yi=function(e,n){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ce(i._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),gi(e),i._dirty||Gt(i,e)),e},fs=function(e,n){var i;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(i=oi(e.rawTime(),n),(!n._dur||zn(0,n.totalDuration(),i)-n._tTime>ee)&&n.render(i,!0)),Gt(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-ee}},ut=function(e,n,i,r){return n.parent&&It(n),n._start=ce((_t(i)?i:i||e!==ue?nt(e,i,n):e._time)+n._delay),n._end=ce(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),us(e,n,"_first","_last",e._sort?"_start":0),Hi(n)||(e._recent=n),r||fs(e,n),e._ts<0&&yi(e,e._tTime),e},ds=function(e,n){return(Ze.ScrollTrigger||dr("scrollTrigger",n))&&Ze.ScrollTrigger.create(n,e)},hs=function(e,n,i,r,o){if(_r(e,n,o),!e._initted)return 1;if(!i&&e._pt&&!Te&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&os!==Xe.frame)return Tt.push(e),e._lazy=[o,r],1},bl=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Hi=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},wl=function(e,n,i,r){var o=e.ratio,s=n<0||!n&&(!e._start&&bl(e)&&!(!e._initted&&Hi(e))||(e._ts<0||e._dp._ts<0)&&!Hi(e))?0:1,a=e._rDelay,l=0,c,u,f;if(a&&e._repeat&&(l=zn(0,e._tDur,n),u=un(l,a),e._yoyo&&u&1&&(s=1-s),u!==un(e._tTime,a)&&(o=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==o||Te||r||e._zTime===ee||!n&&e._zTime){if(!e._initted&&hs(e,n,r,i,l))return;for(f=e._zTime,e._zTime=n||(i?ee:0),i||(i=n&&!f),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=l,c=e._pt;c;)c.r(s,c.d),c=c._next;n<0&&Gi(e,n,i,!0),e._onUpdate&&!i&&Ve(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ve(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===s&&(s&&It(e,1),!i&&!Te&&(Ve(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},El=function(e,n,i){var r;if(i>n)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},fn=function(e,n,i,r){var o=e._repeat,s=ce(n)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=o?o<0?1e10:ce(s*(o+1)+e._rDelay*o):s,a>0&&!r&&yi(e,e._tTime=e._tDur*a),e.parent&&gi(e),i||Gt(e.parent,e),e},Ur=function(e){return e instanceof Ce?Gt(e):fn(e,e._dur)},Sl={_start:0,endTime:An,totalDuration:An},nt=function t(e,n,i){var r=e.labels,o=e._recent||Sl,s=e.duration()>=it?o.endTime(!1):e._dur,a,l,c;return Ae(n)&&(isNaN(n)||n in r)?(l=n.charAt(0),c=n.substr(-1)==="%",a=n.indexOf("="),l==="<"||l===">"?(a>=0&&(n=n.replace(/=/,"")),(l==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(a<0?o:i).totalDuration()/100:1)):a<0?(n in r||(r[n]=s),r[n]):(l=parseFloat(n.charAt(a-1)+n.substr(a+1)),c&&i&&(l=l/100*(Pe(i)?i[0]:i).totalDuration()),a>1?t(e,n.substr(0,a-1),i)+l:s+l)):n==null?s:+n},bn=function(e,n,i){var r=_t(n[1]),o=(r?2:1)+(e<2?0:1),s=n[o],a,l;if(r&&(s.duration=n[1]),s.parent=i,e){for(a=s,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ne(l.vars.inherit)&&l.parent;s.immediateRender=Ne(a.immediateRender),e<2?s.runBackwards=1:s.startAt=n[o-1]}return new _e(n[0],s,n[o+1])},$t=function(e,n){return e||e===0?n(e):n},zn=function(e,n,i){return i<e?e:i>n?n:i},Oe=function(e,n){return!Ae(e)||!(n=hl.exec(e))?"":n[1]},Al=function(e,n,i){return $t(i,function(r){return zn(e,n,r)})},Ui=[].slice,ps=function(e,n){return e&&ht(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&ht(e[0]))&&!e.nodeType&&e!==ct},Cl=function(e,n,i){return i===void 0&&(i=[]),e.forEach(function(r){var o;return Ae(r)&&!n||ps(r,1)?(o=i).push.apply(o,rt(r)):i.push(r)})||i},rt=function(e,n,i){return ie&&!n&&ie.selector?ie.selector(e):Ae(e)&&!i&&(Bi||!dn())?Ui.call((n||fr).querySelectorAll(e),0):Pe(e)?Cl(e,i):ps(e)?Ui.call(e,0):e?[e]:[]},Wi=function(e){return e=rt(e)[0]||Sn("Invalid scope")||{},function(n){var i=e.current||e.nativeElement||e;return rt(n,i.querySelectorAll?i:i===e?Sn("Invalid scope")||fr.createElement("div"):e)}},ms=function(e){return e.sort(function(){return .5-Math.random()})},gs=function(e){if(pe(e))return e;var n=ht(e)?e:{each:e},i=Ht(n.ease),r=n.from||0,o=parseFloat(n.base)||0,s={},a=r>0&&r<1,l=isNaN(r)||a,c=n.axis,u=r,f=r;return Ae(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],f=r[1]),function(h,p,m){var d=(m||n).length,g=s[d],v,_,S,E,x,T,w,A,b;if(!g){if(b=n.grid==="auto"?0:(n.grid||[1,it])[1],!b){for(w=-it;w<(w=m[b++].getBoundingClientRect().left)&&b<d;);b<d&&b--}for(g=s[d]=[],v=l?Math.min(b,d)*u-.5:r%b,_=b===it?0:l?d*f/b-.5:r/b|0,w=0,A=it,T=0;T<d;T++)S=T%b-v,E=_-(T/b|0),g[T]=x=c?Math.abs(c==="y"?E:S):Qo(S*S+E*E),x>w&&(w=x),x<A&&(A=x);r==="random"&&ms(g),g.max=w-A,g.min=A,g.v=d=(parseFloat(n.amount)||parseFloat(n.each)*(b>d?d-1:c?c==="y"?d/b:b:Math.max(b,d/b))||0)*(r==="edges"?-1:1),g.b=d<0?o-d:o,g.u=Oe(n.amount||n.each)||0,i=i&&d<0?Cs(i):i}return d=(g[h]-g.min)/g.max||0,ce(g.b+(i?i(d):d)*g.v)+g.u}},qi=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=ce(Math.round(parseFloat(i)/e)*e*n);return(r-r%1)/n+(_t(i)?0:Oe(i))}},ys=function(e,n){var i=Pe(e),r,o;return!i&&ht(e)&&(r=i=e.radius||it,e.values?(e=rt(e.values),(o=!_t(e[0]))&&(r*=r)):e=qi(e.increment)),$t(n,i?pe(e)?function(s){return o=e(s),Math.abs(o-s)<=r?o:s}:function(s){for(var a=parseFloat(o?s.x:s),l=parseFloat(o?s.y:0),c=it,u=0,f=e.length,h,p;f--;)o?(h=e[f].x-a,p=e[f].y-l,h=h*h+p*p):h=Math.abs(e[f]-a),h<c&&(c=h,u=f);return u=!r||c<=r?e[u]:s,o||u===s||_t(s)?u:u+Oe(s)}:qi(e))},_s=function(e,n,i,r){return $t(Pe(e)?!n:i===!0?!!(i=0):!r,function(){return Pe(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(n-e+i*.99))/i)*i*r)/r})},Tl=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(r){return n.reduce(function(o,s){return s(o)},r)}},Ll=function(e,n){return function(i){return e(parseFloat(i))+(n||Oe(i))}},Ml=function(e,n,i){return vs(e,n,0,1,i)},xs=function(e,n,i){return $t(i,function(r){return e[~~n(r)]})},Il=function t(e,n,i){var r=n-e;return Pe(e)?xs(e,t(0,e.length),n):$t(i,function(o){return(r+(o-e)%r)%r+e})},kl=function t(e,n,i){var r=n-e,o=r*2;return Pe(e)?xs(e,t(0,e.length-1),n):$t(i,function(s){return s=(o+(s-e)%o)%o||0,e+(s>r?o-s:s)})},Cn=function(e){return e.replace(ul,function(n){var i=n.indexOf("[")+1,r=n.substring(i||7,i?n.indexOf("]"):n.length-1).split(fl);return _s(i?r:+r[0],i?0:+r[1],+r[2]||1e-5)})},vs=function(e,n,i,r,o){var s=n-e,a=r-i;return $t(o,function(l){return i+((l-e)/s*a||0)})},Ol=function t(e,n,i,r){var o=isNaN(e+n)?0:function(p){return(1-p)*e+p*n};if(!o){var s=Ae(e),a={},l,c,u,f,h;if(i===!0&&(r=1)&&(i=null),s)e={p:e},n={p:n};else if(Pe(e)&&!Pe(n)){for(u=[],f=e.length,h=f-2,c=1;c<f;c++)u.push(t(e[c-1],e[c]));f--,o=function(m){m*=f;var d=Math.min(h,~~m);return u[d](m-d)},i=n}else r||(e=cn(Pe(e)?[]:{},e));if(!u){for(l in n)yr.call(a,e,l,"get",n[l]);o=function(m){return br(m,a)||(s?e.p:e)}}}return $t(i,o)},Wr=function(e,n,i){var r=e.labels,o=it,s,a,l;for(s in r)a=r[s]-n,a<0==!!i&&a&&o>(a=Math.abs(a))&&(l=s,o=a);return l},Ve=function(e,n,i){var r=e.vars,o=r[n],s=ie,a=e._ctx,l,c,u;if(o)return l=r[n+"Params"],c=r.callbackScope||e,i&&Tt.length&&ii(),a&&(ie=a),u=l?o.apply(c,l):o.call(c),ie=s,u},gn=function(e){return It(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Te),e.progress()<1&&Ve(e,"onInterrupt"),e},en,bs=[],ws=function(e){if(e)if(e=!e.name&&e.default||e,ur()||e.headless){var n=e.name,i=pe(e),r=n&&!i&&e.init?function(){this._props=[]}:e,o={init:An,render:br,add:yr,kill:Vl,modifier:Xl,rawVars:0},s={targetTest:0,get:0,getSetter:vr,aliases:{},register:0};if(dn(),e!==r){if(qe[n])return;Qe(r,Qe(ri(e,o),s)),cn(r.prototype,cn(o,ri(e,s))),qe[r.prop=n]=r,e.targetTest&&(ei.push(r),hr[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}rs(n,r),e.register&&e.register(Ue,r,Ye)}else bs.push(e)},J=255,yn={aqua:[0,J,J],lime:[0,J,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,J],navy:[0,0,128],white:[J,J,J],olive:[128,128,0],yellow:[J,J,0],orange:[J,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[J,0,0],pink:[J,192,203],cyan:[0,J,J],transparent:[J,J,J,0]},Ai=function(e,n,i){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(i-n)*e*6:e<.5?i:e*3<2?n+(i-n)*(2/3-e)*6:n)*J+.5|0},Es=function(e,n,i){var r=e?_t(e)?[e>>16,e>>8&J,e&J]:0:yn.black,o,s,a,l,c,u,f,h,p,m;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),yn[e])r=yn[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),s=e.charAt(2),a=e.charAt(3),e="#"+o+o+s+s+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&J,r&J,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&J,e&J]}else if(e.substr(0,3)==="hsl"){if(r=m=e.match(Br),!n)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,s=u<=.5?u*(c+1):u+c-u*c,o=u*2-s,r.length>3&&(r[3]*=1),r[0]=Ai(l+1/3,o,s),r[1]=Ai(l,o,s),r[2]=Ai(l-1/3,o,s);else if(~e.indexOf("="))return r=e.match(es),i&&r.length<4&&(r[3]=1),r}else r=e.match(Br)||yn.transparent;r=r.map(Number)}return n&&!m&&(o=r[0]/J,s=r[1]/J,a=r[2]/J,f=Math.max(o,s,a),h=Math.min(o,s,a),u=(f+h)/2,f===h?l=c=0:(p=f-h,c=u>.5?p/(2-f-h):p/(f+h),l=f===o?(s-a)/p+(s<a?6:0):f===s?(a-o)/p+2:(o-s)/p+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},Ss=function(e){var n=[],i=[],r=-1;return e.split(Lt).forEach(function(o){var s=o.match(Jt)||[];n.push.apply(n,s),i.push(r+=s.length+1)}),n.c=i,n},qr=function(e,n,i){var r="",o=(e+r).match(Lt),s=n?"hsla(":"rgba(",a=0,l,c,u,f;if(!o)return e;if(o=o.map(function(h){return(h=Es(h,n,1))&&s+(n?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=Ss(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(Lt,"1").split(Jt),f=c.length-1;a<f;a++)r+=c[a]+(~l.indexOf(a)?o.shift()||s+"0,0,0,0)":(u.length?u:o.length?o:i).shift());if(!c)for(c=e.split(Lt),f=c.length-1;a<f;a++)r+=c[a]+o[a];return r+c[f]},Lt=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in yn)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Pl=/hsl[a]?\(/,As=function(e){var n=e.join(" "),i;if(Lt.lastIndex=0,Lt.test(n))return i=Pl.test(n),e[1]=qr(e[1],i),e[0]=qr(e[0],i,Ss(e[1])),!0},Tn,Xe=function(){var t=Date.now,e=500,n=33,i=t(),r=i,o=1e3/240,s=o,a=[],l,c,u,f,h,p,m=function d(g){var v=t()-r,_=g===!0,S,E,x,T;if((v>e||v<0)&&(i+=v-n),r+=v,x=r-i,S=x-s,(S>0||_)&&(T=++f.frame,h=x-f.time*1e3,f.time=x=x/1e3,s+=S+(S>=o?4:o-S),E=1),_||(l=c(d)),E)for(p=0;p<a.length;p++)a[p](x,h,T,g)};return f={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){ns&&(!Bi&&ur()&&(ct=Bi=window,fr=ct.document||{},Ze.gsap=Ue,(ct.gsapVersions||(ct.gsapVersions=[])).push(Ue.version),is(ni||ct.GreenSockGlobals||!ct.gsap&&ct||{}),bs.forEach(ws)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=u||function(g){return setTimeout(g,s-f.time*1e3+1|0)},Tn=1,m(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Tn=0,c=An},lagSmoothing:function(g,v){e=g||1/0,n=Math.min(v||33,e)},fps:function(g){o=1e3/(g||240),s=f.time*1e3+o},add:function(g,v,_){var S=v?function(E,x,T,w){g(E,x,T,w),f.remove(S)}:g;return f.remove(g),a[_?"unshift":"push"](S),dn(),S},remove:function(g,v){~(v=a.indexOf(g))&&a.splice(v,1)&&p>=v&&p--},_listeners:a},f}(),dn=function(){return!Tn&&Xe.wake()},G={},$l=/^[\d.\-M][\d.\-,\s]/,Fl=/["']/g,Rl=function(e){for(var n={},i=e.substr(1,e.length-3).split(":"),r=i[0],o=1,s=i.length,a,l,c;o<s;o++)l=i[o],a=o!==s-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),n[r]=isNaN(c)?c.replace(Fl,"").trim():+c,r=l.substr(a+1).trim();return n},Dl=function(e){var n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n);return e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)},zl=function(e){var n=(e+"").split("("),i=G[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Rl(n[1])]:Dl(e).split(",").map(ls)):G._CE&&$l.test(e)?G._CE("",e):i},Cs=function(e){return function(n){return 1-e(1-n)}},Ts=function t(e,n){for(var i=e._first,r;i;)i instanceof Ce?t(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ht=function(e,n){return e&&(pe(e)?e:G[e]||zl(e))||n},qt=function(e,n,i,r){i===void 0&&(i=function(l){return 1-n(1-l)}),r===void 0&&(r=function(l){return l<.5?n(l*2)/2:1-n((1-l)*2)/2});var o={easeIn:n,easeOut:i,easeInOut:r},s;return Be(e,function(a){G[a]=Ze[a]=o,G[s=a.toLowerCase()]=i;for(var l in o)G[s+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=G[a+"."+l]=o[l]}),o},Ls=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Ci=function t(e,n,i){var r=n>=1?n:1,o=(i||(e?.3:.45))/(n<1?n:1),s=o/Ni*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*cl((u-s)*o)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Ls(a);return o=Ni/o,l.config=function(c,u){return t(e,c,u)},l},Ti=function t(e,n){n===void 0&&(n=1.70158);var i=function(s){return s?--s*s*((n+1)*s+n)+1:0},r=e==="out"?i:e==="in"?function(o){return 1-i(1-o)}:Ls(i);return r.config=function(o){return t(e,o)},r};Be("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;qt(t+",Power"+(n-1),e?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});G.Linear.easeNone=G.none=G.Linear.easeIn;qt("Elastic",Ci("in"),Ci("out"),Ci());(function(t,e){var n=1/e,i=2*n,r=2.5*n,o=function(a){return a<n?t*a*a:a<i?t*Math.pow(a-1.5/e,2)+.75:a<r?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};qt("Bounce",function(s){return 1-o(1-s)},o)})(7.5625,2.75);qt("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});qt("Circ",function(t){return-(Qo(1-t*t)-1)});qt("Sine",function(t){return t===1?1:-ll(t*sl)+1});qt("Back",Ti("in"),Ti("out"),Ti());G.SteppedEase=G.steps=Ze.SteppedEase={config:function(e,n){e===void 0&&(e=1);var i=1/e,r=e+(n?0:1),o=n?1:0,s=1-ee;return function(a){return((r*zn(0,s,a)|0)+o)*i}}};ln.ease=G["quad.out"];Be("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return pr+=t+","+t+"Params,"});var Ms=function(e,n){this.id=al++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:ss,this.set=n?n.getSetter:vr},Ln=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,fn(this,+n.duration,1,1),this.data=n.data,ie&&(this._ctx=ie,ie.data.push(this)),Tn||Xe.wake()}var e=t.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,fn(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(dn(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(yi(this,i),!o._dp||o.parent||fs(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&ut(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ee||!this._initted&&this._dur&&i||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),as(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Hr(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Hr(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*o,r):this._repeat?un(this._tTime,o)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-ee?0:this._rts;if(this._rts===i)return this;var o=this.parent&&this._ts?oi(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ee?0:this._rts,this.totalTime(zn(-Math.abs(this._delay),this.totalDuration(),o),r!==!1),gi(this),xl(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(dn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ee&&(this._tTime-=ee)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=ce(i);var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&ut(r,this,this._start-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Ne(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?oi(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=ml);var r=Te;return Te=i,gr(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Te=r,this},e.globalTime=function(i){for(var r=this,o=arguments.length?i:r.rawTime();r;)o=r._start+o/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):o},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Ur(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,Ur(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(nt(this,i),Ne(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Ne(r)),this._dur||(this._zTime=-ee),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ee:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ee,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,o;return!!(!i||this._ts&&this._initted&&i.isActive()&&(o=i.rawTime(!0))>=r&&o<this.endTime(!0)-ee)},e.eventCallback=function(i,r,o){var s=this.vars;return arguments.length>1?(r?(s[i]=r,o&&(s[i+"Params"]=o),i==="onUpdate"&&(this._onUpdate=r)):delete s[i],this):s[i]},e.then=function(i){var r=this,o=r._prom;return new Promise(function(s){var a=pe(i)?i:cs,l=function(){var u=r.then;r.then=null,o&&o(),pe(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=u),s(a),r.then=u};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},e.kill=function(){gn(this)},t}();Qe(Ln.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ee,_prom:0,_ps:!1,_rts:1});var Ce=function(t){Zo(e,t);function e(i,r){var o;return i===void 0&&(i={}),o=t.call(this,i)||this,o.labels={},o.smoothChildTiming=!!i.smoothChildTiming,o.autoRemoveChildren=!!i.autoRemoveChildren,o._sort=Ne(i.sortChildren),ue&&ut(i.parent||ue,gt(o),r),i.reversed&&o.reverse(),i.paused&&o.paused(!0),i.scrollTrigger&&ds(gt(o),i.scrollTrigger),o}var n=e.prototype;return n.to=function(r,o,s){return bn(0,arguments,this),this},n.from=function(r,o,s){return bn(1,arguments,this),this},n.fromTo=function(r,o,s,a){return bn(2,arguments,this),this},n.set=function(r,o,s){return o.duration=0,o.parent=this,vn(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new _e(r,o,nt(this,s),1),this},n.call=function(r,o,s){return ut(this,_e.delayedCall(0,r,o),s)},n.staggerTo=function(r,o,s,a,l,c,u){return s.duration=o,s.stagger=s.stagger||a,s.onComplete=c,s.onCompleteParams=u,s.parent=this,new _e(r,s,nt(this,l)),this},n.staggerFrom=function(r,o,s,a,l,c,u){return s.runBackwards=1,vn(s).immediateRender=Ne(s.immediateRender),this.staggerTo(r,o,s,a,l,c,u)},n.staggerFromTo=function(r,o,s,a,l,c,u,f){return a.startAt=s,vn(a).immediateRender=Ne(a.immediateRender),this.staggerTo(r,o,a,l,c,u,f)},n.render=function(r,o,s){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:ce(r),f=this._zTime<0!=r<0&&(this._initted||!c),h,p,m,d,g,v,_,S,E,x,T,w;if(this!==ue&&u>l&&r>=0&&(u=l),u!==this._tTime||s||f){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,E=this._start,S=this._ts,v=!S,f&&(c||(a=this._zTime),(r||!o)&&(this._zTime=r)),this._repeat){if(T=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(g*100+r,o,s);if(h=ce(u%g),u===l?(d=this._repeat,h=c):(x=ce(u/g),d=~~x,d&&d===x&&(h=c,d--),h>c&&(h=c)),x=un(this._tTime,g),!a&&this._tTime&&x!==d&&this._tTime-x*g-this._dur<=0&&(x=d),T&&d&1&&(h=c-h,w=1),d!==x&&!this._lock){var A=T&&x&1,b=A===(T&&d&1);if(d<x&&(A=!A),a=A?0:u%c?c:u,this._lock=1,this.render(a||(w?0:ce(d*g)),o,!c)._lock=0,this._tTime=u,!o&&this.parent&&Ve(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1,x=d),a&&a!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,b&&(this._lock=2,a=A?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;Ts(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=El(this,ce(a),ce(h)),_&&(u-=h-(h=_._start))),this._tTime=u,this._time=h,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&u&&c&&!o&&!x&&(Ve(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(p=this._first;p;){if(m=p._next,(p._act||h>=p._start)&&p._ts&&_!==p){if(p.parent!==this)return this.render(r,o,s);if(p.render(p._ts>0?(h-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(h-p._start)*p._ts,o,s),h!==this._time||!this._ts&&!v){_=0,m&&(u+=this._zTime=-ee);break}}p=m}else{p=this._last;for(var F=r<0?r:h;p;){if(m=p._prev,(p._act||F<=p._end)&&p._ts&&_!==p){if(p.parent!==this)return this.render(r,o,s);if(p.render(p._ts>0?(F-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(F-p._start)*p._ts,o,s||Te&&gr(p)),h!==this._time||!this._ts&&!v){_=0,m&&(u+=this._zTime=F?-ee:ee);break}}p=m}}if(_&&!o&&(this.pause(),_.render(h>=a?0:-ee)._zTime=h>=a?1:-1,this._ts))return this._start=E,gi(this),this.render(r,o,s);this._onUpdate&&!o&&Ve(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(E===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&It(this,1),!o&&!(r<0&&!a)&&(u||a||!l)&&(Ve(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,o){var s=this;if(_t(o)||(o=nt(this,o,r)),!(r instanceof Ln)){if(Pe(r))return r.forEach(function(a){return s.add(a,o)}),this;if(Ae(r))return this.addLabel(r,o);if(pe(r))r=_e.delayedCall(0,r);else return this}return this!==r?ut(this,r,o):this},n.getChildren=function(r,o,s,a){r===void 0&&(r=!0),o===void 0&&(o=!0),s===void 0&&(s=!0),a===void 0&&(a=-it);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof _e?o&&l.push(c):(s&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,o,s)))),c=c._next;return l},n.getById=function(r){for(var o=this.getChildren(1,1,1),s=o.length;s--;)if(o[s].vars.id===r)return o[s]},n.remove=function(r){return Ae(r)?this.removeLabel(r):pe(r)?this.killTweensOf(r):(r.parent===this&&mi(this,r),r===this._recent&&(this._recent=this._last),Gt(this))},n.totalTime=function(r,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ce(Xe.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),t.prototype.totalTime.call(this,r,o),this._forcing=0,this):this._tTime},n.addLabel=function(r,o){return this.labels[r]=nt(this,o),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,o,s){var a=_e.delayedCall(0,o||An,s);return a.data="isPause",this._hasPause=1,ut(this,a,nt(this,r))},n.removePause=function(r){var o=this._first;for(r=nt(this,r);o;)o._start===r&&o.data==="isPause"&&It(o),o=o._next},n.killTweensOf=function(r,o,s){for(var a=this.getTweensOf(r,s),l=a.length;l--;)St!==a[l]&&a[l].kill(r,o);return this},n.getTweensOf=function(r,o){for(var s=[],a=rt(r),l=this._first,c=_t(o),u;l;)l instanceof _e?gl(l._targets,a)&&(c?(!St||l._initted&&l._ts)&&l.globalTime(0)<=o&&l.globalTime(l.totalDuration())>o:!o||l.isActive())&&s.push(l):(u=l.getTweensOf(a,o)).length&&s.push.apply(s,u),l=l._next;return s},n.tweenTo=function(r,o){o=o||{};var s=this,a=nt(s,r),l=o,c=l.startAt,u=l.onStart,f=l.onStartParams,h=l.immediateRender,p,m=_e.to(s,Qe({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:o.duration||Math.abs((a-(c&&"time"in c?c.time:s._time))/s.timeScale())||ee,onStart:function(){if(s.pause(),!p){var g=o.duration||Math.abs((a-(c&&"time"in c?c.time:s._time))/s.timeScale());m._dur!==g&&fn(m,g,0,1).render(m._time,!0,!0),p=1}u&&u.apply(m,f||[])}},o));return h?m.render(0):m},n.tweenFromTo=function(r,o,s){return this.tweenTo(o,Qe({startAt:{time:nt(this,r)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),Wr(this,nt(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),Wr(this,nt(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ee)},n.shiftChildren=function(r,o,s){s===void 0&&(s=0);var a=this._first,l=this.labels,c;for(r=ce(r);a;)a._start>=s&&(a._start+=r,a._end+=r),a=a._next;if(o)for(c in l)l[c]>=s&&(l[c]+=r);return Gt(this)},n.invalidate=function(r){var o=this._first;for(this._lock=0;o;)o.invalidate(r),o=o._next;return t.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var o=this._first,s;o;)s=o._next,this.remove(o),o=s;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Gt(this)},n.totalDuration=function(r){var o=0,s=this,a=s._last,l=it,c,u,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-r:r));if(s._dirty){for(f=s.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&s._sort&&a._ts&&!s._lock?(s._lock=1,ut(s,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(o-=u,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=ce(u/s._ts),s._time-=u,s._tTime-=u),s.shiftChildren(-u,!1,-1/0),l=0),a._end>o&&a._ts&&(o=a._end),a=c;fn(s,s===ue&&s._time>o?s._time:o,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(r){if(ue._ts&&(as(ue,oi(r,ue)),os=Xe.frame),Xe.frame>=Yr){Yr+=Ke.autoSleep||120;var o=ue._first;if((!o||!o._ts)&&Ke.autoSleep&&Xe._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||Xe.sleep()}}},e}(Ln);Qe(Ce.prototype,{_lock:0,_hasPause:0,_forcing:0});var Nl=function(e,n,i,r,o,s,a){var l=new Ye(this._pt,e,n,0,1,Fs,null,o),c=0,u=0,f,h,p,m,d,g,v,_;for(l.b=i,l.e=r,i+="",r+="",(v=~r.indexOf("random("))&&(r=Cn(r)),s&&(_=[i,r],s(_,e,n),i=_[0],r=_[1]),h=i.match(Ei)||[];f=Ei.exec(r);)m=f[0],d=r.substring(c,f.index),p?p=(p+1)%5:d.substr(-5)==="rgba("&&(p=1),m!==h[u++]&&(g=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:d||u===1?d:",",s:g,c:m.charAt(1)==="="?rn(g,m)-g:parseFloat(m)-g,m:p&&p<4?Math.round:0},c=Ei.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(ts.test(r)||v)&&(l.e=0),this._pt=l,l},yr=function(e,n,i,r,o,s,a,l,c,u){pe(r)&&(r=r(o||0,e,s));var f=e[n],h=i!=="get"?i:pe(f)?c?e[n.indexOf("set")||!pe(e["get"+n.substr(3)])?n:"get"+n.substr(3)](c):e[n]():f,p=pe(f)?c?Ul:Ps:xr,m;if(Ae(r)&&(~r.indexOf("random(")&&(r=Cn(r)),r.charAt(1)==="="&&(m=rn(h,r)+(Oe(h)||0),(m||m===0)&&(r=m))),!u||h!==r||Xi)return!isNaN(h*r)&&r!==""?(m=new Ye(this._pt,e,n,+h||0,r-(h||0),typeof f=="boolean"?ql:$s,0,p),c&&(m.fp=c),a&&m.modifier(a,this,e),this._pt=m):(!f&&!(n in e)&&dr(n,r),Nl.call(this,e,n,h,r,p,l||Ke.stringFilter,c))},Bl=function(e,n,i,r,o){if(pe(e)&&(e=wn(e,o,n,i,r)),!ht(e)||e.style&&e.nodeType||Pe(e)||Jo(e))return Ae(e)?wn(e,o,n,i,r):e;var s={},a;for(a in e)s[a]=wn(e[a],o,n,i,r);return s},Is=function(e,n,i,r,o,s){var a,l,c,u;if(qe[e]&&(a=new qe[e]).init(o,a.rawVars?n[e]:Bl(n[e],r,o,s,i),i,r,s)!==!1&&(i._pt=l=new Ye(i._pt,o,e,0,1,a.render,a,0,a.priority),i!==en))for(c=i._ptLookup[i._targets.indexOf(o)],u=a._props.length;u--;)c[a._props[u]]=l;return a},St,Xi,_r=function t(e,n,i){var r=e.vars,o=r.ease,s=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,f=r.yoyoEase,h=r.keyframes,p=r.autoRevert,m=e._dur,d=e._startAt,g=e._targets,v=e.parent,_=v&&v.data==="nested"?v.vars.targets:g,S=e._overwrite==="auto"&&!lr,E=e.timeline,x,T,w,A,b,F,W,q,X,L,I,M,P;if(E&&(!h||!o)&&(o="none"),e._ease=Ht(o,ln.ease),e._yEase=f?Cs(Ht(f===!0?o:f,ln.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!E&&!!r.runBackwards,!E||h&&!r.stagger){if(q=g[0]?Yt(g[0]).harness:0,M=q&&r[q.prop],x=ri(r,hr),d&&(d._zTime<0&&d.progress(1),n<0&&u&&a&&!p?d.render(-1,!0):d.revert(u&&m?Jn:pl),d._lazy=0),s){if(It(e._startAt=_e.set(g,Qe({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!d&&Ne(l),startAt:null,delay:0,onUpdate:c&&function(){return Ve(e,"onUpdate")},stagger:0},s))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Te||!a&&!p)&&e._startAt.revert(Jn),a&&m&&n<=0&&i<=0){n&&(e._zTime=n);return}}else if(u&&m&&!d){if(n&&(a=!1),w=Qe({overwrite:!1,data:"isFromStart",lazy:a&&!d&&Ne(l),immediateRender:a,stagger:0,parent:v},x),M&&(w[q.prop]=M),It(e._startAt=_e.set(g,w)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Te?e._startAt.revert(Jn):e._startAt.render(-1,!0)),e._zTime=n,!a)t(e._startAt,ee,ee);else if(!n)return}for(e._pt=e._ptCache=0,l=m&&Ne(l)||l&&!m,T=0;T<g.length;T++){if(b=g[T],W=b._gsap||mr(g)[T]._gsap,e._ptLookup[T]=L={},Yi[W.id]&&Tt.length&&ii(),I=_===g?T:_.indexOf(b),q&&(X=new q).init(b,M||x,e,I,_)!==!1&&(e._pt=A=new Ye(e._pt,b,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(B){L[B]=A}),X.priority&&(F=1)),!q||M)for(w in x)qe[w]&&(X=Is(w,x,e,I,b,_))?X.priority&&(F=1):L[w]=A=yr.call(e,b,w,"get",x[w],I,_,0,r.stringFilter);e._op&&e._op[T]&&e.kill(b,e._op[T]),S&&e._pt&&(St=e,ue.killTweensOf(b,L,e.globalTime(n)),P=!e.parent,St=0),e._pt&&l&&(Yi[W.id]=1)}F&&Rs(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!P,h&&n<=0&&E.render(it,!0,!0)},Yl=function(e,n,i,r,o,s,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[n],u,f,h,p;if(!c)for(c=e._ptCache[n]=[],h=e._ptLookup,p=e._targets.length;p--;){if(u=h[p][n],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==n&&u.fp!==n;)u=u._next;if(!u)return Xi=1,e.vars[n]="+=0",_r(e,a),Xi=0,l?Sn(n+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)f=c[p],u=f._pt||f,u.s=(r||r===0)&&!o?r:u.s+(r||0)+s*u.c,u.c=i-u.s,f.e&&(f.e=ye(i)+Oe(f.e)),f.b&&(f.b=u.s+Oe(f.b))},Gl=function(e,n){var i=e[0]?Yt(e[0]).harness:0,r=i&&i.aliases,o,s,a,l;if(!r)return n;o=cn({},n);for(s in r)if(s in o)for(l=r[s].split(","),a=l.length;a--;)o[l[a]]=o[s];return o},Hl=function(e,n,i,r){var o=n.ease||r||"power1.inOut",s,a;if(Pe(n))a=i[e]||(i[e]=[]),n.forEach(function(l,c){return a.push({t:c/(n.length-1)*100,v:l,e:o})});else for(s in n)a=i[s]||(i[s]=[]),s==="ease"||a.push({t:parseFloat(e),v:n[s],e:o})},wn=function(e,n,i,r,o){return pe(e)?e.call(n,i,r,o):Ae(e)&&~e.indexOf("random(")?Cn(e):e},ks=pr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Os={};Be(ks+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return Os[t]=1});var _e=function(t){Zo(e,t);function e(i,r,o,s){var a;typeof r=="number"&&(o.duration=r,r=o,o=null),a=t.call(this,s?r:vn(r))||this;var l=a.vars,c=l.duration,u=l.delay,f=l.immediateRender,h=l.stagger,p=l.overwrite,m=l.keyframes,d=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,_=r.parent||ue,S=(Pe(i)||Jo(i)?_t(i[0]):"length"in r)?[i]:rt(i),E,x,T,w,A,b,F,W;if(a._targets=S.length?mr(S):Sn("GSAP target "+i+" not found. https://gsap.com",!Ke.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,m||h||Un(c)||Un(u)){if(r=a.vars,E=a.timeline=new Ce({data:"nested",defaults:d||{},targets:_&&_.data==="nested"?_.vars.targets:S}),E.kill(),E.parent=E._dp=gt(a),E._start=0,h||Un(c)||Un(u)){if(w=S.length,F=h&&gs(h),ht(h))for(A in h)~ks.indexOf(A)&&(W||(W={}),W[A]=h[A]);for(x=0;x<w;x++)T=ri(r,Os),T.stagger=0,v&&(T.yoyoEase=v),W&&cn(T,W),b=S[x],T.duration=+wn(c,gt(a),x,b,S),T.delay=(+wn(u,gt(a),x,b,S)||0)-a._delay,!h&&w===1&&T.delay&&(a._delay=u=T.delay,a._start+=u,T.delay=0),E.to(b,T,F?F(x,b,S):0),E._ease=G.none;E.duration()?c=u=0:a.timeline=0}else if(m){vn(Qe(E.vars.defaults,{ease:"none"})),E._ease=Ht(m.ease||r.ease||"none");var q=0,X,L,I;if(Pe(m))m.forEach(function(M){return E.to(S,M,">")}),E.duration();else{T={};for(A in m)A==="ease"||A==="easeEach"||Hl(A,m[A],T,m.easeEach);for(A in T)for(X=T[A].sort(function(M,P){return M.t-P.t}),q=0,x=0;x<X.length;x++)L=X[x],I={ease:L.e,duration:(L.t-(x?X[x-1].t:0))/100*c},I[A]=L.v,E.to(S,I,q),q+=I.duration;E.duration()<c&&E.to({},{duration:c-E.duration()})}}c||a.duration(c=E.duration())}else a.timeline=0;return p===!0&&!lr&&(St=gt(a),ue.killTweensOf(S),St=0),ut(_,gt(a),o),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!c&&!m&&a._start===ce(_._time)&&Ne(f)&&vl(gt(a))&&_.data!=="nested")&&(a._tTime=-ee,a.render(Math.max(0,-u)||0)),g&&ds(gt(a),g),a}var n=e.prototype;return n.render=function(r,o,s){var a=this._time,l=this._tDur,c=this._dur,u=r<0,f=r>l-ee&&!u?l:r<ee?0:r,h,p,m,d,g,v,_,S,E;if(!c)wl(this,r,o,s);else if(f!==this._tTime||!r||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(h=f,S=this.timeline,this._repeat){if(d=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(d*100+r,o,s);if(h=ce(f%d),f===l?(m=this._repeat,h=c):(g=ce(f/d),m=~~g,m&&m===g?(h=c,m--):h>c&&(h=c)),v=this._yoyo&&m&1,v&&(E=this._yEase,h=c-h),g=un(this._tTime,d),h===a&&!s&&this._initted&&m===g)return this._tTime=f,this;m!==g&&(S&&this._yEase&&Ts(S,v),this.vars.repeatRefresh&&!v&&!this._lock&&h!==d&&this._initted&&(this._lock=s=1,this.render(ce(d*m),!0).invalidate()._lock=0))}if(!this._initted){if(hs(this,u?r:h,s,o,f))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&m!==g))return this;if(c!==this._dur)return this.render(r,o,s)}if(this._tTime=f,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(E||this._ease)(h/c),this._from&&(this.ratio=_=1-_),!a&&f&&!o&&!g&&(Ve(this,"onStart"),this._tTime!==f))return this;for(p=this._pt;p;)p.r(_,p.d),p=p._next;S&&S.render(r<0?r:S._dur*S._ease(h/this._dur),o,s)||this._startAt&&(this._zTime=r),this._onUpdate&&!o&&(u&&Gi(this,r,o,s),Ve(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!o&&this.parent&&Ve(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&Gi(this,r,!0,!0),(r||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&It(this,1),!o&&!(u&&!a)&&(f||a||v)&&(Ve(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),t.prototype.invalidate.call(this,r)},n.resetTo=function(r,o,s,a,l){Tn||Xe.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||_r(this,c),u=this._ease(c/this._dur),Yl(this,r,o,s,a,u,c,l)?this.resetTo(r,o,s,a,1):(yi(this,0),this.parent||us(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,o){if(o===void 0&&(o="all"),!r&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?gn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Te),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(r,o,St&&St.vars.overwrite!==!0)._first||gn(this),this.parent&&s!==this.timeline.totalDuration()&&fn(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,l=r?rt(r):a,c=this._ptLookup,u=this._pt,f,h,p,m,d,g,v;if((!o||o==="all")&&_l(a,l))return o==="all"&&(this._pt=0),gn(this);for(f=this._op=this._op||[],o!=="all"&&(Ae(o)&&(d={},Be(o,function(_){return d[_]=1}),o=d),o=Gl(a,o)),v=a.length;v--;)if(~l.indexOf(a[v])){h=c[v],o==="all"?(f[v]=o,m=h,p={}):(p=f[v]=f[v]||{},m=o);for(d in m)g=h&&h[d],g&&((!("kill"in g.d)||g.d.kill(d)===!0)&&mi(this,g,"_pt"),delete h[d]),p!=="all"&&(p[d]=1)}return this._initted&&!this._pt&&u&&gn(this),this},e.to=function(r,o){return new e(r,o,arguments[2])},e.from=function(r,o){return bn(1,arguments)},e.delayedCall=function(r,o,s,a){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:o,onReverseComplete:o,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},e.fromTo=function(r,o,s){return bn(2,arguments)},e.set=function(r,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(r,o)},e.killTweensOf=function(r,o,s){return ue.killTweensOf(r,o,s)},e}(Ln);Qe(_e.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Be("staggerTo,staggerFrom,staggerFromTo",function(t){_e[t]=function(){var e=new Ce,n=Ui.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var xr=function(e,n,i){return e[n]=i},Ps=function(e,n,i){return e[n](i)},Ul=function(e,n,i,r){return e[n](r.fp,i)},Wl=function(e,n,i){return e.setAttribute(n,i)},vr=function(e,n){return pe(e[n])?Ps:cr(e[n])&&e.setAttribute?Wl:xr},$s=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},ql=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},Fs=function(e,n){var i=n._pt,r="";if(!e&&n.b)r=n.b;else if(e===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},br=function(e,n){for(var i=n._pt;i;)i.r(e,i.d),i=i._next},Xl=function(e,n,i,r){for(var o=this._pt,s;o;)s=o._next,o.p===r&&o.modifier(e,n,i),o=s},Vl=function(e){for(var n=this._pt,i,r;n;)r=n._next,n.p===e&&!n.op||n.op===e?mi(this,n,"_pt"):n.dep||(i=1),n=r;return!i},jl=function(e,n,i,r){r.mSet(e,n,r.m.call(r.tween,i,r.mt),r)},Rs=function(e){for(var n=e._pt,i,r,o,s;n;){for(i=n._next,r=o;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:s)?n._prev._next=n:o=n,(n._next=r)?r._prev=n:s=n,n=i}e._pt=o},Ye=function(){function t(n,i,r,o,s,a,l,c,u){this.t=i,this.s=o,this.c=s,this.p=r,this.r=a||$s,this.d=l||this,this.set=c||xr,this.pr=u||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(i,r,o){this.mSet=this.mSet||this.set,this.set=jl,this.m=i,this.mt=o,this.tween=r},t}();Be(pr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return hr[t]=1});Ze.TweenMax=Ze.TweenLite=_e;Ze.TimelineLite=Ze.TimelineMax=Ce;ue=new Ce({sortChildren:!1,defaults:ln,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ke.stringFilter=As;var Ut=[],ti={},Kl=[],Xr=0,Zl=0,Li=function(e){return(ti[e]||Kl).map(function(n){return n()})},Vi=function(){var e=Date.now(),n=[];e-Xr>2&&(Li("matchMediaInit"),Ut.forEach(function(i){var r=i.queries,o=i.conditions,s,a,l,c;for(a in r)s=ct.matchMedia(r[a]).matches,s&&(l=1),s!==o[a]&&(o[a]=s,c=1);c&&(i.revert(),l&&n.push(i))}),Li("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),Xr=e,Li("matchMedia"))},Ds=function(){function t(n,i){this.selector=i&&Wi(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Zl++,n&&this.add(n)}var e=t.prototype;return e.add=function(i,r,o){pe(i)&&(o=r,r=i,i=pe);var s=this,a=function(){var c=ie,u=s.selector,f;return c&&c!==s&&c.data.push(s),o&&(s.selector=Wi(o)),ie=s,f=r.apply(s,arguments),pe(f)&&s._r.push(f),ie=c,s.selector=u,s.isReverted=!1,f};return s.last=a,i===pe?a(s,function(l){return s.add(null,l)}):i?s[i]=a:a},e.ignore=function(i){var r=ie;ie=null,i(this),ie=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof t?i.push.apply(i,r.getTweens()):r instanceof _e&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var o=this;if(i?function(){for(var a=o.getTweens(),l=o.data.length,c;l--;)c=o.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,f){return f.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=o.data.length;l--;)c=o.data[l],c instanceof Ce?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof _e)&&c.revert&&c.revert(i);o._r.forEach(function(u){return u(i,o)}),o.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var s=Ut.length;s--;)Ut[s].id===this.id&&Ut.splice(s,1)},e.revert=function(i){this.kill(i||{})},t}(),Ql=function(){function t(n){this.contexts=[],this.scope=n,ie&&ie.data.push(this)}var e=t.prototype;return e.add=function(i,r,o){ht(i)||(i={matches:i});var s=new Ds(0,o||this.scope),a=s.conditions={},l,c,u;ie&&!s.selector&&(s.selector=ie.selector),this.contexts.push(s),r=s.add("onMatch",r),s.queries=i;for(c in i)c==="all"?u=1:(l=ct.matchMedia(i[c]),l&&(Ut.indexOf(s)<0&&Ut.push(s),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Vi):l.addEventListener("change",Vi)));return u&&r(s,function(f){return s.add(null,f)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},t}(),si={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(r){return ws(r)})},timeline:function(e){return new Ce(e)},getTweensOf:function(e,n){return ue.getTweensOf(e,n)},getProperty:function(e,n,i,r){Ae(e)&&(e=rt(e)[0]);var o=Yt(e||{}).get,s=i?cs:ls;return i==="native"&&(i=""),e&&(n?s((qe[n]&&qe[n].get||o)(e,n,i,r)):function(a,l,c){return s((qe[a]&&qe[a].get||o)(e,a,l,c))})},quickSetter:function(e,n,i){if(e=rt(e),e.length>1){var r=e.map(function(u){return Ue.quickSetter(u,n,i)}),o=r.length;return function(u){for(var f=o;f--;)r[f](u)}}e=e[0]||{};var s=qe[n],a=Yt(e),l=a.harness&&(a.harness.aliases||{})[n]||n,c=s?function(u){var f=new s;en._pt=0,f.init(e,i?u+i:u,en,0,[e]),f.render(1,f),en._pt&&br(1,en)}:a.set(e,l);return s?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,n,i){var r,o=Ue.to(e,Qe((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),s=function(l,c,u){return o.resetTo(n,l,c,u)};return s.tween=o,s},isTweening:function(e){return ue.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ht(e.ease,ln.ease)),Gr(ln,e||{})},config:function(e){return Gr(Ke,e||{})},registerEffect:function(e){var n=e.name,i=e.effect,r=e.plugins,o=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!qe[a]&&!Ze[a]&&Sn(n+" effect requires "+a+" plugin.")}),Si[n]=function(a,l,c){return i(rt(a),Qe(l||{},o),c)},s&&(Ce.prototype[n]=function(a,l,c){return this.add(Si[n](a,ht(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,n){G[e]=Ht(n)},parseEase:function(e,n){return arguments.length?Ht(e,n):G},getById:function(e){return ue.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var i=new Ce(e),r,o;for(i.smoothChildTiming=Ne(e.smoothChildTiming),ue.remove(i),i._dp=0,i._time=i._tTime=ue._time,r=ue._first;r;)o=r._next,(n||!(!r._dur&&r instanceof _e&&r.vars.onComplete===r._targets[0]))&&ut(i,r,r._start-r._delay),r=o;return ut(ue,i,0),i},context:function(e,n){return e?new Ds(e,n):ie},matchMedia:function(e){return new Ql(e)},matchMediaRefresh:function(){return Ut.forEach(function(e){var n=e.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&e.revert()})||Vi()},addEventListener:function(e,n){var i=ti[e]||(ti[e]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(e,n){var i=ti[e],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:Il,wrapYoyo:kl,distribute:gs,random:_s,snap:ys,normalize:Ml,getUnit:Oe,clamp:Al,splitColor:Es,toArray:rt,selector:Wi,mapRange:vs,pipe:Tl,unitize:Ll,interpolate:Ol,shuffle:ms},install:is,effects:Si,ticker:Xe,updateRoot:Ce.updateRoot,plugins:qe,globalTimeline:ue,core:{PropTween:Ye,globals:rs,Tween:_e,Timeline:Ce,Animation:Ln,getCache:Yt,_removeLinkedListItem:mi,reverting:function(){return Te},context:function(e){return e&&ie&&(ie.data.push(e),e._ctx=ie),ie},suppressOverwrites:function(e){return lr=e}}};Be("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return si[t]=_e[t]});Xe.add(Ce.updateRoot);en=si.to({},{duration:0});var Jl=function(e,n){for(var i=e._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},ec=function(e,n){var i=e._targets,r,o,s;for(r in n)for(o=i.length;o--;)s=e._ptLookup[o][r],s&&(s=s.d)&&(s._pt&&(s=Jl(s,r)),s&&s.modifier&&s.modifier(n[r],e,i[o],r))},Mi=function(e,n){return{name:e,headless:1,rawVars:1,init:function(r,o,s){s._onInit=function(a){var l,c;if(Ae(o)&&(l={},Be(o,function(u){return l[u]=1}),o=l),n){l={};for(c in o)l[c]=n(o[c]);o=l}ec(a,o)}}}},Ue=si.registerPlugin({name:"attr",init:function(e,n,i,r,o){var s,a,l;this.tween=i;for(s in n)l=e.getAttribute(s)||"",a=this.add(e,"setAttribute",(l||0)+"",n[s],r,o,0,0,s),a.op=s,a.b=l,this._props.push(s)},render:function(e,n){for(var i=n._pt;i;)Te?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,n){for(var i=n.length;i--;)this.add(e,i,e[i]||0,n[i],0,0,0,0,0,1)}},Mi("roundProps",qi),Mi("modifiers"),Mi("snap",ys))||si;_e.version=Ce.version=Ue.version="3.14.2";ns=1;ur()&&dn();G.Power0;G.Power1;G.Power2;G.Power3;G.Power4;G.Linear;G.Quad;G.Cubic;G.Quart;G.Quint;G.Strong;G.Elastic;G.Back;G.SteppedEase;G.Bounce;G.Sine;G.Expo;G.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Vr,At,on,wr,Bt,jr,Er,tc=function(){return typeof window<"u"},xt={},Nt=180/Math.PI,sn=Math.PI/180,jt=Math.atan2,Kr=1e8,Sr=/([A-Z])/g,nc=/(left|right|width|margin|padding|x)/i,ic=/[\s,\(]\S/,ft={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ji=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},rc=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},oc=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},sc=function(e,n){return n.set(n.t,n.p,e===1?n.e:e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},ac=function(e,n){var i=n.s+n.c*e;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},zs=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},Ns=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},lc=function(e,n,i){return e.style[n]=i},cc=function(e,n,i){return e.style.setProperty(n,i)},uc=function(e,n,i){return e._gsap[n]=i},fc=function(e,n,i){return e._gsap.scaleX=e._gsap.scaleY=i},dc=function(e,n,i,r,o){var s=e._gsap;s.scaleX=s.scaleY=i,s.renderTransform(o,s)},hc=function(e,n,i,r,o){var s=e._gsap;s[n]=i,s.renderTransform(o,s)},fe="transform",Ge=fe+"Origin",pc=function t(e,n){var i=this,r=this.target,o=r.style,s=r._gsap;if(e in xt&&o){if(this.tfm=this.tfm||{},e!=="transform")e=ft[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=yt(r,a)}):this.tfm[e]=s.x?s[e]:yt(r,e),e===Ge&&(this.tfm.zOrigin=s.zOrigin);else return ft.transform.split(",").forEach(function(a){return t.call(i,a,n)});if(this.props.indexOf(fe)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ge,n,"")),e=fe}(o||n)&&this.props.push(e,n,o[e])},Bs=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},mc=function(){var e=this.props,n=this.target,i=n.style,r=n._gsap,o,s;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?n[e[o]](e[o+2]):n[e[o]]=e[o+2]:e[o+2]?i[e[o]]=e[o+2]:i.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(Sr,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)r[s]=this.tfm[s];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),o=Er(),(!o||!o.isStart)&&!i[fe]&&(Bs(i),r.zOrigin&&i[Ge]&&(i[Ge]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Ys=function(e,n){var i={target:e,props:[],revert:mc,save:pc};return e._gsap||Ue.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},Gs,Ki=function(e,n){var i=At.createElementNS?At.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):At.createElement(e);return i&&i.style?i:At.createElement(e)},je=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(Sr,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,hn(n)||n,1)||""},Zr="O,Moz,ms,Ms,Webkit".split(","),hn=function(e,n,i){var r=n||Bt,o=r.style,s=5;if(e in o&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(Zr[s]+e in o););return s<0?null:(s===3?"ms":s>=0?Zr[s]:"")+e},Zi=function(){tc()&&window.document&&(Vr=window,At=Vr.document,on=At.documentElement,Bt=Ki("div")||{style:{}},Ki("div"),fe=hn(fe),Ge=fe+"Origin",Bt.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Gs=!!hn("perspective"),Er=Ue.core.reverting,wr=1)},Qr=function(e){var n=e.ownerSVGElement,i=Ki("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),o;r.style.display="block",i.appendChild(r),on.appendChild(i);try{o=r.getBBox()}catch{}return i.removeChild(r),on.removeChild(i),o},Jr=function(e,n){for(var i=n.length;i--;)if(e.hasAttribute(n[i]))return e.getAttribute(n[i])},Hs=function(e){var n,i;try{n=e.getBBox()}catch{n=Qr(e),i=1}return n&&(n.width||n.height)||i||(n=Qr(e)),n&&!n.width&&!n.x&&!n.y?{x:+Jr(e,["x","cx","x1"])||0,y:+Jr(e,["y","cy","y1"])||0,width:0,height:0}:n},Us=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Hs(e))},kt=function(e,n){if(n){var i=e.style,r;n in xt&&n!==Ge&&(n=fe),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(Sr,"-$1").toLowerCase())):i.removeAttribute(n)}},Ct=function(e,n,i,r,o,s){var a=new Ye(e._pt,n,i,0,1,s?Ns:zs);return e._pt=a,a.b=r,a.e=o,e._props.push(i),a},eo={deg:1,rad:1,turn:1},gc={grid:1,flex:1},Ot=function t(e,n,i,r){var o=parseFloat(i)||0,s=(i+"").trim().substr((o+"").length)||"px",a=Bt.style,l=nc.test(n),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,h=r==="px",p=r==="%",m,d,g,v;if(r===s||!o||eo[r]||eo[s])return o;if(s!=="px"&&!h&&(o=t(e,n,i,"px")),v=e.getCTM&&Us(e),(p||s==="%")&&(xt[n]||~n.indexOf("adius")))return m=v?e.getBBox()[l?"width":"height"]:e[u],ye(p?o/m*f:o/100*m);if(a[l?"width":"height"]=f+(h?s:r),d=r!=="rem"&&~n.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,v&&(d=(e.ownerSVGElement||{}).parentNode),(!d||d===At||!d.appendChild)&&(d=At.body),g=d._gsap,g&&p&&g.width&&l&&g.time===Xe.time&&!g.uncache)return ye(o/g.width*f);if(p&&(n==="height"||n==="width")){var _=e.style[n];e.style[n]=f+r,m=e[u],_?e.style[n]=_:kt(e,n)}else(p||s==="%")&&!gc[je(d,"display")]&&(a.position=je(e,"position")),d===e&&(a.position="static"),d.appendChild(Bt),m=Bt[u],d.removeChild(Bt),a.position="absolute";return l&&p&&(g=Yt(d),g.time=Xe.time,g.width=d[u]),ye(h?m*o/f:m&&o?f/m*o:0)},yt=function(e,n,i,r){var o;return wr||Zi(),n in ft&&n!=="transform"&&(n=ft[n],~n.indexOf(",")&&(n=n.split(",")[0])),xt[n]&&n!=="transform"?(o=In(e,r),o=n!=="transformOrigin"?o[n]:o.svg?o.origin:li(je(e,Ge))+" "+o.zOrigin+"px"):(o=e.style[n],(!o||o==="auto"||r||~(o+"").indexOf("calc("))&&(o=ai[n]&&ai[n](e,n,i)||je(e,n)||ss(e,n)||(n==="opacity"?1:0))),i&&!~(o+"").trim().indexOf(" ")?Ot(e,n,o,i)+i:o},yc=function(e,n,i,r){if(!i||i==="none"){var o=hn(n,e,1),s=o&&je(e,o,1);s&&s!==i?(n=o,i=s):n==="borderColor"&&(i=je(e,"borderTopColor"))}var a=new Ye(this._pt,e.style,n,0,1,Fs),l=0,c=0,u,f,h,p,m,d,g,v,_,S,E,x;if(a.b=i,a.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=je(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(d=e.style[n],e.style[n]=r,r=je(e,n)||r,d?e.style[n]=d:kt(e,n)),u=[i,r],As(u),i=u[0],r=u[1],h=i.match(Jt)||[],x=r.match(Jt)||[],x.length){for(;f=Jt.exec(r);)g=f[0],_=r.substring(l,f.index),m?m=(m+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(m=1),g!==(d=h[c++]||"")&&(p=parseFloat(d)||0,E=d.substr((p+"").length),g.charAt(1)==="="&&(g=rn(p,g)+E),v=parseFloat(g),S=g.substr((v+"").length),l=Jt.lastIndex-S.length,S||(S=S||Ke.units[n]||E,l===r.length&&(r+=S,a.e+=S)),E!==S&&(p=Ot(e,n,d,S)||0),a._pt={_next:a._pt,p:_||c===1?_:",",s:p,c:v-p,m:m&&m<4||n==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=n==="display"&&r==="none"?Ns:zs;return ts.test(r)&&(a.e=0),this._pt=a,a},to={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_c=function(e){var n=e.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),n[0]=to[i]||i,n[1]=to[r]||r,n.join(" ")},xc=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,o=n.u,s=i._gsap,a,l,c;if(o==="all"||o===!0)r.cssText="",l=1;else for(o=o.split(","),c=o.length;--c>-1;)a=o[c],xt[a]&&(l=1,a=a==="transformOrigin"?Ge:fe),kt(i,a);l&&(kt(i,fe),s&&(s.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",In(i,1),s.uncache=1,Bs(r)))}},ai={clearProps:function(e,n,i,r,o){if(o.data!=="isFromStart"){var s=e._pt=new Ye(e._pt,n,i,0,0,xc);return s.u=r,s.pr=-10,s.tween=o,e._props.push(i),1}}},Mn=[1,0,0,1,0,0],Ws={},qs=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},no=function(e){var n=je(e,fe);return qs(n)?Mn:n.substr(7).match(es).map(ye)},Ar=function(e,n){var i=e._gsap||Yt(e),r=e.style,o=no(e),s,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,o=[l.a,l.b,l.c,l.d,l.e,l.f],o.join(",")==="1,0,0,1,0,0"?Mn:o):(o===Mn&&!e.offsetParent&&e!==on&&!i.svg&&(l=r.display,r.display="block",s=e.parentNode,(!s||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,on.appendChild(e)),o=no(e),l?r.display=l:kt(e,"display"),c&&(a?s.insertBefore(e,a):s?s.appendChild(e):on.removeChild(e))),n&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},Qi=function(e,n,i,r,o,s){var a=e._gsap,l=o||Ar(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,h=a.yOffset||0,p=l[0],m=l[1],d=l[2],g=l[3],v=l[4],_=l[5],S=n.split(" "),E=parseFloat(S[0])||0,x=parseFloat(S[1])||0,T,w,A,b;i?l!==Mn&&(w=p*g-m*d)&&(A=E*(g/w)+x*(-d/w)+(d*_-g*v)/w,b=E*(-m/w)+x*(p/w)-(p*_-m*v)/w,E=A,x=b):(T=Hs(e),E=T.x+(~S[0].indexOf("%")?E/100*T.width:E),x=T.y+(~(S[1]||S[0]).indexOf("%")?x/100*T.height:x)),r||r!==!1&&a.smooth?(v=E-c,_=x-u,a.xOffset=f+(v*p+_*d)-v,a.yOffset=h+(v*m+_*g)-_):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=x,a.smooth=!!r,a.origin=n,a.originIsAbsolute=!!i,e.style[Ge]="0px 0px",s&&(Ct(s,a,"xOrigin",c,E),Ct(s,a,"yOrigin",u,x),Ct(s,a,"xOffset",f,a.xOffset),Ct(s,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+x)},In=function(e,n){var i=e._gsap||new Ms(e);if("x"in i&&!n&&!i.uncache)return i;var r=e.style,o=i.scaleX<0,s="px",a="deg",l=getComputedStyle(e),c=je(e,Ge)||"0",u,f,h,p,m,d,g,v,_,S,E,x,T,w,A,b,F,W,q,X,L,I,M,P,B,K,te,de,V,re,U,oe;return u=f=h=d=g=v=_=S=E=0,p=m=1,i.svg=!!(e.getCTM&&Us(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[fe]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[fe]!=="none"?l[fe]:"")),r.scale=r.rotate=r.translate="none"),w=Ar(e,i.svg),i.svg&&(i.uncache?(B=e.getBBox(),c=i.xOrigin-B.x+"px "+(i.yOrigin-B.y)+"px",P=""):P=!n&&e.getAttribute("data-svg-origin"),Qi(e,P||c,!!P||i.originIsAbsolute,i.smooth!==!1,w)),x=i.xOrigin||0,T=i.yOrigin||0,w!==Mn&&(W=w[0],q=w[1],X=w[2],L=w[3],u=I=w[4],f=M=w[5],w.length===6?(p=Math.sqrt(W*W+q*q),m=Math.sqrt(L*L+X*X),d=W||q?jt(q,W)*Nt:0,_=X||L?jt(X,L)*Nt+d:0,_&&(m*=Math.abs(Math.cos(_*sn))),i.svg&&(u-=x-(x*W+T*X),f-=T-(x*q+T*L))):(oe=w[6],re=w[7],te=w[8],de=w[9],V=w[10],U=w[11],u=w[12],f=w[13],h=w[14],A=jt(oe,V),g=A*Nt,A&&(b=Math.cos(-A),F=Math.sin(-A),P=I*b+te*F,B=M*b+de*F,K=oe*b+V*F,te=I*-F+te*b,de=M*-F+de*b,V=oe*-F+V*b,U=re*-F+U*b,I=P,M=B,oe=K),A=jt(-X,V),v=A*Nt,A&&(b=Math.cos(-A),F=Math.sin(-A),P=W*b-te*F,B=q*b-de*F,K=X*b-V*F,U=L*F+U*b,W=P,q=B,X=K),A=jt(q,W),d=A*Nt,A&&(b=Math.cos(A),F=Math.sin(A),P=W*b+q*F,B=I*b+M*F,q=q*b-W*F,M=M*b-I*F,W=P,I=B),g&&Math.abs(g)+Math.abs(d)>359.9&&(g=d=0,v=180-v),p=ye(Math.sqrt(W*W+q*q+X*X)),m=ye(Math.sqrt(M*M+oe*oe)),A=jt(I,M),_=Math.abs(A)>2e-4?A*Nt:0,E=U?1/(U<0?-U:U):0),i.svg&&(P=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!qs(je(e,fe)),P&&e.setAttribute("transform",P))),Math.abs(_)>90&&Math.abs(_)<270&&(o?(p*=-1,_+=d<=0?180:-180,d+=d<=0?180:-180):(m*=-1,_+=_<=0?180:-180)),n=n||i.uncache,i.x=u-((i.xPercent=u&&(!n&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+s,i.y=f-((i.yPercent=f&&(!n&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+s,i.z=h+s,i.scaleX=ye(p),i.scaleY=ye(m),i.rotation=ye(d)+a,i.rotationX=ye(g)+a,i.rotationY=ye(v)+a,i.skewX=_+a,i.skewY=S+a,i.transformPerspective=E+s,(i.zOrigin=parseFloat(c.split(" ")[2])||!n&&i.zOrigin||0)&&(r[Ge]=li(c)),i.xOffset=i.yOffset=0,i.force3D=Ke.force3D,i.renderTransform=i.svg?bc:Gs?Xs:vc,i.uncache=0,i},li=function(e){return(e=e.split(" "))[0]+" "+e[1]},Ii=function(e,n,i){var r=Oe(n);return ye(parseFloat(n)+parseFloat(Ot(e,"x",i+"px",r)))+r},vc=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,Xs(e,n)},Ft="0deg",mn="0px",Rt=") ",Xs=function(e,n){var i=n||this,r=i.xPercent,o=i.yPercent,s=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,f=i.rotationX,h=i.skewX,p=i.skewY,m=i.scaleX,d=i.scaleY,g=i.transformPerspective,v=i.force3D,_=i.target,S=i.zOrigin,E="",x=v==="auto"&&e&&e!==1||v===!0;if(S&&(f!==Ft||u!==Ft)){var T=parseFloat(u)*sn,w=Math.sin(T),A=Math.cos(T),b;T=parseFloat(f)*sn,b=Math.cos(T),s=Ii(_,s,w*b*-S),a=Ii(_,a,-Math.sin(T)*-S),l=Ii(_,l,A*b*-S+S)}g!==mn&&(E+="perspective("+g+Rt),(r||o)&&(E+="translate("+r+"%, "+o+"%) "),(x||s!==mn||a!==mn||l!==mn)&&(E+=l!==mn||x?"translate3d("+s+", "+a+", "+l+") ":"translate("+s+", "+a+Rt),c!==Ft&&(E+="rotate("+c+Rt),u!==Ft&&(E+="rotateY("+u+Rt),f!==Ft&&(E+="rotateX("+f+Rt),(h!==Ft||p!==Ft)&&(E+="skew("+h+", "+p+Rt),(m!==1||d!==1)&&(E+="scale("+m+", "+d+Rt),_.style[fe]=E||"translate(0, 0)"},bc=function(e,n){var i=n||this,r=i.xPercent,o=i.yPercent,s=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,f=i.scaleX,h=i.scaleY,p=i.target,m=i.xOrigin,d=i.yOrigin,g=i.xOffset,v=i.yOffset,_=i.forceCSS,S=parseFloat(s),E=parseFloat(a),x,T,w,A,b;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=sn,c*=sn,x=Math.cos(l)*f,T=Math.sin(l)*f,w=Math.sin(l-c)*-h,A=Math.cos(l-c)*h,c&&(u*=sn,b=Math.tan(c-u),b=Math.sqrt(1+b*b),w*=b,A*=b,u&&(b=Math.tan(u),b=Math.sqrt(1+b*b),x*=b,T*=b)),x=ye(x),T=ye(T),w=ye(w),A=ye(A)):(x=f,A=h,T=w=0),(S&&!~(s+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(S=Ot(p,"x",s,"px"),E=Ot(p,"y",a,"px")),(m||d||g||v)&&(S=ye(S+m-(m*x+d*w)+g),E=ye(E+d-(m*T+d*A)+v)),(r||o)&&(b=p.getBBox(),S=ye(S+r/100*b.width),E=ye(E+o/100*b.height)),b="matrix("+x+","+T+","+w+","+A+","+S+","+E+")",p.setAttribute("transform",b),_&&(p.style[fe]=b)},wc=function(e,n,i,r,o){var s=360,a=Ae(o),l=parseFloat(o)*(a&&~o.indexOf("rad")?Nt:1),c=l-r,u=r+c+"deg",f,h;return a&&(f=o.split("_")[1],f==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),f==="cw"&&c<0?c=(c+s*Kr)%s-~~(c/s)*s:f==="ccw"&&c>0&&(c=(c-s*Kr)%s-~~(c/s)*s)),e._pt=h=new Ye(e._pt,n,i,r,c,rc),h.e=u,h.u="deg",e._props.push(i),h},io=function(e,n){for(var i in n)e[i]=n[i];return e},Ec=function(e,n,i){var r=io({},i._gsap),o="perspective,force3D,transformOrigin,svgOrigin",s=i.style,a,l,c,u,f,h,p,m;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),s[fe]=n,a=In(i,1),kt(i,fe),i.setAttribute("transform",c)):(c=getComputedStyle(i)[fe],s[fe]=n,a=In(i,1),s[fe]=c);for(l in xt)c=r[l],u=a[l],c!==u&&o.indexOf(l)<0&&(p=Oe(c),m=Oe(u),f=p!==m?Ot(i,l,c,m):parseFloat(c),h=parseFloat(u),e._pt=new Ye(e._pt,a,l,f,h-f,ji),e._pt.u=m||0,e._props.push(l));io(a,r)};Be("padding,margin,Width,Radius",function(t,e){var n="Top",i="Right",r="Bottom",o="Left",s=(e<3?[n,i,r,o]:[n+o,n+i,r+i,r+o]).map(function(a){return e<2?t+a:"border"+a+t});ai[e>1?"border"+t:t]=function(a,l,c,u,f){var h,p;if(arguments.length<4)return h=s.map(function(m){return yt(a,m,c)}),p=h.join(" "),p.split(h[0]).length===5?h[0]:p;h=(u+"").split(" "),p={},s.forEach(function(m,d){return p[m]=h[d]=h[d]||h[(d-1)/2|0]}),a.init(l,p,f)}});var Cr={name:"css",register:Zi,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,i,r,o){var s=this._props,a=e.style,l=i.vars.startAt,c,u,f,h,p,m,d,g,v,_,S,E,x,T,w,A,b;wr||Zi(),this.styles=this.styles||Ys(e),A=this.styles.props,this.tween=i;for(d in n)if(d!=="autoRound"&&(u=n[d],!(qe[d]&&Is(d,n,i,r,e,o)))){if(p=typeof u,m=ai[d],p==="function"&&(u=u.call(i,r,e,o),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=Cn(u)),m)m(this,e,d,u,i)&&(w=1);else if(d.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(d)+"").trim(),u+="",Lt.lastIndex=0,Lt.test(c)||(g=Oe(c),v=Oe(u),v?g!==v&&(c=Ot(e,d,c,v)+v):g&&(u+=g)),this.add(a,"setProperty",c,u,r,o,0,0,d),s.push(d),A.push(d,0,a[d]);else if(p!=="undefined"){if(l&&d in l?(c=typeof l[d]=="function"?l[d].call(i,r,e,o):l[d],Ae(c)&&~c.indexOf("random(")&&(c=Cn(c)),Oe(c+"")||c==="auto"||(c+=Ke.units[d]||Oe(yt(e,d))||""),(c+"").charAt(1)==="="&&(c=yt(e,d))):c=yt(e,d),h=parseFloat(c),_=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),_&&(u=u.substr(2)),f=parseFloat(u),d in ft&&(d==="autoAlpha"&&(h===1&&yt(e,"visibility")==="hidden"&&f&&(h=0),A.push("visibility",0,a.visibility),Ct(this,a,"visibility",h?"inherit":"hidden",f?"inherit":"hidden",!f)),d!=="scale"&&d!=="transform"&&(d=ft[d],~d.indexOf(",")&&(d=d.split(",")[0]))),S=d in xt,S){if(this.styles.save(d),b=u,p==="string"&&u.substring(0,6)==="var(--"){if(u=je(e,u.substring(4,u.indexOf(")"))),u.substring(0,5)==="calc("){var F=e.style.perspective;e.style.perspective=u,u=je(e,"perspective"),F?e.style.perspective=F:kt(e,"perspective")}f=parseFloat(u)}if(E||(x=e._gsap,x.renderTransform&&!n.parseTransform||In(e,n.parseTransform),T=n.smoothOrigin!==!1&&x.smooth,E=this._pt=new Ye(this._pt,a,fe,0,1,x.renderTransform,x,0,-1),E.dep=1),d==="scale")this._pt=new Ye(this._pt,x,"scaleY",x.scaleY,(_?rn(x.scaleY,_+f):f)-x.scaleY||0,ji),this._pt.u=0,s.push("scaleY",d),d+="X";else if(d==="transformOrigin"){A.push(Ge,0,a[Ge]),u=_c(u),x.svg?Qi(e,u,0,T,0,this):(v=parseFloat(u.split(" ")[2])||0,v!==x.zOrigin&&Ct(this,x,"zOrigin",x.zOrigin,v),Ct(this,a,d,li(c),li(u)));continue}else if(d==="svgOrigin"){Qi(e,u,1,T,0,this);continue}else if(d in Ws){wc(this,x,d,h,_?rn(h,_+u):u);continue}else if(d==="smoothOrigin"){Ct(this,x,"smooth",x.smooth,u);continue}else if(d==="force3D"){x[d]=u;continue}else if(d==="transform"){Ec(this,u,e);continue}}else d in a||(d=hn(d)||d);if(S||(f||f===0)&&(h||h===0)&&!ic.test(u)&&d in a)g=(c+"").substr((h+"").length),f||(f=0),v=Oe(u)||(d in Ke.units?Ke.units[d]:g),g!==v&&(h=Ot(e,d,c,v)),this._pt=new Ye(this._pt,S?x:a,d,h,(_?rn(h,_+f):f)-h,!S&&(v==="px"||d==="zIndex")&&n.autoRound!==!1?ac:ji),this._pt.u=v||0,S&&b!==u?(this._pt.b=c,this._pt.e=b,this._pt.r=sc):g!==v&&v!=="%"&&(this._pt.b=c,this._pt.r=oc);else if(d in a)yc.call(this,e,d,c,_?_+u:u);else if(d in e)this.add(e,d,c||e[d],_?_+u:u,r,o);else if(d!=="parseTransform"){dr(d,u);continue}S||(d in a?A.push(d,0,a[d]):typeof e[d]=="function"?A.push(d,2,e[d]()):A.push(d,1,c||e[d])),s.push(d)}}w&&Rs(this)},render:function(e,n){if(n.tween._time||!Er())for(var i=n._pt;i;)i.r(e,i.d),i=i._next;else n.styles.revert()},get:yt,aliases:ft,getSetter:function(e,n,i){var r=ft[n];return r&&r.indexOf(",")<0&&(n=r),n in xt&&n!==Ge&&(e._gsap.x||yt(e,"x"))?i&&jr===i?n==="scale"?fc:uc:(jr=i||{})&&(n==="scale"?dc:hc):e.style&&!cr(e.style[n])?lc:~n.indexOf("-")?cc:vr(e,n)},core:{_removeProperty:kt,_getMatrix:Ar}};Ue.utils.checkPrefix=hn;Ue.core.getStyleSaver=Ys;(function(t,e,n,i){var r=Be(t+","+e+","+n,function(o){xt[o]=1});Be(e,function(o){Ke.units[o]="deg",Ws[o]=1}),ft[r[13]]=t+","+e,Be(i,function(o){var s=o.split(":");ft[s[1]]=r[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Be("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Ke.units[t]="px"});Ue.registerPlugin(Cr);var kn=Ue.registerPlugin(Cr)||Ue;kn.core.Tween;const Sc=Object.freeze(Object.defineProperty({__proto__:null,CSSPlugin:Cr,TimelineLite:Ce,TimelineMax:Ce,TweenLite:_e,default:kn,gsap:kn},Symbol.toStringTag,{value:"Module"})),Wn={rectangle:(t={})=>{const{x:e=0,y:n=0,width:i=120,height:r=60,color:o="#6366f1",label:s="",radius:a=8}=t,l=document.createElementNS("http://www.w3.org/2000/svg","g");return l.setAttribute("class","shape-group"),l.innerHTML=`
            <rect x="${e}" y="${n}" width="${i}" height="${r}" rx="${a}" 
                  fill="${o}" stroke="${tt(o,20)}" stroke-width="2" class="shape-body"/>
            ${s?`<text x="${e+i/2}" y="${n+r/2+5}" text-anchor="middle" class="shape-label">${s}</text>`:""}
        `,l},circle:(t={})=>{const{x:e=0,y:n=0,radius:i=35,color:r="#10b981",label:o=""}=t,s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.setAttribute("class","shape-group"),s.innerHTML=`
            <circle cx="${e}" cy="${n}" r="${i}" 
                    fill="${r}" stroke="${tt(r,20)}" stroke-width="2" class="shape-body"/>
            ${o?`<text x="${e}" y="${n+5}" text-anchor="middle" class="shape-label">${o}</text>`:""}
        `,s},diamond:(t={})=>{const{x:e=0,y:n=0,size:i=60,color:r="#f59e0b",label:o=""}=t,s=i/2,a=document.createElementNS("http://www.w3.org/2000/svg","g");return a.setAttribute("class","shape-group"),a.innerHTML=`
            <polygon points="${e},${n-s} ${e+s},${n} ${e},${n+s} ${e-s},${n}" 
                     fill="${r}" stroke="${tt(r,20)}" stroke-width="2" class="shape-body"/>
            ${o?`<text x="${e}" y="${n+5}" text-anchor="middle" class="shape-label">${o}</text>`:""}
        `,a},hexagon:(t={})=>{const{x:e=0,y:n=0,size:i=40,color:r="#326CE5",label:o=""}=t,s=[];for(let l=0;l<6;l++){const c=(l*60-30)*Math.PI/180;s.push(`${e+i*Math.cos(c)},${n+i*Math.sin(c)}`)}const a=document.createElementNS("http://www.w3.org/2000/svg","g");return a.setAttribute("class","shape-group"),a.innerHTML=`
            <polygon points="${s.join(" ")}" 
                     fill="${r}" stroke="${tt(r,20)}" stroke-width="2" class="shape-body"/>
            ${o?`<text x="${e}" y="${n+5}" text-anchor="middle" class="shape-label">${o}</text>`:""}
        `,a},cylinder:(t={})=>{const{x:e=0,y:n=0,width:i=80,height:r=100,color:o="#8b5cf6",label:s=""}=t,a=12,l=document.createElementNS("http://www.w3.org/2000/svg","g");return l.setAttribute("class","shape-group"),l.innerHTML=`
            <ellipse cx="${e+i/2}" cy="${n+a}" rx="${i/2}" ry="${a}" fill="${tt(o,10)}"/>
            <rect x="${e}" y="${n+a}" width="${i}" height="${r-a*2}" fill="${o}"/>
            <ellipse cx="${e+i/2}" cy="${n+r-a}" rx="${i/2}" ry="${a}" fill="${oo(o,15)}"/>
            <ellipse cx="${e+i/2}" cy="${n+a}" rx="${i/2}" ry="${a}" fill="none" stroke="${tt(o,20)}" stroke-width="2"/>
            ${s?`<text x="${e+i/2}" y="${n+r/2+5}" text-anchor="middle" class="shape-label">${s}</text>`:""}
        `,l},cloud:(t={})=>{const{x:e=0,y:n=0,width:i=120,height:r=70,color:o="#3b82f6",label:s=""}=t,a=document.createElementNS("http://www.w3.org/2000/svg","g");return a.setAttribute("class","shape-group"),a.innerHTML=`
            <path d="M${e+25} ${n+r-10}
                     a20 20 0 0 1 0 -40
                     a25 25 0 0 1 45 -10
                     a30 30 0 0 1 30 50
                     z" 
                  fill="${o}" stroke="${tt(o,20)}" stroke-width="2" class="shape-body"/>
            ${s?`<text x="${e+i/2}" y="${n+r/2+5}" text-anchor="middle" class="shape-label">${s}</text>`:""}
        `,a},server:(t={})=>{const{x:e=0,y:n=0,label:i=""}=t,r=document.createElementNS("http://www.w3.org/2000/svg","g");return r.setAttribute("class","shape-group icon-shape"),r.innerHTML=`
            <rect x="${e-30}" y="${n-40}" width="60" height="80" rx="6" fill="#374151" stroke="#6b7280" stroke-width="2"/>
            <circle cx="${e}" cy="${n-25}" r="4" fill="#10b981" class="indicator"/>
            <rect x="${e-20}" y="${n-10}" width="40" height="8" rx="2" fill="#4b5563"/>
            <rect x="${e-20}" y="${n+5}" width="40" height="8" rx="2" fill="#4b5563"/>
            <rect x="${e-20}" y="${n+20}" width="40" height="8" rx="2" fill="#4b5563"/>
            ${i?`<text x="${e}" y="${n+55}" text-anchor="middle" class="shape-sublabel">${i}</text>`:""}
        `,r},database:(t={})=>{const{x:e=0,y:n=0,color:i="#8b5cf6",label:r=""}=t,o=document.createElementNS("http://www.w3.org/2000/svg","g");return o.setAttribute("class","shape-group icon-shape"),o.innerHTML=`
            <ellipse cx="${e}" cy="${n-30}" rx="30" ry="12" fill="${tt(i,10)}"/>
            <rect x="${e-30}" y="${n-30}" width="60" height="50" fill="${i}"/>
            <ellipse cx="${e}" cy="${n+20}" rx="30" ry="12" fill="${oo(i,15)}"/>
            <ellipse cx="${e}" cy="${n-30}" rx="30" ry="12" fill="none" stroke="${tt(i,20)}" stroke-width="2"/>
            <ellipse cx="${e}" cy="${n-10}" rx="30" ry="12" fill="none" stroke="${tt(i,10)}" stroke-width="1" opacity="0.5"/>
            <ellipse cx="${e}" cy="${n+10}" rx="30" ry="12" fill="none" stroke="${tt(i,10)}" stroke-width="1" opacity="0.5"/>
            ${r?`<text x="${e}" y="${n+50}" text-anchor="middle" class="shape-sublabel">${r}</text>`:""}
        `,o},user:(t={})=>{const{x:e=0,y:n=0,color:i="#6366f1",label:r=""}=t,o=document.createElementNS("http://www.w3.org/2000/svg","g");return o.setAttribute("class","shape-group icon-shape"),o.innerHTML=`
            <circle cx="${e}" cy="${n-20}" r="18" fill="${i}"/>
            <path d="M${e-28} ${n+35} Q${e-28} ${n+5} ${e} ${n+5} Q${e+28} ${n+5} ${e+28} ${n+35}" fill="${i}"/>
            ${r?`<text x="${e}" y="${n+55}" text-anchor="middle" class="shape-sublabel">${r}</text>`:""}
        `,o},gear:(t={})=>{const{x:e=0,y:n=0,size:i=30,color:r="#f59e0b",label:o=""}=t,s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("class","shape-group icon-shape");const a=8;let l="";for(let c=0;c<a;c++){const u=c*360/a*Math.PI/180,f=(c+.5)*360/a*Math.PI/180,h=i,p=i*.75;c===0&&(l=`M${e+h*Math.cos(u)},${n+h*Math.sin(u)}`),l+=` L${e+h*Math.cos(f)},${n+h*Math.sin(f)}`,l+=` L${e+p*Math.cos(f)},${n+p*Math.sin(f)}`;const m=(c+1)*360/a*Math.PI/180;l+=` L${e+p*Math.cos(m)},${n+p*Math.sin(m)}`,l+=` L${e+h*Math.cos(m)},${n+h*Math.sin(m)}`}return l+=" Z",s.innerHTML=`
            <path d="${l}" fill="${r}" stroke="${tt(r,20)}" stroke-width="2"/>
            <circle cx="${e}" cy="${n}" r="${i*.35}" fill="#0a0e14"/>
            ${o?`<text x="${e}" y="${n+i+20}" text-anchor="middle" class="shape-sublabel">${o}</text>`:""}
        `,s},zone:(t={})=>{const{x:e=0,y:n=0,width:i=300,height:r=200,color:o="#6366f1",label:s="",opacity:a=.08}=t,l=document.createElementNS("http://www.w3.org/2000/svg","g");return l.setAttribute("class","zone-group"),l.innerHTML=`
            <rect x="${e}" y="${n}" width="${i}" height="${r}" rx="12" 
                  fill="${o}" fill-opacity="${a}" 
                  stroke="${o}" stroke-width="1" stroke-dasharray="4 2" stroke-opacity="0.4"/>
            ${s?`<text x="${e+12}" y="${n+20}" class="zone-label">${s}</text>`:""}
        `,l},annotation:(t={})=>{const{x:e=0,y:n=0,text:i="",width:r="auto"}=t,o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("class","annotation-group");const a=r==="auto"?i.length*8+12*2:r;return o.innerHTML=`
            <rect x="${e}" y="${n}" width="${a}" height="36" rx="8" 
                  fill="rgba(17, 24, 39, 0.9)" stroke="#6366f1" stroke-width="1"/>
            <text x="${e+a/2}" y="${n+23}" text-anchor="middle" class="annotation-text">${i}</text>
        `,o}},ro={arrow:(t={})=>{const{from:e,to:n,color:i="#6366f1",dashed:r=!1,animated:o=!1}=t,s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("class","connection-group");const a=r?'stroke-dasharray="8 4"':"",l=o?'class="animate-flow"':"";return s.innerHTML=`
            <line x1="${e.x}" y1="${e.y}" x2="${n.x}" y2="${n.y}" 
                  stroke="${i}" stroke-width="2" ${a} ${l}
                  marker-end="url(#arrow-marker)"/>
        `,s},curve:(t={})=>{const{from:e,to:n,color:i="#6366f1",curvature:r=50,dashed:o=!1}=t,s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("class","connection-group");const a=(e.x+n.x)/2,l=(e.y+n.y)/2-r,c=o?'stroke-dasharray="8 4"':"";return s.innerHTML=`
            <path d="M${e.x},${e.y} Q${a},${l} ${n.x},${n.y}" 
                  fill="none" stroke="${i}" stroke-width="2" ${c}
                  marker-end="url(#arrow-marker)"/>
        `,s},orthogonal:(t={})=>{const{from:e,to:n,color:i="#6366f1",dashed:r=!1}=t,o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("class","connection-group");const s=(e.x+n.x)/2,a=r?'stroke-dasharray="8 4"':"";return o.innerHTML=`
            <path d="M${e.x},${e.y} L${s},${e.y} L${s},${n.y} L${n.x},${n.y}" 
                  fill="none" stroke="${i}" stroke-width="2" ${a}
                  marker-end="url(#arrow-marker)"/>
        `,o}};class Ac{constructor(e){this.stage=document.getElementById(e),this.componentsLayer=this.stage.querySelector("#components-layer"),this.connectionsLayer=this.stage.querySelector("#connections-layer"),this.labelsLayer=this.stage.querySelector("#labels-layer"),this.effectsLayer=this.stage.querySelector("#effects-layer"),this.timeline=kn.timeline({paused:!0}),this.components=new Map,this.connections=new Map,this.labels=new Map,this.currentStep=0,this.steps=[],this.speed=1,this.isPlaying=!1,this.loopEnabled=!1,this.onStepChange=null,this.onComplete=null,this.onLoopRestart=null}clear(){this.componentsLayer.innerHTML="",this.connectionsLayer.innerHTML="",this.labelsLayer.innerHTML="",this.effectsLayer.innerHTML="",this.components.clear(),this.connections.clear(),this.labels.clear(),this.timeline.clear(),this.currentStep=0,this.steps=[]}addComponent(e,n,i){if(!Wn[n])return console.error(`Unknown shape type: ${n}`),null;const r=Wn[n](i);return r.setAttribute("id",e),r.setAttribute("data-type",n),r.style.opacity="0",this.componentsLayer.appendChild(r),this.components.set(e,{element:r,type:n,props:i}),r}addConnection(e,n,i){if(!ro[n])return console.error(`Unknown connection type: ${n}`),null;const r=ro[n](i);return r.setAttribute("id",e),r.style.opacity="0",this.connectionsLayer.appendChild(r),this.connections.set(e,{element:r,type:n,props:i}),r}addLabel(e,n){const i=Wn.annotation(n);return i.setAttribute("id",e),i.style.opacity="0",this.labelsLayer.appendChild(i),this.labels.set(e,{element:i,props:n}),i}addZone(e,n){const i=Wn.zone(n);return i.setAttribute("id",e),i.style.opacity="0",this.componentsLayer.insertBefore(i,this.componentsLayer.firstChild),this.components.set(e,{element:i,type:"zone",props:n}),i}buildTimeline(e){return this.steps=e,this.timeline.clear(),e.forEach((n,i)=>{const r=`step-${i}`;this.timeline.addLabel(r),this.timeline.call(()=>{this.currentStep=i,this.onStepChange&&this.onStepChange(i,n)},[],r),this.processStep(n,r),n.pause!==!1&&this.timeline.to({},{duration:n.pauseDuration||.5})}),this.timeline.call(()=>{this.loopEnabled?(this.resetAllElements(),this.currentStep=0,this.onLoopRestart&&this.onLoopRestart(),this.timeline.seek(0),this.timeline.play()):(this.isPlaying=!1,this.onComplete&&this.onComplete())}),this}resetAllElements(){this.components.forEach(({element:e})=>{e&&(e.style.opacity="0")}),this.connections.forEach(({element:e})=>{e&&(e.style.opacity="0")})}processStep(e,n){(Array.isArray(e.actions)?e.actions:[e]).forEach(r=>{var c;const o=typeof r.target=="string"?this.stage.querySelector(`#${r.target}`):r.target;if(!o&&r.type!=="wait"){console.warn(`Target not found: ${r.target}`);return}const s=r.duration||.5,a=r.ease||"power2.out",l=r.delay||0;switch(r.type){case"appear":case"fadeIn":this.timeline.to(o,{opacity:1,duration:s,ease:a,delay:l},r.position||x);break;case"fadeOut":this.timeline.to(o,{opacity:0,duration:s,ease:a,delay:l},r.position||x);break;case"moveTo":this.timeline.to(o,{x:r.x||0,y:r.y||0,duration:s,ease:a,delay:l},r.position||x);break;case"scale":this.timeline.to(o,{scale:r.scale||1,duration:s,ease:a,delay:l,transformOrigin:"center center"},r.position||x);break;case"pulse":this.timeline.to(o,{scale:1.15,duration:s/2,ease:"power2.out",delay:l},r.position||x).to(o,{scale:1,duration:s/2,ease:"power2.in"});break;case"highlight":const u=o.querySelector(".shape-body")||o;this.timeline.to(u,{filter:"drop-shadow(0 0 15px "+(r.color||"#6366f1")+")",duration:s,ease:a,delay:l},r.position||x);break;case"unhighlight":const f=o.querySelector(".shape-body")||o;this.timeline.to(f,{filter:"none",duration:s,ease:a,delay:l},r.position||x);break;case"drawLine":const h=o.querySelector("line, path");if(h){const w=h.getTotalLength?h.getTotalLength():100;kn.set(h,{strokeDasharray:w,strokeDashoffset:w}),this.timeline.to(o,{opacity:1,duration:.1},r.position||x),this.timeline.to(h,{strokeDashoffset:0,duration:s,ease:"none",delay:l},r.position||x)}break;case"wait":this.timeline.to({},{duration:r.duration||1},r.position||x);break;case"color":const p=o.querySelector(".shape-body")||o;this.timeline.to(p,{fill:r.color,duration:s,ease:a,delay:l},r.position||x);break;case"callout":const m=typeof r.target=="string"?this.stage.querySelector(`#${r.target}`):r.target;if(!m)return;const d=Array.isArray(r.offset)?r.offset:[0,-50];let g=0,v=0;const _=m.tagName==="g"?m.querySelector("line, path"):m;if((_==null?void 0:_.tagName)==="line"){const w=parseFloat(_.getAttribute("x1")),A=parseFloat(_.getAttribute("y1")),b=parseFloat(_.getAttribute("x2")),F=parseFloat(_.getAttribute("y2"));g=(w+b)/2,v=(A+F)/2}else if((_==null?void 0:_.tagName)==="path"&&_.getTotalLength){const w=_.getTotalLength(),A=_.getPointAtLength(w/2);g=A.x,v=A.y}else if(m.getBBox){const w=m.getBBox();g=w.x+w.width/2,v=w.y+w.height/2}const S=r.id||`callout-${r.target||"step"}`,E=this.labels.get(S);E&&((c=E.element)!=null&&c.parentNode)&&(E.element.parentNode.removeChild(E.element),this.labels.delete(S));const x=this.addLabel(S,{x:g+d[0],y:v+d[1],text:r.text||"",width:r.width||"auto"});this.timeline.to(x,{opacity:1,duration:s,ease:a,delay:l},r.position||x);break;case"rotate":this.timeline.to(o,{rotation:r.angle||360,transformOrigin:"center center",duration:s,ease:r.ease||"power1.inOut",delay:l},r.position||x);break;case"bounce":this.timeline.to(o,{y:r.distance||-20,duration:s/2,ease:"power2.out",delay:l,repeat:r.repeat||2,yoyo:!0},r.position||x);break;case"shake":this.timeline.to(o,{x:r.intensity||5,duration:.05,delay:l,repeat:r.repeat||8,yoyo:!0,ease:"none"},r.position||x);break;case"glow":const T=r.color||"#6366f1";this.timeline.to(o,{filter:`drop-shadow(0 0 ${r.size||10}px ${T})`,duration:s,ease:a,delay:l},r.position||x);break;case"unglow":this.timeline.to(o,{filter:"none",duration:s,ease:a,delay:l},r.position||x);break;case"blink":this.timeline.to(o,{opacity:.3,duration:s/2||.25,delay:l,repeat:r.repeat||4,yoyo:!0,ease:"none"},r.position||x);break;case"grow":this.timeline.to(o,{scale:r.scale||1.2,transformOrigin:"center center",duration:s,ease:a,delay:l},r.position||x);break;case"shrink":this.timeline.to(o,{scale:r.scale||.8,transformOrigin:"center center",duration:s,ease:a,delay:l},r.position||x);break}})}play(){this.isPlaying=!0,this.timeline.timeScale(this.speed),this.timeline.play()}pause(){this.isPlaying=!1,this.timeline.pause()}togglePlay(){return this.isPlaying?this.pause():this.play(),this.isPlaying}reset(){this.isPlaying=!1,this.timeline.pause(),this.timeline.seek(0),this.currentStep=0,this.onStepChange&&this.onStepChange(0,this.steps[0])}goToStep(e){e>=0&&e<this.steps.length&&(this.timeline.seek(`step-${e}`),this.currentStep=e,this.onStepChange&&this.onStepChange(e,this.steps[e]))}nextStep(){this.currentStep<this.steps.length-1&&this.goToStep(this.currentStep+1)}prevStep(){this.currentStep>0&&this.goToStep(this.currentStep-1)}setSpeed(e){this.speed=e,this.timeline.timeScale(e)}getProgress(){return{current:this.currentStep,total:this.steps.length,percent:this.steps.length>0?this.currentStep/(this.steps.length-1)*100:0}}setLoop(e){this.loopEnabled=e}toggleLoop(){return this.loopEnabled=!this.loopEnabled,this.loopEnabled}isLooping(){return this.loopEnabled}}function tt(t,e){const n=parseInt(t.replace("#",""),16),i=Math.round(2.55*e),r=Math.min(255,(n>>16)+i),o=Math.min(255,(n>>8&255)+i),s=Math.min(255,(n&255)+i);return`#${(16777216+r*65536+o*256+s).toString(16).slice(1)}`}function oo(t,e){const n=parseInt(t.replace("#",""),16),i=Math.round(2.55*e),r=Math.max(0,(n>>16)-i),o=Math.max(0,(n>>8&255)-i),s=Math.max(0,(n&255)-i);return`#${(16777216+r*65536+o*256+s).toString(16).slice(1)}`}/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */function Vs(t){return typeof t>"u"||t===null}function Cc(t){return typeof t=="object"&&t!==null}function Tc(t){return Array.isArray(t)?t:Vs(t)?[]:[t]}function Lc(t,e){var n,i,r,o;if(e)for(o=Object.keys(e),n=0,i=o.length;n<i;n+=1)r=o[n],t[r]=e[r];return t}function Mc(t,e){var n="",i;for(i=0;i<e;i+=1)n+=t;return n}function Ic(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var kc=Vs,Oc=Cc,Pc=Tc,$c=Mc,Fc=Ic,Rc=Lc,Ee={isNothing:kc,isObject:Oc,toArray:Pc,repeat:$c,isNegativeZero:Fc,extend:Rc};function js(t,e){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function On(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=js(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}On.prototype=Object.create(Error.prototype);On.prototype.constructor=On;On.prototype.toString=function(e){return this.name+": "+js(this,e)};var Fe=On;function ki(t,e,n,i,r){var o="",s="",a=Math.floor(r/2)-1;return i-e>a&&(o=" ... ",e=i-a+o.length),n-i>a&&(s=" ...",n=i+a-s.length),{str:o+t.slice(e,n).replace(/\t/g,"")+s,pos:i-e+o.length}}function Oi(t,e){return Ee.repeat(" ",e-t.length)+t}function Dc(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],o,s=-1;o=n.exec(t.buffer);)r.push(o.index),i.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var a="",l,c,u=Math.min(t.line+e.linesAfter,r.length).toString().length,f=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(s-l<0);l++)c=ki(t.buffer,i[s-l],r[s-l],t.position-(i[s]-i[s-l]),f),a=Ee.repeat(" ",e.indent)+Oi((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=ki(t.buffer,i[s],r[s],t.position,f),a+=Ee.repeat(" ",e.indent)+Oi((t.line+1).toString(),u)+" | "+c.str+`
`,a+=Ee.repeat("-",e.indent+u+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(s+l>=r.length);l++)c=ki(t.buffer,i[s+l],r[s+l],t.position-(i[s]-i[s+l]),f),a+=Ee.repeat(" ",e.indent)+Oi((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var zc=Dc,Nc=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Bc=["scalar","sequence","mapping"];function Yc(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){e[String(i)]=n})}),e}function Gc(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(Nc.indexOf(n)===-1)throw new Fe('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Yc(e.styleAliases||null),Bc.indexOf(this.kind)===-1)throw new Fe('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Le=Gc;function so(t,e){var n=[];return t[e].forEach(function(i){var r=n.length;n.forEach(function(o,s){o.tag===i.tag&&o.kind===i.kind&&o.multi===i.multi&&(r=s)}),n[r]=i}),n}function Hc(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function i(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(i);return t}function Ji(t){return this.extend(t)}Ji.prototype.extend=function(e){var n=[],i=[];if(e instanceof Le)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new Fe("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Le))throw new Fe("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Fe("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Fe("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(o){if(!(o instanceof Le))throw new Fe("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(Ji.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=so(r,"implicit"),r.compiledExplicit=so(r,"explicit"),r.compiledTypeMap=Hc(r.compiledImplicit,r.compiledExplicit),r};var Ks=Ji,Zs=new Le("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Qs=new Le("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Js=new Le("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),ea=new Ks({explicit:[Zs,Qs,Js]});function Uc(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Wc(){return null}function qc(t){return t===null}var ta=new Le("tag:yaml.org,2002:null",{kind:"scalar",resolve:Uc,construct:Wc,predicate:qc,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Xc(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Vc(t){return t==="true"||t==="True"||t==="TRUE"}function jc(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var na=new Le("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Xc,construct:Vc,predicate:jc,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Kc(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Zc(t){return 48<=t&&t<=55}function Qc(t){return 48<=t&&t<=57}function Jc(t){if(t===null)return!1;var e=t.length,n=0,i=!1,r;if(!e)return!1;if(r=t[n],(r==="-"||r==="+")&&(r=t[++n]),r==="0"){if(n+1===e)return!0;if(r=t[++n],r==="b"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!Kc(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!Zc(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<e;n++)if(r=t[n],r!=="_"){if(!Qc(t.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function eu(t){var e=t,n=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function tu(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ee.isNegativeZero(t)}var ia=new Le("tag:yaml.org,2002:int",{kind:"scalar",resolve:Jc,construct:eu,predicate:tu,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),nu=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function iu(t){return!(t===null||!nu.test(t)||t[t.length-1]==="_")}function ru(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var ou=/^[-+]?[0-9]+e/;function su(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ee.isNegativeZero(t))return"-0.0";return n=t.toString(10),ou.test(n)?n.replace("e",".e"):n}function au(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ee.isNegativeZero(t))}var ra=new Le("tag:yaml.org,2002:float",{kind:"scalar",resolve:iu,construct:ru,predicate:au,represent:su,defaultStyle:"lowercase"}),oa=ea.extend({implicit:[ta,na,ia,ra]}),sa=oa,aa=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),la=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lu(t){return t===null?!1:aa.exec(t)!==null||la.exec(t)!==null}function cu(t){var e,n,i,r,o,s,a,l=0,c=null,u,f,h;if(e=aa.exec(t),e===null&&(e=la.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],i=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(n,i,r));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],f=+(e[11]||0),c=(u*60+f)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,i,r,o,s,a,l)),c&&h.setTime(h.getTime()-c),h}function uu(t){return t.toISOString()}var ca=new Le("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lu,construct:cu,instanceOf:Date,represent:uu});function fu(t){return t==="<<"||t===null}var ua=new Le("tag:yaml.org,2002:merge",{kind:"scalar",resolve:fu}),Tr=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function du(t){if(t===null)return!1;var e,n,i=0,r=t.length,o=Tr;for(n=0;n<r;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function hu(t){var e,n,i=t.replace(/[\r\n=]/g,""),r=i.length,o=Tr,s=0,a=[];for(e=0;e<r;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(i.charAt(e));return n=r%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function pu(t){var e="",n=0,i,r,o=t.length,s=Tr;for(i=0;i<o;i++)i%3===0&&i&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[i];return r=o%3,r===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):r===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):r===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}function mu(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var fa=new Le("tag:yaml.org,2002:binary",{kind:"scalar",resolve:du,construct:hu,predicate:mu,represent:pu}),gu=Object.prototype.hasOwnProperty,yu=Object.prototype.toString;function _u(t){if(t===null)return!0;var e=[],n,i,r,o,s,a=t;for(n=0,i=a.length;n<i;n+=1){if(r=a[n],s=!1,yu.call(r)!=="[object Object]")return!1;for(o in r)if(gu.call(r,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function xu(t){return t!==null?t:[]}var da=new Le("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_u,construct:xu}),vu=Object.prototype.toString;function bu(t){if(t===null)return!0;var e,n,i,r,o,s=t;for(o=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(i=s[e],vu.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;o[e]=[r[0],i[r[0]]]}return!0}function wu(t){if(t===null)return[];var e,n,i,r,o,s=t;for(o=new Array(s.length),e=0,n=s.length;e<n;e+=1)i=s[e],r=Object.keys(i),o[e]=[r[0],i[r[0]]];return o}var ha=new Le("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:bu,construct:wu}),Eu=Object.prototype.hasOwnProperty;function Su(t){if(t===null)return!0;var e,n=t;for(e in n)if(Eu.call(n,e)&&n[e]!==null)return!1;return!0}function Au(t){return t!==null?t:{}}var pa=new Le("tag:yaml.org,2002:set",{kind:"mapping",resolve:Su,construct:Au}),Lr=sa.extend({implicit:[ca,ua],explicit:[fa,da,ha,pa]}),Pt=Object.prototype.hasOwnProperty,ci=1,ma=2,ga=3,ui=4,Pi=1,Cu=2,ao=3,Tu=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Lu=/[\x85\u2028\u2029]/,Mu=/[,\[\]\{\}]/,ya=/^(?:!|!!|![a-z\-]+!)$/i,_a=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function lo(t){return Object.prototype.toString.call(t)}function dt(t){return t===10||t===13}function Wt(t){return t===9||t===32}function ze(t){return t===9||t===32||t===10||t===13}function tn(t){return t===44||t===91||t===93||t===123||t===125}function Iu(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function ku(t){return t===120?2:t===117?4:t===85?8:0}function Ou(t){return 48<=t&&t<=57?t-48:-1}function co(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function Pu(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function xa(t,e,n){e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}var va=new Array(256),ba=new Array(256);for(var Kt=0;Kt<256;Kt++)va[Kt]=co(Kt)?1:0,ba[Kt]=co(Kt);function $u(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Lr,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wa(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=zc(n),new Fe(e,n)}function k(t,e){throw wa(t,e)}function fi(t,e){t.onWarning&&t.onWarning.call(null,wa(t,e))}var uo={YAML:function(e,n,i){var r,o,s;e.version!==null&&k(e,"duplication of %YAML directive"),i.length!==1&&k(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&k(e,"ill-formed argument of the YAML directive"),o=parseInt(r[1],10),s=parseInt(r[2],10),o!==1&&k(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&fi(e,"unsupported YAML version of the document")},TAG:function(e,n,i){var r,o;i.length!==2&&k(e,"TAG directive accepts exactly two arguments"),r=i[0],o=i[1],ya.test(r)||k(e,"ill-formed tag handle (first argument) of the TAG directive"),Pt.call(e.tagMap,r)&&k(e,'there is a previously declared suffix for "'+r+'" tag handle'),_a.test(o)||k(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{k(e,"tag prefix is malformed: "+o)}e.tagMap[r]=o}};function Mt(t,e,n,i){var r,o,s,a;if(e<n){if(a=t.input.slice(e,n),i)for(r=0,o=a.length;r<o;r+=1)s=a.charCodeAt(r),s===9||32<=s&&s<=1114111||k(t,"expected valid JSON character");else Tu.test(a)&&k(t,"the stream contains non-printable characters");t.result+=a}}function fo(t,e,n,i){var r,o,s,a;for(Ee.isObject(n)||k(t,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),s=0,a=r.length;s<a;s+=1)o=r[s],Pt.call(e,o)||(xa(e,o,n[o]),i[o]=!0)}function nn(t,e,n,i,r,o,s,a,l){var c,u;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),c=0,u=r.length;c<u;c+=1)Array.isArray(r[c])&&k(t,"nested arrays are not supported inside keys"),typeof r=="object"&&lo(r[c])==="[object Object]"&&(r[c]="[object Object]");if(typeof r=="object"&&lo(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)fo(t,e,o[c],n);else fo(t,e,o,n);else!t.json&&!Pt.call(n,r)&&Pt.call(e,r)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,k(t,"duplicated mapping key")),xa(e,r,o),delete n[r];return e}function Mr(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):k(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function be(t,e,n){for(var i=0,r=t.input.charCodeAt(t.position);r!==0;){for(;Wt(r);)r===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(e&&r===35)do r=t.input.charCodeAt(++t.position);while(r!==10&&r!==13&&r!==0);if(dt(r))for(Mr(t),r=t.input.charCodeAt(t.position),i++,t.lineIndent=0;r===32;)t.lineIndent++,r=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&fi(t,"deficient indentation"),i}function _i(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||ze(n)))}function Ir(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ee.repeat(`
`,e-1))}function Fu(t,e,n){var i,r,o,s,a,l,c,u,f=t.kind,h=t.result,p;if(p=t.input.charCodeAt(t.position),ze(p)||tn(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(r=t.input.charCodeAt(t.position+1),ze(r)||n&&tn(r)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(r=t.input.charCodeAt(t.position+1),ze(r)||n&&tn(r))break}else if(p===35){if(i=t.input.charCodeAt(t.position-1),ze(i))break}else{if(t.position===t.lineStart&&_i(t)||n&&tn(p))break;if(dt(p))if(l=t.line,c=t.lineStart,u=t.lineIndent,be(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(Mt(t,o,s,!1),Ir(t,t.line-l),o=s=t.position,a=!1),Wt(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return Mt(t,o,s,!1),t.result?!0:(t.kind=f,t.result=h,!1)}function Ru(t,e){var n,i,r;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Mt(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,r=t.position;else return!0;else dt(n)?(Mt(t,i,r,!0),Ir(t,be(t,!1,e)),i=r=t.position):t.position===t.lineStart&&_i(t)?k(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);k(t,"unexpected end of the stream within a single quoted scalar")}function Du(t,e){var n,i,r,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Mt(t,n,t.position,!0),t.position++,!0;if(a===92){if(Mt(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),dt(a))be(t,!1,e);else if(a<256&&va[a])t.result+=ba[a],t.position++;else if((s=ku(a))>0){for(r=s,o=0;r>0;r--)a=t.input.charCodeAt(++t.position),(s=Iu(a))>=0?o=(o<<4)+s:k(t,"expected hexadecimal character");t.result+=Pu(o),t.position++}else k(t,"unknown escape sequence");n=i=t.position}else dt(a)?(Mt(t,n,i,!0),Ir(t,be(t,!1,e)),n=i=t.position):t.position===t.lineStart&&_i(t)?k(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}k(t,"unexpected end of the stream within a double quoted scalar")}function zu(t,e){var n=!0,i,r,o,s=t.tag,a,l=t.anchor,c,u,f,h,p,m=Object.create(null),d,g,v,_;if(_=t.input.charCodeAt(t.position),_===91)u=93,p=!1,a=[];else if(_===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),_=t.input.charCodeAt(++t.position);_!==0;){if(be(t,!0,e),_=t.input.charCodeAt(t.position),_===u)return t.position++,t.tag=s,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=a,!0;n?_===44&&k(t,"expected the node content, but found ','"):k(t,"missed comma between flow collection entries"),g=d=v=null,f=h=!1,_===63&&(c=t.input.charCodeAt(t.position+1),ze(c)&&(f=h=!0,t.position++,be(t,!0,e))),i=t.line,r=t.lineStart,o=t.position,pn(t,e,ci,!1,!0),g=t.tag,d=t.result,be(t,!0,e),_=t.input.charCodeAt(t.position),(h||t.line===i)&&_===58&&(f=!0,_=t.input.charCodeAt(++t.position),be(t,!0,e),pn(t,e,ci,!1,!0),v=t.result),p?nn(t,a,m,g,d,v,i,r,o):f?a.push(nn(t,null,m,g,d,v,i,r,o)):a.push(d),be(t,!0,e),_=t.input.charCodeAt(t.position),_===44?(n=!0,_=t.input.charCodeAt(++t.position)):n=!1}k(t,"unexpected end of the stream within a flow collection")}function Nu(t,e){var n,i,r=Pi,o=!1,s=!1,a=e,l=0,c=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)i=!1;else if(f===62)i=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Pi===r?r=f===43?ao:Cu:k(t,"repeat of a chomping mode identifier");else if((u=Ou(f))>=0)u===0?k(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?k(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Wt(f)){do f=t.input.charCodeAt(++t.position);while(Wt(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!dt(f)&&f!==0)}for(;f!==0;){for(Mr(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),dt(f)){l++;continue}if(t.lineIndent<a){r===ao?t.result+=Ee.repeat(`
`,o?1+l:l):r===Pi&&o&&(t.result+=`
`);break}for(i?Wt(f)?(c=!0,t.result+=Ee.repeat(`
`,o?1+l:l)):c?(c=!1,t.result+=Ee.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=Ee.repeat(`
`,l):t.result+=Ee.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,n=t.position;!dt(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Mt(t,n,t.position,!1)}return!0}function ho(t,e){var n,i=t.tag,r=t.anchor,o=[],s,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,k(t,"tab characters must not be used in indentation")),!(l!==45||(s=t.input.charCodeAt(t.position+1),!ze(s))));){if(a=!0,t.position++,be(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(n=t.line,pn(t,e,ga,!1,!0),o.push(t.result),be(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&l!==0)k(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=i,t.anchor=r,t.kind="sequence",t.result=o,!0):!1}function Bu(t,e,n){var i,r,o,s,a,l,c=t.tag,u=t.anchor,f={},h=Object.create(null),p=null,m=null,d=null,g=!1,v=!1,_;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),_=t.input.charCodeAt(t.position);_!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,k(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),o=t.line,(_===63||_===58)&&ze(i))_===63?(g&&(nn(t,f,h,p,m,null,s,a,l),p=m=d=null),v=!0,g=!0,r=!0):g?(g=!1,r=!0):k(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,_=i;else{if(s=t.line,a=t.lineStart,l=t.position,!pn(t,n,ma,!1,!0))break;if(t.line===o){for(_=t.input.charCodeAt(t.position);Wt(_);)_=t.input.charCodeAt(++t.position);if(_===58)_=t.input.charCodeAt(++t.position),ze(_)||k(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(nn(t,f,h,p,m,null,s,a,l),p=m=d=null),v=!0,g=!1,r=!1,p=t.tag,m=t.result;else if(v)k(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(v)k(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,l=t.position),pn(t,e,ui,!0,r)&&(g?m=t.result:d=t.result),g||(nn(t,f,h,p,m,d,s,a,l),p=m=d=null),be(t,!0,-1),_=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&_!==0)k(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&nn(t,f,h,p,m,null,s,a,l),v&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=f),v}function Yu(t){var e,n=!1,i=!1,r,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&k(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(i=!0,r="!!",s=t.input.charCodeAt(++t.position)):r="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):k(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!ze(s);)s===33&&(i?k(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),ya.test(r)||k(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),Mu.test(o)&&k(t,"tag suffix cannot contain flow indicator characters")}o&&!_a.test(o)&&k(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{k(t,"tag name is malformed: "+o)}return n?t.tag=o:Pt.call(t.tagMap,r)?t.tag=t.tagMap[r]+o:r==="!"?t.tag="!"+o:r==="!!"?t.tag="tag:yaml.org,2002:"+o:k(t,'undeclared tag handle "'+r+'"'),!0}function Gu(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&k(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!ze(n)&&!tn(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&k(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Hu(t){var e,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!ze(i)&&!tn(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&k(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Pt.call(t.anchorMap,n)||k(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],be(t,!0,-1),!0}function pn(t,e,n,i,r){var o,s,a,l=1,c=!1,u=!1,f,h,p,m,d,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=ui===n||ga===n,i&&be(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Yu(t)||Gu(t);)be(t,!0,-1)?(c=!0,a=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||r),(l===1||ui===n)&&(ci===n||ma===n?d=e:d=e+1,g=t.position-t.lineStart,l===1?a&&(ho(t,g)||Bu(t,g,d))||zu(t,d)?u=!0:(s&&Nu(t,d)||Ru(t,d)||Du(t,d)?u=!0:Hu(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&k(t,"alias node should not have any properties")):Fu(t,d,ci===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&ho(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&k(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,h=t.implicitTypes.length;f<h;f+=1)if(m=t.implicitTypes[f],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Pt.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,h=p.length;f<h;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){m=p[f];break}m||k(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&k(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):k(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Uu(t){var e=t.position,n,i,r,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(be(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!ze(s);)s=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),r=[],i.length<1&&k(t,"directive name must not be less than one character in length");s!==0;){for(;Wt(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!dt(s));break}if(dt(s))break;for(n=t.position;s!==0&&!ze(s);)s=t.input.charCodeAt(++t.position);r.push(t.input.slice(n,t.position))}s!==0&&Mr(t),Pt.call(uo,i)?uo[i](t,i,r):fi(t,'unknown document directive "'+i+'"')}if(be(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,be(t,!0,-1)):o&&k(t,"directives end mark is expected"),pn(t,t.lineIndent-1,ui,!1,!0),be(t,!0,-1),t.checkLineBreaks&&Lu.test(t.input.slice(e,t.position))&&fi(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&_i(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,be(t,!0,-1));return}if(t.position<t.length-1)k(t,"end of the stream or a document separator is expected");else return}function Ea(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new $u(t,e),i=t.indexOf("\0");for(i!==-1&&(n.position=i,k(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Uu(n);return n.documents}function Wu(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var i=Ea(t,n);if(typeof e!="function")return i;for(var r=0,o=i.length;r<o;r+=1)e(i[r])}function qu(t,e){var n=Ea(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Fe("expected a single document in the stream, but found more")}}var Xu=Wu,Vu=qu,Sa={loadAll:Xu,load:Vu},Aa=Object.prototype.toString,Ca=Object.prototype.hasOwnProperty,kr=65279,ju=9,Pn=10,Ku=13,Zu=32,Qu=33,Ju=34,er=35,ef=37,tf=38,nf=39,rf=42,Ta=44,of=45,di=58,sf=61,af=62,lf=63,cf=64,La=91,Ma=93,uf=96,Ia=123,ff=124,ka=125,$e={};$e[0]="\\0";$e[7]="\\a";$e[8]="\\b";$e[9]="\\t";$e[10]="\\n";$e[11]="\\v";$e[12]="\\f";$e[13]="\\r";$e[27]="\\e";$e[34]='\\"';$e[92]="\\\\";$e[133]="\\N";$e[160]="\\_";$e[8232]="\\L";$e[8233]="\\P";var df=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],hf=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function pf(t,e){var n,i,r,o,s,a,l;if(e===null)return{};for(n={},i=Object.keys(e),r=0,o=i.length;r<o;r+=1)s=i[r],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=t.compiledTypeMap.fallback[s],l&&Ca.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function mf(t){var e,n,i;if(e=t.toString(16).toUpperCase(),t<=255)n="x",i=2;else if(t<=65535)n="u",i=4;else if(t<=4294967295)n="U",i=8;else throw new Fe("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ee.repeat("0",i-e.length)+e}var gf=1,$n=2;function yf(t){this.schema=t.schema||Lr,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ee.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=pf(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?$n:gf,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function po(t,e){for(var n=Ee.repeat(" ",e),i=0,r=-1,o="",s,a=t.length;i<a;)r=t.indexOf(`
`,i),r===-1?(s=t.slice(i),i=a):(s=t.slice(i,r+1),i=r+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}function tr(t,e){return`
`+Ee.repeat(" ",t.indent*e)}function _f(t,e){var n,i,r;for(n=0,i=t.implicitTypes.length;n<i;n+=1)if(r=t.implicitTypes[n],r.resolve(e))return!0;return!1}function hi(t){return t===Zu||t===ju}function Fn(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==kr||65536<=t&&t<=1114111}function mo(t){return Fn(t)&&t!==kr&&t!==Ku&&t!==Pn}function go(t,e,n){var i=mo(t),r=i&&!hi(t);return(n?i:i&&t!==Ta&&t!==La&&t!==Ma&&t!==Ia&&t!==ka)&&t!==er&&!(e===di&&!r)||mo(e)&&!hi(e)&&t===er||e===di&&r}function xf(t){return Fn(t)&&t!==kr&&!hi(t)&&t!==of&&t!==lf&&t!==di&&t!==Ta&&t!==La&&t!==Ma&&t!==Ia&&t!==ka&&t!==er&&t!==tf&&t!==rf&&t!==Qu&&t!==ff&&t!==sf&&t!==af&&t!==nf&&t!==Ju&&t!==ef&&t!==cf&&t!==uf}function vf(t){return!hi(t)&&t!==di}function _n(t,e){var n=t.charCodeAt(e),i;return n>=55296&&n<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function Oa(t){var e=/^\n* /;return e.test(t)}var Pa=1,nr=2,$a=3,Fa=4,Qt=5;function bf(t,e,n,i,r,o,s,a){var l,c=0,u=null,f=!1,h=!1,p=i!==-1,m=-1,d=xf(_n(t,0))&&vf(_n(t,t.length-1));if(e||s)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=_n(t,l),!Fn(c))return Qt;d=d&&go(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=_n(t,l),c===Pn)f=!0,p&&(h=h||l-m-1>i&&t[m+1]!==" ",m=l);else if(!Fn(c))return Qt;d=d&&go(c,u,a),u=c}h=h||p&&l-m-1>i&&t[m+1]!==" "}return!f&&!h?d&&!s&&!r(t)?Pa:o===$n?Qt:nr:n>9&&Oa(t)?Qt:s?o===$n?Qt:nr:h?Fa:$a}function wf(t,e,n,i,r){t.dump=function(){if(e.length===0)return t.quotingType===$n?'""':"''";if(!t.noCompatMode&&(df.indexOf(e)!==-1||hf.test(e)))return t.quotingType===$n?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=i||t.flowLevel>-1&&n>=t.flowLevel;function l(c){return _f(t,c)}switch(bf(e,a,t.indent,s,l,t.quotingType,t.forceQuotes&&!i,r)){case Pa:return e;case nr:return"'"+e.replace(/'/g,"''")+"'";case $a:return"|"+yo(e,t.indent)+_o(po(e,o));case Fa:return">"+yo(e,t.indent)+_o(po(Ef(e,s),o));case Qt:return'"'+Sf(e)+'"';default:throw new Fe("impossible error: invalid scalar style")}}()}function yo(t,e){var n=Oa(t)?String(e):"",i=t[t.length-1]===`
`,r=i&&(t[t.length-2]===`
`||t===`
`),o=r?"+":i?"":"-";return n+o+`
`}function _o(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Ef(t,e){for(var n=/(\n+)([^\n]*)/g,i=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,n.lastIndex=c,xo(t.slice(0,c),e)}(),r=t[0]===`
`||t[0]===" ",o,s;s=n.exec(t);){var a=s[1],l=s[2];o=l[0]===" ",i+=a+(!r&&!o&&l!==""?`
`:"")+xo(l,e),r=o}return i}function xo(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,i,r=0,o,s=0,a=0,l="";i=n.exec(t);)a=i.index,a-r>e&&(o=s>r?s:a,l+=`
`+t.slice(r,o),r=o+1),s=a;return l+=`
`,t.length-r>e&&s>r?l+=t.slice(r,s)+`
`+t.slice(s+1):l+=t.slice(r),l.slice(1)}function Sf(t){for(var e="",n=0,i,r=0;r<t.length;n>=65536?r+=2:r++)n=_n(t,r),i=$e[n],!i&&Fn(n)?(e+=t[r],n>=65536&&(e+=t[r+1])):e+=i||mf(n);return e}function Af(t,e,n){var i="",r=t.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],t.replacer&&(a=t.replacer.call(n,String(o),a)),(vt(t,e,a,!1,!1)||typeof a>"u"&&vt(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=r,t.dump="["+i+"]"}function vo(t,e,n,i){var r="",o=t.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],t.replacer&&(l=t.replacer.call(n,String(s),l)),(vt(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&vt(t,e+1,null,!0,!0,!1,!0))&&((!i||r!=="")&&(r+=tr(t,e)),t.dump&&Pn===t.dump.charCodeAt(0)?r+="-":r+="- ",r+=t.dump);t.tag=o,t.dump=r||"[]"}function Cf(t,e,n){var i="",r=t.tag,o=Object.keys(n),s,a,l,c,u;for(s=0,a=o.length;s<a;s+=1)u="",i!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=o[s],c=n[l],t.replacer&&(c=t.replacer.call(n,l,c)),vt(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),vt(t,e,c,!1,!1)&&(u+=t.dump,i+=u));t.tag=r,t.dump="{"+i+"}"}function Tf(t,e,n,i){var r="",o=t.tag,s=Object.keys(n),a,l,c,u,f,h;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Fe("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)h="",(!i||r!=="")&&(h+=tr(t,e)),c=s[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),vt(t,e+1,c,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Pn===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,f&&(h+=tr(t,e)),vt(t,e+1,u,!0,f)&&(t.dump&&Pn===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,r+=h));t.tag=o,t.dump=r||"{}"}function bo(t,e,n){var i,r,o,s,a,l;for(r=n?t.explicitTypes:t.implicitTypes,o=0,s=r.length;o<s;o+=1)if(a=r[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,Aa.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(Ca.call(a.represent,l))i=a.represent[l](e,l);else throw new Fe("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=i}return!0}return!1}function vt(t,e,n,i,r,o,s){t.tag=null,t.dump=n,bo(t,n,!1)||bo(t,n,!0);var a=Aa.call(t.dump),l=i,c;i&&(i=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,h;if(u&&(f=t.duplicates.indexOf(n),h=f!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(r=!1),h&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&h&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")i&&Object.keys(t.dump).length!==0?(Tf(t,e,t.dump,r),h&&(t.dump="&ref_"+f+t.dump)):(Cf(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?vo(t,e-1,t.dump,r):vo(t,e,t.dump,r),h&&(t.dump="&ref_"+f+t.dump)):(Af(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&wf(t,t.dump,e,o,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Fe("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function Lf(t,e){var n=[],i=[],r,o;for(ir(t,n,i),r=0,o=i.length;r<o;r+=1)e.duplicates.push(n[i[r]]);e.usedDuplicates=new Array(o)}function ir(t,e,n){var i,r,o;if(t!==null&&typeof t=="object")if(r=e.indexOf(t),r!==-1)n.indexOf(r)===-1&&n.push(r);else if(e.push(t),Array.isArray(t))for(r=0,o=t.length;r<o;r+=1)ir(t[r],e,n);else for(i=Object.keys(t),r=0,o=i.length;r<o;r+=1)ir(t[i[r]],e,n)}function Mf(t,e){e=e||{};var n=new yf(e);n.noRefs||Lf(t,n);var i=t;return n.replacer&&(i=n.replacer.call({"":i},"",i)),vt(n,0,i,!0,!0)?n.dump+`
`:""}var If=Mf,kf={dump:If};function Or(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Of=Le,Pf=Ks,$f=ea,Ff=oa,Rf=sa,Df=Lr,zf=Sa.load,Nf=Sa.loadAll,Bf=kf.dump,Yf=Fe,Gf={binary:fa,float:ra,map:Js,null:ta,pairs:ha,set:pa,timestamp:ca,bool:na,int:ia,merge:ua,omap:da,seq:Qs,str:Zs},Hf=Or("safeLoad","load"),Uf=Or("safeLoadAll","loadAll"),Wf=Or("safeDump","dump"),pi={Type:Of,Schema:Pf,FAILSAFE_SCHEMA:$f,JSON_SCHEMA:Ff,CORE_SCHEMA:Rf,DEFAULT_SCHEMA:Df,load:zf,loadAll:Nf,dump:Bf,YAMLException:Yf,types:Gf,safeLoad:Hf,safeLoadAll:Uf,safeDump:Wf};const De=Object.freeze({DEBUG:0,INFO:1,WARN:2,ERROR:3,SILENT:4}),qf={level:De.DEBUG,enableTimestamp:!0,enableContext:!0,enableColors:!0,maxHistorySize:1e3,prefix:"[FlowEngine]"},wo={[De.DEBUG]:"color: #9ca3af; font-weight: normal;",[De.INFO]:"color: #3b82f6; font-weight: normal;",[De.WARN]:"color: #f59e0b; font-weight: bold;",[De.ERROR]:"color: #ef4444; font-weight: bold;"},Eo={[De.DEBUG]:"DEBUG",[De.INFO]:"INFO",[De.WARN]:"WARN",[De.ERROR]:"ERROR"};class Pr{constructor(e="App"){this.context=e,this.config={...qf},this.history=[],this.timers=new Map}configure(e){return this.config={...this.config,...e},this}setLevel(e){return this.config.level=e,this}createChild(e){const n=new Pr(e);return n.config={...this.config},n.history=this.history,n}_formatTimestamp(){return new Date().toISOString().replace("T"," ").substring(0,23)}_formatMessage(e,n,i){const r=[];return this.config.enableTimestamp&&r.push(`[${this._formatTimestamp()}]`),r.push(this.config.prefix),r.push(`[${Eo[e]}]`),this.config.enableContext&&r.push(`[${this.context}]`),r.push(n),r.join(" ")}_log(e,n,i=null){if(e<this.config.level)return;const r=this._formatMessage(e,n,i),o={timestamp:Date.now(),level:e,levelName:Eo[e],context:this.context,message:n,data:i,formattedMessage:r};if(this.history.push(o),this.history.length>this.config.maxHistorySize&&this.history.shift(),this.config.enableColors){const s=wo[e];i?console.log(`%c${r}`,s,i):console.log(`%c${r}`,s)}else i?console.log(r,i):console.log(r);return o}debug(e,n){return this._log(De.DEBUG,e,n)}info(e,n){return this._log(De.INFO,e,n)}warn(e,n){return this._log(De.WARN,e,n)}error(e,n){return this._log(De.ERROR,e,n)}time(e){this.timers.set(e,performance.now()),this.debug(`Timer started: ${e}`)}timeEnd(e){const n=this.timers.get(e);if(!n)return this.warn(`Timer not found: ${e}`),0;const i=performance.now()-n;return this.timers.delete(e),this.info(`Timer ${e}: ${i.toFixed(2)}ms`),i}group(e,n){console.group(`%c${this.config.prefix} ${e}`,wo[De.INFO]),n(),console.groupEnd()}table(e,n){n&&this.info(n),console.table(e)}getHistory(e){return e?this.history.slice(-e):[...this.history]}clearHistory(){this.history=[],this.info("Log history cleared")}exportHistory(){return JSON.stringify(this.history,null,2)}}const Xf=new Pr("Main");function Xt(t){return Xf.createChild(t)}const qn=Xt("SchemaValidator");class Ra{constructor(){this.valid=!0,this.errors=[],this.warnings=[]}addError(e,n,i=void 0){return this.valid=!1,this.errors.push({path:e,message:n,value:i,type:"error"}),this}addWarning(e,n,i=void 0){return this.warnings.push({path:e,message:n,value:i,type:"warning"}),this}merge(e){return e.valid||(this.valid=!1),this.errors.push(...e.errors),this.warnings.push(...e.warnings),this}toSummary(){return{valid:this.valid,errorCount:this.errors.length,warningCount:this.warnings.length,errors:this.errors,warnings:this.warnings}}}const So=["rectangle","circle","diamond","hexagon","cylinder","cloud","server","database","user","gear","container","arrow-right"],Ao=["arrow","curve","orthogonal","line"],$i=["fadeIn","fadeOut","appear","moveTo","scale","pulse","highlight","unhighlight","drawLine","wait","color","rotate","bounce","shake","glow","unglow","blink","grow","shrink","callout"],Xn=["pipeline","hub","tiered","fanout","swimlane"],Co=["LR","TB"],To=["zone","flow","type"];function Rn(t,e,n){return Array.isArray(t)?t.length!==2?(n.addError(e,"Position must have exactly 2 values [x, y]",t),!1):typeof t[0]!="number"||typeof t[1]!="number"?(n.addError(e,"Position values must be numbers",t),!1):!0:typeof t=="object"&&t.x!==void 0&&t.y!==void 0?!0:(n.addError(e,"Position must be an array [x, y] or object {x, y}",t),!1)}function $r(t,e,n){return typeof t=="number"||Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"?!0:(n.addError(e,"Size must be a number or array [width, height]",t),!1)}function xi(t,e,n){return typeof t!="string"?(n.addError(e,"Color must be a string",t),!1):(t.match(/^#[0-9A-Fa-f]{3,8}$/)||n.addWarning(e,"Color should be a valid hex color (e.g., #6366f1)",t),!0)}function Vf(t,e,n,i=!1){const r=`components[${e}]`;t.id?typeof t.id!="string"&&n.addError(`${r}.id`,"Component id must be a string",t.id):n.addError(`${r}.id`,"Component must have an id"),t.type?So.includes(t.type)||n.addError(`${r}.type`,`Invalid component type. Valid types: ${So.join(", ")}`,t.type):n.addError(`${r}.type`,"Component must have a type"),t.position?Rn(t.position,`${r}.position`,n):i||n.addError(`${r}.position`,'Component must have a position (or enable layout.mode: "auto")'),t.color&&xi(t.color,`${r}.color`,n),t.size&&$r(t.size,`${r}.size`,n)}function jf(t,e,n){const i=`zones[${e}]`;t.id||n.addError(`${i}.id`,"Zone must have an id"),t.position?Rn(t.position,`${i}.position`,n):n.addError(`${i}.position`,"Zone must have a position"),t.size?$r(t.size,`${i}.size`,n):n.addError(`${i}.size`,"Zone must have a size [width, height]"),t.color&&xi(t.color,`${i}.color`,n)}function Kf(t,e){!t||typeof t!="object"||(t.mode&&t.mode!=="auto"&&e.addWarning("layout.mode",'layout.mode should be "auto" to enable auto-layout',t.mode),t.profile&&!Xn.includes(t.profile)&&e.addWarning("layout.profile",`Invalid layout profile. Valid profiles: ${Xn.join(", ")}`,t.profile),t.template&&!Xn.includes(t.template)&&e.addWarning("layout.template",`Invalid layout template. Valid templates: ${Xn.join(", ")}`,t.template),t.direction&&!Co.includes(t.direction)&&e.addWarning("layout.direction",`Invalid layout direction. Valid directions: ${Co.join(", ")}`,t.direction),t.hints&&(t.hints.primaryPath&&!Array.isArray(t.hints.primaryPath)&&e.addWarning("layout.hints.primaryPath","primaryPath should be an array of component ids"),t.hints.grouping&&!To.includes(t.hints.grouping)&&e.addWarning("layout.hints.grouping",`Invalid grouping. Valid options: ${To.join(", ")}`,t.hints.grouping),t.hints.compact!==void 0&&typeof t.hints.compact!="boolean"&&e.addWarning("layout.hints.compact","compact should be a boolean")))}function Zf(t,e,n,i){const r=`connections[${e}]`;t.id||i.addError(`${r}.id`,"Connection must have an id"),t.from?typeof t.from=="string"?n.has(t.from)||i.addError(`${r}.from`,`Referenced component "${t.from}" does not exist`,t.from):typeof t.from=="object"&&Rn(t.from,`${r}.from`,i):i.addError(`${r}.from`,'Connection must have a "from" property'),t.to?typeof t.to=="string"?n.has(t.to)||i.addError(`${r}.to`,`Referenced component "${t.to}" does not exist`,t.to):typeof t.to=="object"&&Rn(t.to,`${r}.to`,i):i.addError(`${r}.to`,'Connection must have a "to" property'),t.type&&!Ao.includes(t.type)&&i.addError(`${r}.type`,`Invalid connection type. Valid types: ${Ao.join(", ")}`,t.type),t.color&&xi(t.color,`${r}.color`,i)}function Qf(t,e,n,i,r){const o=`steps[${e}].animate[${n}]`,a=Object.keys(t).find(l=>$i.includes(l));if(a){const l=t[a];typeof l=="string"?i.has(l)||r.addWarning(`${o}.${a}`,`Target "${l}" not found in components, zones, or connections`,l):Array.isArray(l)&&l.forEach((c,u)=>{i.has(c)||r.addWarning(`${o}.${a}[${u}]`,`Target "${c}" not found`,c)})}else t.type&&($i.includes(t.type)||r.addError(`${o}.type`,`Invalid animation type. Valid types: ${$i.join(", ")}`,t.type),t.target&&typeof t.target=="string"&&(i.has(t.target)||r.addWarning(`${o}.target`,`Target "${t.target}" not found`,t.target)))}function Jf(t,e,n,i){const r=`steps[${e}]`;t.title||i.addError(`${r}.title`,"Step must have a title"),t.description||i.addWarning(`${r}.description`,"Step should have a description");const o=t.animate||t.actions;o?Array.isArray(o)?o.forEach((s,a)=>{Qf(s,e,a,n,i)}):i.addError(`${r}.animate`,"Animations must be an array"):i.addWarning(`${r}`,"Step has no animations")}function Vn(t){var a,l,c;qn.time("Schema validation");const e=new Ra;if(!t||typeof t!="object")return e.addError("root","Scenario must be an object"),e;t.name||e.addError("name","Scenario must have a name"),t.description||e.addWarning("description","Scenario should have a description");const n=new Set,i=new Set,r=new Set,o=new Set,s=((a=t.layout)==null?void 0:a.mode)==="auto"||((l=t.components)==null?void 0:l.some(u=>!u.position));return t.layout&&Kf(t.layout,e),t.zones&&Array.isArray(t.zones)&&t.zones.forEach((u,f)=>{s?(u.position&&Rn(u.position,`zones[${f}].position`,e),u.size&&$r(u.size,`zones[${f}].size`,e),u.color&&xi(u.color,`zones[${f}].color`,e)):jf(u,f,e),u.id&&(r.add(u.id),o.add(u.id))}),!t.components||!Array.isArray(t.components)?e.addError("components","Scenario must have a components array"):t.components.forEach((u,f)=>{Vf(u,f,e,s),u.id&&(n.has(u.id)&&e.addError(`components[${f}].id`,`Duplicate component id: ${u.id}`),n.add(u.id),o.add(u.id))}),t.connections&&Array.isArray(t.connections)&&t.connections.forEach((u,f)=>{Zf(u,f,n,e),u.id&&(i.has(u.id)&&e.addError(`connections[${f}].id`,`Duplicate connection id: ${u.id}`),i.add(u.id),o.add(u.id))}),!t.steps||!Array.isArray(t.steps)?e.addError("steps","Scenario must have a steps array"):t.steps.length===0?e.addWarning("steps","Scenario has no animation steps"):t.steps.forEach((u,f)=>{Jf(u,f,o,e)}),qn.timeEnd("Schema validation"),e.valid?qn.info("Schema validation passed",{components:n.size,connections:i.size,zones:r.size,steps:((c=t.steps)==null?void 0:c.length)||0}):qn.error("Schema validation failed",e.toSummary()),e}function Lo(t){if(t.valid&&t.warnings.length===0)return"Validation passed!";let e="";return t.errors.length>0&&(e+=` Errors:
`,t.errors.forEach(n=>{e+=`   ${n.path}: ${n.message}
`})),t.warnings.length>0&&(e+=`
 Warnings:
`,t.warnings.forEach(n=>{e+=`   ${n.path}: ${n.message}
`})),e}const st=Xt("ConnectionResolver"),Mo={rectangle:{width:120,height:60},circle:{radius:35},diamond:{size:60},hexagon:{size:40},cylinder:{width:80,height:100},cloud:{width:120,height:70},server:{width:60,height:80},database:{width:60,height:80},user:{width:56,height:80},gear:{size:30},container:{width:200,height:150},zone:{width:300,height:200}},We={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",CENTER:"center"};function Fi(t){const e=t.type||"rectangle",n=Mo[e]||Mo.rectangle;let i,r,o,s;Array.isArray(t.position)?[i,r]=t.position:t.position?(i=t.position.x||t.x||0,r=t.position.y||t.y||0):(i=t.x||0,r=t.y||0),Array.isArray(t.size)?[o,s]=t.size:typeof t.size=="number"?(o=t.size*2,s=t.size*2):(o=t.width||n.width||(n.size?n.size*2:60),s=t.height||n.height||(n.size?n.size*2:60),e==="circle"&&t.radius&&(o=t.radius*2,s=t.radius*2));let a=i,l=r;return["circle","diamond","hexagon","user","database","gear"].includes(e)&&(a=i-o/2,l=r-s/2),{x:a,y:l,width:o,height:s,centerX:a+o/2,centerY:l+s/2}}function Io(t,e){switch(e){case We.TOP:return{x:t.centerX,y:t.y};case We.BOTTOM:return{x:t.centerX,y:t.y+t.height};case We.LEFT:return{x:t.x,y:t.centerY};case We.RIGHT:return{x:t.x+t.width,y:t.centerY};case We.CENTER:default:return{x:t.centerX,y:t.centerY}}}function ed(t,e){const n=e.centerX-t.centerX,i=e.centerY-t.centerY;let r,o;return Math.abs(n)>Math.abs(i)?n>0?(r=We.RIGHT,o=We.LEFT):(r=We.LEFT,o=We.RIGHT):i>0?(r=We.BOTTOM,o=We.TOP):(r=We.TOP,o=We.BOTTOM),{from:Io(t,r),to:Io(e,o)}}class td{constructor(){this.componentMap=new Map,this.zoneMap=new Map}registerComponents(e){st.debug("Registering components",{count:(e==null?void 0:e.length)||0}),this.componentMap.clear(),e&&(e.forEach(n=>{n.id&&this.componentMap.set(n.id,n)}),st.info(`Registered ${this.componentMap.size} components`))}registerZones(e){st.debug("Registering zones",{count:(e==null?void 0:e.length)||0}),this.zoneMap.clear(),e&&(e.forEach(n=>{n.id&&this.zoneMap.set(n.id,n)}),st.info(`Registered ${this.zoneMap.size} zones`))}getComponent(e){return this.componentMap.get(e)||this.zoneMap.get(e)||null}resolveConnection(e){const n={...e};if(typeof e.from=="string"){const i=this.getComponent(e.from);if(i){const r=Fi(i),o=typeof e.to=="string"?this.getComponent(e.to):e.to;if(o){const s=typeof e.to=="string"?Fi(o):{centerX:o.x,centerY:o.y,x:o.x,y:o.y,width:0,height:0},a=ed(r,s);n.from=a.from,n.to=a.to}else n.from={x:r.centerX,y:r.centerY}}else st.warn(`Could not resolve connection 'from': ${e.from}`)}if(typeof n.to=="string"){const i=this.getComponent(e.to);if(i){const r=Fi(i);n.to={x:r.centerX,y:r.centerY}}else st.warn(`Could not resolve connection 'to': ${e.to}`)}return st.debug(`Resolved connection: ${e.id}`,n),n}resolveAllConnections(e){if(!e)return[];st.time("Connection resolution");const n=e.map(i=>this.resolveConnection(i));return st.timeEnd("Connection resolution"),st.info(`Resolved ${n.length} connections`),n}transformScenario(e){st.info("Transforming scenario connections"),this.registerComponents(e.components),this.registerZones(e.zones);const n={...e};return e.connections&&(n.connections=this.resolveAllConnections(e.connections)),n}}const ko={pipeline:{columnGap:90,rowGap:120,componentGap:28},hub:{columnGap:70,rowGap:90,componentGap:24},fanout:{columnGap:80,rowGap:110,componentGap:24},tiered:{columnGap:100,rowGap:80,componentGap:26},swimlane:{columnGap:110,rowGap:70,componentGap:24}};function nd(t={}){const e=t.template||t.profile||"pipeline";return ko[e]||ko.pipeline}const Et=Xt("LayoutEngine"),Oo={rectangle:{width:120,height:60},circle:{radius:35,width:70,height:70},diamond:{size:60,width:120,height:120},hexagon:{size:40,width:80,height:80},cylinder:{width:80,height:100},cloud:{width:120,height:70},server:{width:60,height:80},database:{width:60,height:80},user:{width:56,height:80},gear:{size:30,width:60,height:60},container:{width:200,height:150}},Da=["circle","diamond","hexagon","user","database","gear","server"],pt={user:"#6366f1",rectangle:"#6366f1",circle:"#10b981",diamond:"#f59e0b",hexagon:"#8b5cf6",cylinder:"#ef4444",cloud:"#f59e0b",server:"#10b981",database:"#ef4444",gear:"#f59e0b",container:"#14b8a6"},Zt=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#14b8a6"],Po={viewBoxWidth:1200,viewBoxHeight:700,padding:60,zoneGap:50,zonePadding:50,zoneLabelHeight:30,componentGap:30,columnGap:80,rowGap:90,minComponentGap:16,minColumnGap:40,minRowGap:50,maxRepairPasses:2,repairGrowth:1.25,startX:60,startY:80,profile:"pipeline",direction:"LR",hints:{primaryPath:[],grouping:"zone",compact:!0}};function id(t){const e=Oo[t]||Oo.rectangle;return{width:e.width||(e.size?e.size*2:60),height:e.height||(e.size?e.size*2:60)}}function En(t){const e=t.type||"rectangle",n=id(e);let i=0,r=0;return Array.isArray(t.size)?[i,r]=t.size:typeof t.size=="number"&&(["hexagon","diamond","gear"].includes(e)?(i=t.size*2,r=t.size*2):(i=t.size,r=t.size)),i||(i=t.width||n.width),r||(r=t.height||n.height),e==="circle"&&t.radius&&(i=t.radius*2,r=t.radius*2),{width:i,height:r}}function mt(t,e,n){const i=n.type||"rectangle",r=En(n);return Da.includes(i)?{x:t,y:e}:{x:t-r.width/2,y:e-r.height/2}}function an(t){const e=En(t),n=t.type||"rectangle",i=t.x??0,r=t.y??0;return Da.includes(n)?{x:i-e.width/2,y:r-e.height/2,width:e.width,height:e.height}:{x:i,y:r,width:e.width,height:e.height}}function $o(t){const e=an(t);return{x:e.x+e.width/2,y:e.y+e.height/2}}function rd(t,e,n,i){const r=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(r===0)return!1;const o=((i.y-n.y)*(i.x-t.x)+(n.x-i.x)*(i.y-t.y))/r,s=((t.y-e.y)*(i.x-t.x)+(e.x-t.x)*(i.y-t.y))/r;return o>0&&o<1&&s>0&&s<1}function od(t){const e=t.components||[],n=t.connections||[];let i=0,r=0;for(let s=0;s<e.length;s++){const a=an(e[s]);for(let l=s+1;l<e.length;l++){const c=an(e[l]),u=Math.max(0,Math.min(a.x+a.width,c.x+c.width)-Math.max(a.x,c.x)),f=Math.max(0,Math.min(a.y+a.height,c.y+c.height)-Math.max(a.y,c.y));u>0&&f>0&&(i+=1)}}const o=[];n.forEach(s=>{var f,h,p,m;const a=typeof s.from=="string"?s.from:(f=s.from)==null?void 0:f.id,l=typeof s.to=="string"?s.to:(h=s.to)==null?void 0:h.id;let c=null,u=null;if(a){const d=e.find(g=>g.id===a);d&&(c=$o(d))}else((p=s.from)==null?void 0:p.x)!==void 0&&(c={x:s.from.x,y:s.from.y});if(l){const d=e.find(g=>g.id===l);d&&(u=$o(d))}else((m=s.to)==null?void 0:m.x)!==void 0&&(u={x:s.to.x,y:s.to.y});c&&u&&o.push({from:c,to:u,fromId:a,toId:l})});for(let s=0;s<o.length;s++)for(let a=s+1;a<o.length;a++){const l=o[s],c=o[a];l.fromId&&(l.fromId===c.fromId||l.fromId===c.toId)||l.toId&&(l.toId===c.fromId||l.toId===c.toId)||rd(l.from,l.to,c.from,c.to)&&(r+=1)}return{overlaps:i,crossings:r,total:i*3+r}}function Dt(t,e,n,i){const r=Math.max(1,(i?t.viewBoxHeight:t.viewBoxWidth)-t.padding*2),o=Math.max(1,(i?t.viewBoxWidth:t.viewBoxHeight)-t.padding*2),s=e>0?Math.min(1,r/e):1,a=n>0?Math.min(1,o/n):1,l=Math.min(s,a),c=Math.max(t.minColumnGap,Math.round(t.columnGap*l)),u=Math.max(t.minRowGap,Math.round(t.rowGap*l)),f=Math.max(t.minComponentGap,Math.round(t.componentGap*l));return{columnGap:c,rowGap:u,componentGap:f}}function sd(t,e,n){const i=[...t].sort((s,a)=>{const l=n.get(s.id)??9999,c=n.get(a.id)??9999;return l-c}),r=new Map;e&&i.some(s=>s.id===e)&&r.set(e,0);let o=1;return i.forEach(s=>{if(r.has(s.id))return;const a=r.size%2===0?o:-o;r.size%2===1&&(o+=1),r.set(s.id,a)}),r}function rr(t,e={}){Et.time("Auto-layout calculation");const n=nd(e),i={...Po,...n,...e,hints:{...Po.hints,...(e==null?void 0:e.hints)||{}}},r=i.direction==="TB",o=i._repairPass||0,s=t.components||[],a=t.zones||[];if(s.length===0)return t;const l=(L,I,M,P)=>{const B={...t,components:L,zones:I&&I.length>0?I:w?t.zones:void 0,_layoutApplied:!0,_stageWidth:Math.max(i.viewBoxWidth,M),_stageHeight:Math.max(i.viewBoxHeight,P)},K=od(B);if(B._layoutScore=K,(K.overlaps>0||K.crossings>2)&&o<i.maxRepairPasses){const te={...i,columnGap:Math.round(i.columnGap*i.repairGrowth),rowGap:Math.round(i.rowGap*i.repairGrowth),componentGap:Math.round(i.componentGap*i.repairGrowth),hints:{...i.hints,compact:!1},_repairPass:o+1};return Et.warn("Repair pass triggered",{pass:o+1,score:K}),rr(t,te)}return B},c=Array.isArray(t.flow)&&t.flow.length>0?t.flow:s.map(L=>L.id).filter(Boolean),u=new Map(c.map((L,I)=>[L,I])),f=Array.isArray(i.hints.primaryPath)&&i.hints.primaryPath.length>0?i.hints.primaryPath.filter(L=>u.has(L)||s.some(I=>I.id===L)):c,h=new Set(f),p=(t.connections||[]).map(L=>{var I,M;return{from:typeof L.from=="string"?L.from:(I=L.from)==null?void 0:I.id,to:typeof L.to=="string"?L.to:(M=L.to)==null?void 0:M.id}}),m=new Map;p.forEach(L=>{L.from&&L.to&&h.has(L.from)&&!h.has(L.to)&&(m.has(L.to)||m.set(L.to,L.from))});const d=i.hints.grouping||"zone",g=[],v=[],_=[];if(d==="zone"&&a.length>0){a.forEach((I,M)=>{_.push({zone:{...I,color:I.color||Zt[M%Zt.length]},components:s.filter(P=>P.zone===I.id),index:M})});const L=s.filter(I=>!I.zone);L.length>0&&_.push({zone:null,components:L,index:a.length})}else if(d==="type"){const L=new Map;s.forEach(I=>{const M=I.type||"rectangle";L.has(M)||L.set(M,[]),L.get(M).push(I)}),[...L.entries()].forEach(([I,M],P)=>{_.push({zone:null,components:M,index:P,label:I})})}else _.push({zone:null,components:s,index:0});const S=new Map(s.map((L,I)=>[L.id,I])),E=L=>u.has(L.id)?u.get(L.id):S.get(L.id)??9999;let x=r?i.startY:i.startX;const T=i.zoneGap,w=d==="zone"&&a.length>0,A=w?i.zonePadding:0,b=w?i.zoneLabelHeight:0;if(w&&i.profile==="swimlane"){const L={columnGap:i.columnGap,rowGap:i.rowGap},M=Math.max(0,...c.map(C=>u.get(C)||0))+1;let P=0,B=0;s.forEach(C=>{const O=En(C);P=Math.max(P,O.width),B=Math.max(B,O.height)});const K=M*(P+L.columnGap*2),te=a.length*(B+L.rowGap*2),de=i.hints.compact!==!1?Dt(i,K,te,r):L,V=(r?B:P)+de.columnGap*2,re=(r?P:B)+de.rowGap*2,U=M*V,oe=re;let Me=r?i.startY:i.startX;a.forEach((C,O)=>{const D=r?Math.max(180,oe+i.zonePadding*2):Math.max(180,U+i.zonePadding*2),R=r?Math.max(200,U+i.zonePadding*2+i.zoneLabelHeight):Math.max(200,oe+i.zonePadding*2+i.zoneLabelHeight),Y=r?i.startX:Me,z=r?Me:i.startY;v.push({...C,color:C.color||Zt[O%Zt.length],x:Y,y:z,width:D,height:R});const H=Y+i.zonePadding+(r?oe/2:V/2),me=z+i.zoneLabelHeight+i.zonePadding+(r?V/2:oe/2);s.filter(Q=>Q.zone===C.id).forEach(Q=>{const Ie=u.get(Q.id)??0,ae=r?H:H+Ie*V,ve=r?me+Ie*V:me,we=mt(ae,ve,Q),ge=Q.type||"rectangle";g.push({...Q,x:we.x,y:we.y,position:[we.x,we.y],color:Q.color||pt[ge]||"#6366f1"})}),Me+=(r?R:D)+i.zoneGap});let se=0,Z=0;v.forEach(C=>{se=Math.max(se,C.x+C.width),Z=Math.max(Z,C.y+C.height)}),g.forEach(C=>{const O=an(C);se=Math.max(se,O.x+O.width),Z=Math.max(Z,O.y+O.height)});const bt=se+i.padding,wt=Z+i.padding;return Et.timeEnd("Auto-layout calculation"),Et.info("Layout complete",{zones:v.length,components:g.length,contentWidth:bt,contentHeight:wt}),l(g,v,bt,wt)}if(w&&(i.profile==="hub"||i.profile==="fanout")){const L={rowGap:i.rowGap},I=a.map((C,O)=>{const D=s.filter(z=>z.zone===C.id);let R=0,Y=0;return D.forEach(z=>{const H=En(z);R=Math.max(R,H.width),Y=Math.max(Y,H.height)}),{zone:{...C,color:C.color||Zt[O%Zt.length]},components:D,maxWidth:R||60,maxHeight:Y||60}}),M=new Map;p.forEach(C=>{!C.from||!C.to||(M.set(C.from,(M.get(C.from)||0)+1),M.set(C.to,(M.get(C.to)||0)+1))});const P=()=>{var C,O;if(f.length>0){const D=f.find(R=>s.some(Y=>Y.id===R));if(D)return D}return((C=[...M.entries()].sort((D,R)=>R[1]-D[1])[0])==null?void 0:C[0])||((O=s[0])==null?void 0:O.id)},B=()=>{var O,D;if(f.length>0)return f[0];const C=new Map;return p.forEach(R=>{R.from&&R.to&&C.set(R.from,(C.get(R.from)||0)+1)}),((O=[...C.entries()].sort((R,Y)=>Y[1]-R[1])[0])==null?void 0:O[0])||((D=s[0])==null?void 0:D.id)},K=i.profile==="hub"?P():B(),te=s.find(C=>C.id===K),de=te==null?void 0:te.zone,V=I.map(C=>{const O=C.components.length||1,D=C.maxHeight+L.rowGap*2,R=O*D,Y=Math.max(180,C.maxWidth+i.zonePadding*2),z=Math.max(200,R+i.zonePadding*2+i.zoneLabelHeight);return{zoneWidth:Y,zoneHeight:z}}),re=V.reduce((C,O)=>C+O.zoneWidth,0)+Math.max(0,V.length-1)*i.zoneGap,U=V.reduce((C,O)=>Math.max(C,O.zoneHeight),0),oe=i.hints.compact!==!1?Dt(i,re,U,r):L;let Me=r?i.startY:i.startX;I.forEach(C=>{const O=C.components.length||1,D=C.maxHeight+oe.rowGap*2,R=O*D,Y=Math.max(180,C.maxWidth+i.zonePadding*2),z=Math.max(200,R+i.zonePadding*2+i.zoneLabelHeight),H=r?i.startX:Me,me=r?Me:i.startY;v.push({...C.zone,x:H,y:me,width:Y,height:z});const he=H+Y/2,Q=me+i.zoneLabelHeight+(z-i.zoneLabelHeight-R)/2+D/2,Ie=C.zone.id===de?K:null,ae=sd(C.components,Ie,u),ve=[...ae.values()],we=ve.length>0?Math.min(...ve):0;C.components.forEach(ge=>{const ne=(ae.get(ge.id)??0)-we,ke=Q+ne*D,Je=mt(he,ke,ge),et=ge.type||"rectangle";g.push({...ge,x:Je.x,y:Je.y,position:[Je.x,Je.y],color:ge.color||pt[et]||"#6366f1"})}),Me+=(r?z:Y)+i.zoneGap});let se=0,Z=0;v.forEach(C=>{se=Math.max(se,C.x+C.width),Z=Math.max(Z,C.y+C.height)}),g.forEach(C=>{const O=an(C);se=Math.max(se,O.x+O.width),Z=Math.max(Z,O.y+O.height)});const bt=se+i.padding,wt=Z+i.padding;return Et.timeEnd("Auto-layout calculation"),Et.info("Layout complete",{zones:v.length,components:g.length,contentWidth:bt,contentHeight:wt}),l(g,v,bt,wt)}_.sort((L,I)=>L.index-I.index).forEach(L=>{var bt,wt;const I=L.components||[];if(I.length===0)return;const M=[...I].sort((C,O)=>E(C)-E(O));let P=0,B=0;M.forEach(C=>{const O=En(C);P=Math.max(P,O.width),B=Math.max(B,O.height)});let K=0,te=0,de=0,V=0,re=0,U=0,oe=0,Me=0;const se={columnGap:i.columnGap,rowGap:i.rowGap,componentGap:i.componentGap};let Z=se;if(i.profile==="pipeline"){const C=new Map,O=new Map;let D=0;M.forEach(ne=>{if(h.has(ne.id)){C.set(ne.id,0);return}const ke=m.get(ne.id);if(ke){const le=O.get(ke)||0,ot=Math.floor(le/2)+1,Vt=le%2===0?ot:-ot;O.set(ke,le+1),C.set(ne.id,Vt);return}const Je=D++,et=Math.floor(Je/2)+1,lt=Je%2===0?et:-et;C.set(ne.id,lt)});const R=[...C.values()],Y=R.length>0?Math.min(...R):0,H=(R.length>0?Math.max(...R):0)-Y+1,me=M.length,he=r?B:P,Q=r?P:B,Ie=me*(he+se.columnGap*2),ae=H*(Q+se.rowGap*2);i.hints.compact!==!1&&(Z=Dt(i,Ie,ae,r));const ve=he+Z.columnGap*2,we=Q+Z.rowGap*2,ge=me*ve,j=H*we;re=r?j:ge,U=r?ge:j,K=w?Math.max(180,re+A*2):re,te=w?Math.max(200,U+A*2+b):U,de=r?i.startX:x,V=r?x:i.startY,oe=de+(K-re)/2+(r?we/2:ve/2),Me=V+b+(te-b-U)/2+(r?ve/2:we/2),M.forEach((ne,ke)=>{const et=(C.get(ne.id)??0)-Y,lt=r?oe+et*we:oe+ke*ve,le=r?Me+ke*ve:Me+et*we,ot=mt(lt,le,ne),Vt=ne.type||"rectangle";g.push({...ne,x:ot.x,y:ot.y,position:[ot.x,ot.y],color:ne.color||pt[Vt]||"#6366f1"})})}else if(i.profile==="tiered"){const C=M.length,O=r?B:P,D=r?P:B,R=C*(O+se.columnGap*2),Y=D+se.rowGap*2;i.hints.compact!==!1&&(Z=Dt(i,R,Y,r));const z=O+Z.columnGap*2,H=D+Z.rowGap*2;re=r?H:C*z,U=r?C*z:H,K=w?Math.max(180,re+A*2):re,te=w?Math.max(200,U+A*2+b):U,de=r?i.startX:x,V=r?x:i.startY,oe=de+(K-re)/2+(r?H/2:z/2),Me=V+b+(te-b-U)/2+(r?z/2:H/2),M.forEach((me,he)=>{const Q=r?oe:oe+he*z,Ie=r?Me+he*z:Me,ae=mt(Q,Ie,me),ve=me.type||"rectangle";g.push({...me,x:ae.x,y:ae.y,position:[ae.x,ae.y],color:me.color||pt[ve]||"#6366f1"})})}else if(i.profile==="hub"){const C=new Map;p.forEach(j=>{!j.from||!j.to||I.find(ne=>ne.id===j.from)&&I.find(ne=>ne.id===j.to)&&(C.set(j.from,(C.get(j.from)||0)+1),C.set(j.to,(C.get(j.to)||0)+1))});let O=null;f.length>0&&(O=f.find(j=>I.some(ne=>ne.id===j))||null),O||(O=((bt=[...C.entries()].sort((j,ne)=>ne[1]-j[1])[0])==null?void 0:bt[0])||M[0].id);const D=M.find(j=>j.id===O)||M[0],R=M.filter(j=>j.id!==D.id),Y=R.length,z=Math.max(P,B);let H=Math.max(120,z+se.rowGap);Y>1&&(H=Math.max(H,Y*(z+se.columnGap)/(2*Math.PI)));const me=H*2+z,he=H*2+z;i.hints.compact!==!1&&(Z=Dt(i,me,he,r)),H=Math.max(100,Y>1?Y*(z+Z.columnGap)/(2*Math.PI):z+Z.rowGap),re=H*2+z,U=H*2+z,K=w?Math.max(180,re+A*2):re,te=w?Math.max(200,U+A*2+b):U,de=r?i.startX:x,V=r?x:i.startY;const Q=de+K/2,Ie=V+b+(te-b)/2,ae=mt(Q,Ie,D),ve=D.type||"rectangle";g.push({...D,x:ae.x,y:ae.y,position:[ae.x,ae.y],color:D.color||pt[ve]||"#6366f1"});const we=r?Math.PI:-Math.PI/2,ge=Y>0?Math.PI*2/Y:0;R.forEach((j,ne)=>{const ke=we+ne*ge,Je=Q+Math.cos(ke)*H,et=Ie+Math.sin(ke)*H,lt=mt(Je,et,j),le=j.type||"rectangle";g.push({...j,x:lt.x,y:lt.y,position:[lt.x,lt.y],color:j.color||pt[le]||"#6366f1"})})}else if(i.profile==="fanout"){const C=new Map;p.forEach(le=>{le.from&&le.to&&C.set(le.from,(C.get(le.from)||0)+1)});const O=f[0]||((wt=[...C.entries()].sort((le,ot)=>ot[1]-le[1])[0])==null?void 0:wt[0]),D=M.find(le=>le.id===O)||M[0],R=M.filter(le=>le.id!==D.id),Y=r?B:P,z=r?P:B,H=2*(Y+se.columnGap*2),me=Math.max(1,R.length)*(z+se.rowGap*2);i.hints.compact!==!1&&(Z=Dt(i,H,me,r));const he=Y+Z.columnGap*2,Q=z+Z.rowGap*2,Ie=Math.max(1,R.length);re=r?Ie*Q:he*2,U=r?he*2:Ie*Q,K=w?Math.max(180,re+A*2):re,te=w?Math.max(200,U+A*2+b):U,de=r?i.startX:x,V=r?x:i.startY;const ae=de+(K-re)/2+(r?Q/2:he/2),ve=V+b+(te-b-U)/2+(r?he/2:Q/2),we=r?ae:ae+he,ge=r?ve+he:ve+U/2,j=r?ae+re/2:ae,ke=mt(j,r?ve:ge,D),Je=D.type||"rectangle";g.push({...D,x:ke.x,y:ke.y,position:[ke.x,ke.y],color:D.color||pt[Je]||"#6366f1"});const et=R.length,lt=et>0?-Math.floor(et/2):0;R.forEach((le,ot)=>{const Vt=lt+ot,Ja=we,el=r?ge:ge+Vt*Q,tl=r?we+Vt*Q:Ja,Hn=mt(tl,el,le),nl=le.type||"rectangle";g.push({...le,x:Hn.x,y:Hn.y,position:[Hn.x,Hn.y],color:le.color||pt[nl]||"#6366f1"})})}else{const C=M.length>=3?2:1,O=Math.ceil(M.length/C),D=(r?O:C)*(P+se.componentGap*2),R=(r?C:O)*(B+se.componentGap*2);i.hints.compact!==!1&&(Z=Dt(i,D,R,r));const Y=P+Z.componentGap*2,z=B+Z.componentGap*2,H=C*Y,me=O*z;K=w?Math.max(180,H+A*2):H,te=w?Math.max(200,me+A*2+b):me,de=r?i.startX:x,V=r?x:i.startY,oe=de+(K-H)/2+Y/2,Me=V+b+(te-b-me)/2+z/2,M.forEach((he,Q)=>{const Ie=Q%C,ae=Math.floor(Q/C),ve=oe+Ie*Y,we=Me+ae*z,ge=mt(ve,we,he),j=he.type||"rectangle";g.push({...he,x:ge.x,y:ge.y,position:[ge.x,ge.y],color:he.color||pt[j]||"#6366f1"})})}w&&L.zone&&v.push({...L.zone,x:de,y:V,width:K,height:te}),x+=(r?te:K)+T});let F=0,W=0;v.forEach(L=>{F=Math.max(F,L.x+L.width),W=Math.max(W,L.y+L.height)}),g.forEach(L=>{const I=an(L);F=Math.max(F,I.x+I.width),W=Math.max(W,I.y+I.height)});const q=F+i.padding,X=W+i.padding;return Et.timeEnd("Auto-layout calculation"),Et.info("Layout complete",{zones:v.length,components:g.length,contentWidth:q,contentHeight:X}),l(g,v,q,X)}function Fo(t){var c,u,f;const e=t.components||[],n=t.connections||[],i=t.zones||[],r=Array.isArray(t.flow)&&t.flow.length>0?t.flow:Array.isArray((u=(c=t.layout)==null?void 0:c.hints)==null?void 0:u.primaryPath)&&t.layout.hints.primaryPath.length>0?t.layout.hints.primaryPath:e.map(h=>h.id),o=(h,p)=>{var d;const m=(d=p.components)==null?void 0:d.find(g=>g.id===h);return m!=null&&m.description?m.description:null};if(!r||r.length===0)return t;const s=new Map;n.forEach((h,p)=>{var g,v;const m=typeof h.from=="string"?h.from:(g=h.from)==null?void 0:g.id,d=typeof h.to=="string"?h.to:(v=h.to)==null?void 0:v.id;m&&d&&s.set(`${m}->${d}`,h.id||`conn-${p}`)});const a=[];i.length>0&&a.push({title:"Setup",description:"Initialize environment",actions:i.map(h=>({type:"fadeIn",target:h.id}))});let l=null;return r.forEach(h=>{const p=e.find(v=>v.id===h);if(!p)return;const m=[{type:"fadeIn",target:h}],d=l?s.get(`${l}->${h}`):null;d&&m.push({type:"drawLine",target:d}),m.push({type:"pulse",target:h}),l&&m.push({type:"unglow",target:l});const g=o(h,t);g&&m.push({type:"callout",target:d||h,text:g,offset:[0,-50]}),a.push({title:p.label||h,description:g||`${p.label||h} activates`,actions:m}),l=h}),a.push({title:"Complete",description:"Flow complete",actions:r.map(h=>({type:"glow",target:h}))}),{...t,steps:((f=t.steps)==null?void 0:f.length)>0?t.steps:a}}function Ro(t){var n;return((n=t.layout)==null?void 0:n.mode)==="auto"?!0:(t.components||[]).some(i=>!i.position&&i.x===void 0)}const ad=Xt("SceneAnalyzer"),ld=[{role:"source",words:["user","client","browser","device"]},{role:"gateway",words:["gateway","api","ingress","edge","proxy"]},{role:"service",words:["service","app","api","worker"]},{role:"queue",words:["queue","topic","stream","broker"]},{role:"cache",words:["cache","redis","memcache"]},{role:"database",words:["db","database","sql","postgres","mysql"]},{role:"storage",words:["storage","s3","bucket","blob"]},{role:"sink",words:["report","analytics","warehouse","sink"]}],jn={fanout:t=>t.maxOut>=3,hub:t=>t.maxDegree>=4,tiered:t=>t.hasTierZones,swimlane:t=>t.hasZones&&t.zoneCount>=3};function or(t){return(t||"").toString().toLowerCase()}function cd(t=[]){return t.map(e=>{const n=`${or(e.id)} ${or(e.label)}`;let i=e.role;if(!i){for(const r of ld)if(r.words.some(o=>n.includes(o))){i=r.role;break}}return{...e,role:i}})}function za(t=[]){const e=[],n=new Map,i=new Map,r=new Map;return t.forEach(o=>{var l,c;const s=typeof o.from=="string"?o.from:(l=o.from)==null?void 0:l.id,a=typeof o.to=="string"?o.to:(c=o.to)==null?void 0:c.id;!s||!a||(e.push({from:s,to:a}),i.set(s,(i.get(s)||0)+1),n.set(a,(n.get(a)||0)+1),r.set(s,(r.get(s)||0)+1),r.set(a,(r.get(a)||0)+1))}),{edges:e,inDegree:n,outDegree:i,degree:r}}function ud(t=[],e=[]){const{edges:n,inDegree:i,outDegree:r}=za(e),o=t.map(u=>u.id).filter(Boolean);if(n.length===0)return o;let a=o.filter(u=>(i.get(u)||0)===0)[0]||o[0];const l=[],c=new Set;for(;a&&!c.has(a);){l.push(a),c.add(a);const u=n.filter(f=>f.from===a).map(f=>f.to);if(u.length===0)break;u.sort((f,h)=>(r.get(h)||0)-(r.get(f)||0)),a=u[0]}return l.length>0?l:o}function fd(t=[]){const e=t.map(i=>or(i.label)),n=["frontend","backend","data","presentation","business"];return e.some(i=>n.some(r=>i.includes(r)))}function Do(t){var u,f,h,p,m,d;if(!t||typeof t!="object")return{};const e=cd(t.components||[]),n=t.zones||[],{outDegree:i,degree:r}=za(t.connections||[]),o={maxOut:Math.max(0,...Array.from(i.values())),maxDegree:Math.max(0,...Array.from(r.values())),hasZones:n.length>0,zoneCount:n.length,hasTierZones:fd(n)};let s=(u=t.layout)==null?void 0:u.profile;s||(jn.fanout(o)?s="fanout":jn.hub(o)?s="hub":jn.tiered(o)?s="tiered":jn.swimlane(o)?s="swimlane":s="pipeline");const l={primaryPath:t.flow&&Array.isArray(t.flow)&&t.flow.length>0?t.flow:ud(e,t.connections||[]),grouping:((h=(f=t.layout)==null?void 0:f.hints)==null?void 0:h.grouping)||(n.length>0?"zone":"flow"),compact:((m=(p=t.layout)==null?void 0:p.hints)==null?void 0:m.compact)??!0};ad.debug("Inferred layout hints",{profile:s,hints:l});const c=((d=t.layout)==null?void 0:d.template)||s;return{profile:s,template:c,hints:l,components:e}}const Se=Xt("YAMLParser");class zt extends Error{constructor(e,n=null,i=null,r=null){super(e),this.name="ParseError",this.line=n,this.column=i,this.originalError=r}toUserMessage(){let e=this.message;return this.line!==null&&(e=`Line ${this.line}: ${e}`),e}}new pi.Type("!pos",{kind:"sequence",construct:t=>({x:t[0],y:t[1]})});const dd=pi.DEFAULT_SCHEMA;function Na(t){return Array.isArray(t)?{x:t[0],y:t[1]}:t}function hd(t,e){return Array.isArray(t)?{width:t[0],height:t[1]}:typeof t=="number"?["hexagon","diamond","gear"].includes(e)?{size:t}:{width:t,height:t}:t}function pd(t){const e={...t};if(t.position){const n=Na(t.position);e.x=n.x,e.y=n.y,delete e.position}if(t.size){const n=hd(t.size,t.type);Object.assign(e,n),n.size===void 0&&delete e.size}return e}function md(t){const e={...t};if(t.position){const n=Na(t.position);e.x=n.x,e.y=n.y,delete e.position}return Array.isArray(t.size)&&(e.width=t.size[0],e.height=t.size[1],delete e.size),e}function gd(t){const e=["fadeIn","fadeOut","appear","moveTo","scale","pulse","highlight","unhighlight","drawLine","wait","color","callout"];for(const n of e)if(t[n]!==void 0){const i=t[n],r={type:n,target:Array.isArray(i)?i[0]:i,...t};return delete r[n],Array.isArray(i)&&i.length>1?i.map((o,s)=>({type:n,target:o,delay:(t.delay||0)+s*.1,duration:t.duration,color:t.color,to:t.to})).filter(o=>o.target):r}return t}function yd(t){const e={...t},n=t.animate||t.actions||[],i=[];return n.forEach(r=>{const o=gd(r);Array.isArray(o)?i.push(...o):i.push(o)}),e.actions=i,delete e.animate,e}class _d{constructor(e={}){this.options={validateSchema:!0,resolveConnections:!0,strictMode:!1,...e},this.connectionResolver=new td}parse(e){var o,s,a,l,c,u,f,h;if(Se.time("YAML parsing"),Se.info("Starting YAML parse"),!e||typeof e!="string")throw new zt("Input must be a non-empty string");e=e.trim();let n;try{n=pi.load(e,{schema:dd,json:!0,onWarning:p=>{Se.warn("YAML warning",p)}})}catch(p){Se.error("YAML parse error",p);const m=p.message.match(/line (\d+)/i),d=m?parseInt(m[1]):null;throw new zt(`Invalid YAML: ${p.reason||p.message}`,d,null,p)}if(!n)throw new zt("Empty or invalid YAML input");if(Se.debug("Raw parsed YAML",n),this.options.validateSchema)if(Array.isArray(n.scenes))n.scenes.forEach((p,m)=>{const d=Vn(p);if(!d.valid&&this.options.strictMode)throw new zt(`Scene ${m+1} validation failed:
${Lo(d)}`);d.warnings.length>0&&Se.warn("Scene validation warnings",{index:m,warnings:d.warnings})});else{const p=Vn(n);if(!p.valid&&this.options.strictMode)throw new zt(`Schema validation failed:
${Lo(p)}`);p.warnings.length>0&&Se.warn("Schema validation warnings",p.warnings)}if(Array.isArray(n.scenes)&&n.scenes.length>0){const p={name:n.name,description:n.description,category:n.category,layout:n.layout},m=n.scenes.map(d=>{var v,_,S,E,x,T,w;let g={...p,...d,layout:{...p.layout||{},...d.layout||{},hints:{...((v=p.layout)==null?void 0:v.hints)||{},...((_=d.layout)==null?void 0:_.hints)||{}}}};if(!g.layout||!g.layout.profile||!g.layout.hints){const A=Do(g);g.layout={mode:((S=g.layout)==null?void 0:S.mode)||"auto",profile:((E=g.layout)==null?void 0:E.profile)||A.profile,template:((x=g.layout)==null?void 0:x.template)||A.template,direction:((T=g.layout)==null?void 0:T.direction)||"LR",hints:{...A.hints,...((w=g.layout)==null?void 0:w.hints)||{}}},A.components&&(g.components=A.components)}return Ro(g)&&(g=rr(g,g.layout)),g.flow&&(!g.steps||g.steps.length===0)&&(g=Fo(g)),this.transform(g)});return{id:n.id||this.generateId(n.name),name:n.name,description:n.description||"",category:n.category||"Custom",scenes:m}}if(!n.layout||!n.layout.profile||!n.layout.hints){const p=Do(n);n.layout={mode:((o=n.layout)==null?void 0:o.mode)||"auto",profile:((s=n.layout)==null?void 0:s.profile)||p.profile,template:((a=n.layout)==null?void 0:a.template)||p.template,direction:((l=n.layout)==null?void 0:l.direction)||"LR",hints:{...p.hints,...((c=n.layout)==null?void 0:c.hints)||{}}},p.components&&(n.components=p.components)}let i=!1;Ro(n)&&(Se.info("Applying auto-layout"),n=rr(n,n.layout),i=!0),n.flow&&(!n.steps||n.steps.length===0)&&(Se.info("Generating steps from flow"),n=Fo(n));const r=this.transform(n);return i&&(r._layoutApplied=!0),Se.timeEnd("YAML parsing"),Se.info("YAML parse complete",{name:r.name,components:(u=r.components)==null?void 0:u.length,connections:(f=r.connections)==null?void 0:f.length,steps:(h=r.steps)==null?void 0:h.length}),r}transform(e){Se.debug("Transforming scenario");const n={id:e.id||this.generateId(e.name),name:e.name,description:e.description||"",category:e.category||"Custom"};if(e.zones&&(n.zones=e.zones.map(md),Se.debug(`Transformed ${n.zones.length} zones`)),e.components&&(n.components=e.components.map(pd),Se.debug(`Transformed ${n.components.length} components`)),e.connections){let i=e.connections.map(r=>({...r,type:r.type||"arrow"}));this.options.resolveConnections&&(this.connectionResolver.registerComponents(n.components),this.connectionResolver.registerZones(n.zones),i=i.map(r=>this.connectionResolver.resolveConnection(r))),n.connections=i,Se.debug(`Transformed ${n.connections.length} connections`)}return e.steps&&(n.steps=e.steps.map(yd),Se.debug(`Transformed ${n.steps.length} steps`)),e._stageWidth&&(n._stageWidth=e._stageWidth),e._stageHeight&&(n._stageHeight=e._stageHeight),e._layoutApplied&&(n._layoutApplied=e._layoutApplied),n}generateId(e){return e?e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):`scenario-${Date.now()}`}async parseFile(e){let n;if(e instanceof File)Se.info(`Parsing file: ${e.name}`),n=await e.text();else if(typeof e=="string"&&e.startsWith("http")){Se.info(`Fetching from URL: ${e}`);const i=await fetch(e);if(!i.ok)throw new zt(`Failed to fetch: ${i.statusText}`);n=await i.text()}else throw new zt("Invalid source: must be a File object or URL");return this.parse(n)}validate(e){try{const n=pi.load(e);if(Array.isArray(n==null?void 0:n.scenes)){const i=new Ra;return n.scenes.forEach(r=>i.merge(Vn(r))),i}return Vn(n)}catch(n){return{valid:!1,errors:[{path:"yaml",message:n.message}],warnings:[]}}}}const Re=Xt("Storage"),vi="flow-engine-",Kn=vi+"drafts",Zn=vi+"autosave",Ri=vi+"settings",zo=20;class xd{constructor(){this.isAvailable=this.checkAvailability(),this.isAvailable||Re.warn("localStorage is not available")}checkAvailability(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}getDrafts(){if(!this.isAvailable)return[];try{const e=localStorage.getItem(Kn);return e?JSON.parse(e):[]}catch(e){return Re.error("Failed to get drafts",e),[]}}saveDraft(e,n){if(!this.isAvailable)return Re.warn("Cannot save - localStorage not available"),null;try{const i=this.getDrafts(),r=i.findIndex(s=>s.name===e),o={id:r>=0?i[r].id:Date.now().toString(),name:e,content:n,savedAt:new Date().toISOString(),size:n.length};return r>=0?(i[r]=o,Re.info(`Updated draft: ${e}`)):(i.unshift(o),Re.info(`Created draft: ${e}`)),i.length>zo&&i.pop(),localStorage.setItem(Kn,JSON.stringify(i)),o}catch(i){return Re.error("Failed to save draft",i),null}}getDraft(e){return this.getDrafts().find(i=>i.id===e)||null}deleteDraft(e){if(!this.isAvailable)return!1;try{const n=this.getDrafts(),i=n.findIndex(o=>o.id===e);if(i===-1)return!1;const r=n.splice(i,1)[0];return localStorage.setItem(Kn,JSON.stringify(n)),Re.info(`Deleted draft: ${r.name}`),!0}catch(n){return Re.error("Failed to delete draft",n),!1}}autoSave(e){if(!(!this.isAvailable||!e))try{const n={content:e,savedAt:new Date().toISOString()};localStorage.setItem(Zn,JSON.stringify(n)),Re.debug("Auto-saved content")}catch(n){Re.error("Auto-save failed",n)}}getAutoSave(){if(!this.isAvailable)return null;try{const e=localStorage.getItem(Zn);return e?JSON.parse(e):null}catch(e){return Re.error("Failed to get auto-save",e),null}}clearAutoSave(){this.isAvailable&&localStorage.removeItem(Zn)}getSettings(){if(!this.isAvailable)return{};try{const e=localStorage.getItem(Ri);return e?JSON.parse(e):{}}catch{return{}}}saveSettings(e){if(this.isAvailable)try{const i={...this.getSettings(),...e};localStorage.setItem(Ri,JSON.stringify(i)),Re.debug("Settings saved")}catch(n){Re.error("Failed to save settings",n)}}clearAll(){this.isAvailable&&(localStorage.removeItem(Kn),localStorage.removeItem(Zn),localStorage.removeItem(Ri),Re.info("All storage cleared"))}getUsageInfo(){var i;if(!this.isAvailable)return{available:!1};const e=this.getDrafts();let n=0;for(const r in localStorage)r.startsWith(vi)&&(n+=((i=localStorage.getItem(r))==null?void 0:i.length)||0);return{available:!0,draftCount:e.length,maxDrafts:zo,totalSizeBytes:n,totalSizeKB:(n/1024).toFixed(2)}}}let Di=null;function vd(){return Di||(Di=new xd),Di}const bd={id:"k8s-control-plane",name:"Kubernetes Control Plane",description:"How kubectl commands flow through the Kubernetes control plane to create resources",category:"Kubernetes",zones:[{id:"control-plane-zone",x:50,y:50,width:500,height:300,label:"CONTROL PLANE",color:"#6366f1"},{id:"worker-zone",x:600,y:50,width:550,height:600,label:"WORKER NODES",color:"#10b981"}],components:[{id:"user",type:"user",x:100,y:450,label:"kubectl"},{id:"api-server",type:"rectangle",x:150,y:150,width:120,height:50,color:"#6366f1",label:"API Server"},{id:"etcd",type:"cylinder",x:350,y:100,width:80,height:100,color:"#ef4444",label:"etcd"},{id:"scheduler",type:"hexagon",x:200,y:280,size:35,color:"#f59e0b",label:"Scheduler"},{id:"controller",type:"gear",x:350,y:280,size:30,color:"#8b5cf6",label:"Controller"},{id:"node1",type:"server",x:700,y:150,label:"Node 1"},{id:"node2",type:"server",x:900,y:150,label:"Node 2"},{id:"pod1",type:"hexagon",x:700,y:350,size:25,color:"#326CE5",label:"Pod"},{id:"pod2",type:"hexagon",x:800,y:350,size:25,color:"#326CE5",label:"Pod"},{id:"pod3",type:"hexagon",x:900,y:350,size:25,color:"#326CE5",label:"Pod"}],connections:[{id:"conn-user-api",type:"arrow",from:{x:100,y:400},to:{x:170,y:200},color:"#6366f1"},{id:"conn-api-etcd",type:"arrow",from:{x:270,y:175},to:{x:350,y:175},color:"#ef4444"},{id:"conn-api-scheduler",type:"arrow",from:{x:210,y:200},to:{x:200,y:250},color:"#f59e0b"},{id:"conn-api-controller",type:"arrow",from:{x:270,y:175},to:{x:330,y:260},color:"#8b5cf6"},{id:"conn-scheduler-node",type:"orthogonal",from:{x:235,y:280},to:{x:670,y:150},color:"#10b981",dashed:!0},{id:"conn-node-pod1",type:"arrow",from:{x:700,y:200},to:{x:700,y:320},color:"#326CE5"},{id:"conn-node-pod2",type:"arrow",from:{x:800,y:200},to:{x:800,y:320},color:"#326CE5"}],steps:[{title:"User sends kubectl command",description:"User runs kubectl apply to create a Deployment",actions:[{type:"fadeIn",target:"user",duration:.5},{type:"fadeIn",target:"control-plane-zone",duration:.3},{type:"fadeIn",target:"api-server",duration:.5,delay:.3}]},{title:"API Server receives request",description:"API Server authenticates and validates the request",actions:[{type:"fadeIn",target:"conn-user-api",duration:.3},{type:"drawLine",target:"conn-user-api",duration:.8},{type:"pulse",target:"api-server",duration:.5},{type:"highlight",target:"api-server",color:"#6366f1"}]},{title:"State persisted to etcd",description:"API Server writes the desired state to etcd",actions:[{type:"fadeIn",target:"etcd",duration:.4},{type:"fadeIn",target:"conn-api-etcd",duration:.3},{type:"drawLine",target:"conn-api-etcd",duration:.6},{type:"pulse",target:"etcd",duration:.5},{type:"unhighlight",target:"api-server"}]},{title:"Scheduler watches for unassigned Pods",description:"Scheduler detects new Pod needs to be scheduled",actions:[{type:"fadeIn",target:"scheduler",duration:.4},{type:"fadeIn",target:"conn-api-scheduler",duration:.3},{type:"highlight",target:"scheduler",color:"#f59e0b"}]},{title:"Controller Manager reconciles",description:"Deployment controller creates ReplicaSet, which creates Pods",actions:[{type:"fadeIn",target:"controller",duration:.4},{type:"fadeIn",target:"conn-api-controller",duration:.3},{type:"pulse",target:"controller",duration:.6},{type:"unhighlight",target:"scheduler"}]},{title:"Worker Nodes appear",description:"Scheduler assigns Pods to available Nodes",actions:[{type:"fadeIn",target:"worker-zone",duration:.3},{type:"fadeIn",target:"node1",duration:.4},{type:"fadeIn",target:"node2",duration:.4,delay:.2},{type:"fadeIn",target:"conn-scheduler-node",duration:.3},{type:"drawLine",target:"conn-scheduler-node",duration:1}]},{title:"Pods are created",description:"Kubelet on each Node creates the containers",actions:[{type:"fadeIn",target:"conn-node-pod1",duration:.3},{type:"fadeIn",target:"pod1",duration:.5},{type:"fadeIn",target:"conn-node-pod2",duration:.3,delay:.2},{type:"fadeIn",target:"pod2",duration:.5,delay:.2},{type:"fadeIn",target:"pod3",duration:.5,delay:.4},{type:"highlight",target:"pod1",color:"#10b981"},{type:"highlight",target:"pod2",color:"#10b981"},{type:"highlight",target:"pod3",color:"#10b981"}]},{title:"Deployment Complete!",description:"All Pods are running and the Deployment is successful",actions:[{type:"color",target:"pod1",color:"#10b981"},{type:"color",target:"pod2",color:"#10b981"},{type:"color",target:"pod3",color:"#10b981"}]}]},wd={id:"api-request",name:"API Request Flow",description:"How a user request flows through a typical web application",category:"Architecture",zones:[{id:"frontend-zone",x:50,y:50,width:250,height:200,label:"FRONTEND",color:"#3b82f6"},{id:"backend-zone",x:350,y:50,width:400,height:500,label:"BACKEND",color:"#8b5cf6"},{id:"data-zone",x:800,y:50,width:300,height:500,label:"DATA LAYER",color:"#ef4444"}],components:[{id:"user",type:"user",x:150,y:400,label:"User"},{id:"browser",type:"rectangle",x:80,y:130,width:140,height:50,color:"#3b82f6",label:"Browser"},{id:"load-balancer",type:"diamond",x:450,y:130,size:45,color:"#f59e0b",label:"LB"},{id:"api-server1",type:"server",x:420,y:300,label:"API Server 1"},{id:"api-server2",type:"server",x:550,y:300,label:"API Server 2"},{id:"cache",type:"hexagon",x:680,y:300,size:35,color:"#10b981",label:"Cache"},{id:"database",type:"database",x:900,y:200,color:"#8b5cf6",label:"PostgreSQL"},{id:"queue",type:"rectangle",x:850,y:380,width:100,height:40,color:"#f59e0b",label:"Queue"}],connections:[{id:"conn-user-browser",type:"arrow",from:{x:150,y:360},to:{x:150,y:180},color:"#3b82f6"},{id:"conn-browser-lb",type:"arrow",from:{x:220,y:155},to:{x:405,y:130},color:"#f59e0b"},{id:"conn-lb-api1",type:"arrow",from:{x:450,y:175},to:{x:420,y:250},color:"#8b5cf6"},{id:"conn-lb-api2",type:"arrow",from:{x:495,y:130},to:{x:550,y:250},color:"#8b5cf6",dashed:!0},{id:"conn-api1-cache",type:"arrow",from:{x:450,y:300},to:{x:645,y:300},color:"#10b981"},{id:"conn-cache-db",type:"arrow",from:{x:715,y:300},to:{x:870,y:220},color:"#8b5cf6"},{id:"conn-api1-queue",type:"arrow",from:{x:450,y:340},to:{x:850,y:400},color:"#f59e0b",dashed:!0}],steps:[{title:"User interacts with the application",description:"User clicks a button or submits a form in the browser",actions:[{type:"fadeIn",target:"frontend-zone"},{type:"fadeIn",target:"user"},{type:"fadeIn",target:"browser",delay:.3},{type:"fadeIn",target:"conn-user-browser"},{type:"drawLine",target:"conn-user-browser",duration:.5}]},{title:"Request hits Load Balancer",description:"Browser sends HTTP request to the load balancer",actions:[{type:"fadeIn",target:"backend-zone"},{type:"fadeIn",target:"load-balancer"},{type:"fadeIn",target:"conn-browser-lb"},{type:"drawLine",target:"conn-browser-lb",duration:.6},{type:"pulse",target:"load-balancer"}]},{title:"Load Balancer routes to API Server",description:"Request is distributed to an available API server",actions:[{type:"fadeIn",target:"api-server1"},{type:"fadeIn",target:"api-server2"},{type:"fadeIn",target:"conn-lb-api1"},{type:"fadeIn",target:"conn-lb-api2"},{type:"drawLine",target:"conn-lb-api1",duration:.5},{type:"highlight",target:"api-server1",color:"#8b5cf6"}]},{title:"Check Cache first",description:"API Server checks Redis cache for existing data",actions:[{type:"fadeIn",target:"data-zone"},{type:"fadeIn",target:"cache"},{type:"fadeIn",target:"conn-api1-cache"},{type:"drawLine",target:"conn-api1-cache",duration:.6},{type:"pulse",target:"cache"}]},{title:"Query Database",description:"Cache miss - query the primary database",actions:[{type:"fadeIn",target:"database"},{type:"fadeIn",target:"conn-cache-db"},{type:"drawLine",target:"conn-cache-db",duration:.6},{type:"highlight",target:"database",color:"#8b5cf6"}]},{title:"Async job queued",description:"Background job added to message queue for processing",actions:[{type:"fadeIn",target:"queue"},{type:"fadeIn",target:"conn-api1-queue"},{type:"drawLine",target:"conn-api1-queue",duration:.8},{type:"unhighlight",target:"api-server1"},{type:"unhighlight",target:"database"}]}]},Ed={id:"simple-flow",name:"Simple Flow Template",description:"A basic template showing how to create custom flows",category:"Templates",zones:[],components:[{id:"start",type:"circle",x:150,y:350,radius:30,color:"#10b981",label:"Start"},{id:"step1",type:"rectangle",x:280,y:320,width:120,height:60,color:"#6366f1",label:"Step 1"},{id:"decision",type:"diamond",x:500,y:350,size:50,color:"#f59e0b",label:"?"},{id:"step2a",type:"rectangle",x:620,y:220,width:120,height:60,color:"#8b5cf6",label:"Option A"},{id:"step2b",type:"rectangle",x:620,y:420,width:120,height:60,color:"#3b82f6",label:"Option B"},{id:"end",type:"circle",x:850,y:350,radius:30,color:"#ef4444",label:"End"}],connections:[{id:"conn-start-step1",type:"arrow",from:{x:180,y:350},to:{x:280,y:350},color:"#10b981"},{id:"conn-step1-decision",type:"arrow",from:{x:400,y:350},to:{x:450,y:350},color:"#6366f1"},{id:"conn-decision-a",type:"curve",from:{x:550,y:350},to:{x:620,y:250},color:"#8b5cf6",curvature:30},{id:"conn-decision-b",type:"curve",from:{x:550,y:350},to:{x:620,y:450},color:"#3b82f6",curvature:-30},{id:"conn-a-end",type:"curve",from:{x:740,y:250},to:{x:820,y:350},color:"#8b5cf6",curvature:30},{id:"conn-b-end",type:"curve",from:{x:740,y:450},to:{x:820,y:350},color:"#3b82f6",curvature:-30}],steps:[{title:"Process starts",description:"The flow begins from the start node",actions:[{type:"fadeIn",target:"start"},{type:"highlight",target:"start",color:"#10b981"}]},{title:"First step",description:"Process moves to step 1",actions:[{type:"fadeIn",target:"conn-start-step1"},{type:"drawLine",target:"conn-start-step1",duration:.5},{type:"fadeIn",target:"step1"},{type:"unhighlight",target:"start"},{type:"highlight",target:"step1",color:"#6366f1"}]},{title:"Decision point",description:"A decision needs to be made",actions:[{type:"fadeIn",target:"conn-step1-decision"},{type:"drawLine",target:"conn-step1-decision",duration:.5},{type:"fadeIn",target:"decision"},{type:"unhighlight",target:"step1"},{type:"pulse",target:"decision"}]},{title:"Branching paths",description:"Different options lead to different outcomes",actions:[{type:"fadeIn",target:"step2a"},{type:"fadeIn",target:"step2b"},{type:"fadeIn",target:"conn-decision-a"},{type:"fadeIn",target:"conn-decision-b"},{type:"drawLine",target:"conn-decision-a",duration:.6},{type:"drawLine",target:"conn-decision-b",duration:.6}]},{title:"Process ends",description:"All paths lead to the end",actions:[{type:"fadeIn",target:"conn-a-end"},{type:"fadeIn",target:"conn-b-end"},{type:"fadeIn",target:"end"},{type:"highlight",target:"end",color:"#ef4444"}]}]},Ba=[bd,wd,Ed],N=Xt("Main");N.info("Flow Animation Engine v2.0 starting...");let xe=null,Ya=null,$=null,Ga=0,Nn=!1,Fr=null,Bn=null,No=null;const y={scenarioSelect:null,btnPlay:null,btnPause:null,btnReset:null,btnPrev:null,btnNext:null,iconPlay:null,iconPause:null,speedSlider:null,speedValue:null,progressFill:null,progressText:null,scenarioInfo:null,stepInfo:null,stepsTimeline:null,scenesList:null,btnYamlEditor:null,btnUpload:null,fileInput:null,yamlModal:null,yamlEditor:null,btnApplyYaml:null,btnCancelYaml:null,btnCloseModal:null,btnLoadExample:null,btnDownloadYaml:null,validationStatus:null,validationOutput:null,parsedSummary:null,editorLineInfo:null,errorBanner:null,errorMessage:null,summaryComponents:null,summaryConnections:null,summarySteps:null,btnLoop:null,iconLoopOff:null,iconLoopOn:null,btnSaveDraft:null,btnLoadDraft:null,draftsDropdown:null,draftsList:null,shortcutsModal:null,btnCloseShortcuts:null,btnHelp:null,btnExportPng:null,embedModal:null,btnCloseEmbed:null,btnShare:null,embedIframeCode:null,embedUrlCode:null,btnCopyIframe:null,btnCopyUrl:null,btnToggleSidebar:null,componentPalette:null};function Sd(){N.time("Initialization"),Ad(),Fr=new _d({validateSchema:!0,resolveConnections:!0,strictMode:!1}),xe=new Ac("animation-stage"),xe.onStepChange=nh,xe.onComplete=ih,xe.onLoopRestart=rh,Cd(),eh(),sh(),kd(),Bn=vd(),Wd(),qd(),Qd(),Vd(),Zd(),N.timeEnd("Initialization"),N.info("Flow Animation Engine initialized successfully")}function Ad(){y.scenarioSelect=document.getElementById("scenario-select"),y.btnPlay=document.getElementById("btn-play"),y.btnReset=document.getElementById("btn-reset"),y.btnPrev=document.getElementById("btn-prev"),y.btnNext=document.getElementById("btn-next"),y.iconPlay=document.getElementById("icon-play"),y.iconPause=document.getElementById("icon-pause"),y.speedSlider=document.getElementById("speed-slider"),y.speedValue=document.getElementById("speed-value"),y.progressFill=document.getElementById("progress-fill"),y.progressText=document.getElementById("progress-text"),y.scenarioInfo=document.getElementById("scenario-info"),y.stepInfo=document.getElementById("step-info"),y.stepsTimeline=document.getElementById("steps-timeline"),y.scenesList=document.getElementById("scenes-list"),y.btnYamlEditor=document.getElementById("btn-yaml-editor"),y.btnUpload=document.getElementById("btn-upload"),y.fileInput=document.getElementById("file-input"),y.yamlModal=document.getElementById("yaml-editor-modal"),y.yamlEditor=document.getElementById("yaml-editor"),y.btnApplyYaml=document.getElementById("btn-apply-yaml"),y.btnCancelYaml=document.getElementById("btn-cancel-yaml"),y.btnCloseModal=document.getElementById("btn-close-modal"),y.btnLoadExample=document.getElementById("btn-load-example"),y.btnDownloadYaml=document.getElementById("btn-download-yaml"),y.validationStatus=document.getElementById("validation-status"),y.validationOutput=document.getElementById("validation-output"),y.parsedSummary=document.getElementById("parsed-summary"),y.editorLineInfo=document.getElementById("editor-line-info"),y.errorBanner=document.getElementById("error-banner"),y.errorMessage=document.getElementById("error-message"),y.summaryComponents=document.getElementById("summary-components"),y.summaryConnections=document.getElementById("summary-connections"),y.summarySteps=document.getElementById("summary-steps"),y.btnLoop=document.getElementById("btn-loop"),y.iconLoopOff=document.getElementById("icon-loop-off"),y.iconLoopOn=document.getElementById("icon-loop-on"),y.btnSaveDraft=document.getElementById("btn-save-draft"),y.btnLoadDraft=document.getElementById("btn-load-draft"),y.draftsDropdown=document.getElementById("drafts-dropdown"),y.draftsList=document.getElementById("drafts-list"),y.shortcutsModal=document.getElementById("shortcuts-modal"),y.btnCloseShortcuts=document.getElementById("btn-close-shortcuts"),y.btnHelp=document.getElementById("btn-help"),y.btnExportPng=document.getElementById("btn-export-png"),y.embedModal=document.getElementById("embed-modal"),y.btnCloseEmbed=document.getElementById("btn-close-embed"),y.btnShare=document.getElementById("btn-share"),y.embedIframeCode=document.getElementById("embed-iframe-code"),y.embedUrlCode=document.getElementById("embed-url-code"),y.btnCopyIframe=document.getElementById("btn-copy-iframe"),y.btnCopyUrl=document.getElementById("btn-copy-url"),y.btnToggleSidebar=document.getElementById("btn-toggle-sidebar"),y.componentPalette=document.getElementById("component-palette")}function Cd(){const t=Ba.reduce((n,i)=>{const r=i.category||"General";return n[r]||(n[r]=[]),n[r].push(i),n},{});let e='<option value="">Select a Scenario...</option>';Object.keys(t).forEach(n=>{e+=`<optgroup label="${n}">`,t[n].forEach(i=>{e+=`<option value="${i.id}">${i.name}</option>`}),e+="</optgroup>"}),y.scenarioSelect.innerHTML=e}function Td(t,e){return!(t!=null&&t.scenes)||t.scenes.length===0?t:t.scenes[Math.min(e,t.scenes.length-1)]}function Ld(t){if(!y.scenesList)return;if(!(t!=null&&t.scenes)||t.scenes.length===0){y.scenesList.innerHTML='<p class="placeholder-text">No scenes loaded</p>';return}let e="";t.scenes.forEach((n,i)=>{e+=`
            <div class="scene-item${i===Ga?" active":""}" data-scene="${i}">
                <span class="scene-item-index">${i+1}</span>
                <span class="scene-item-title">${n.name||`Scene ${i+1}`}</span>
            </div>
        `}),y.scenesList.innerHTML=e,y.scenesList.querySelectorAll(".scene-item").forEach(n=>{n.addEventListener("click",()=>{const i=parseInt(n.dataset.scene,10);Rr(t,i)})})}function Rr(t,e=0){N.info("Loading scenario",{name:t.name,sceneIndex:e}),Ya=t,Ga=e,$=Td(t,e),xe.clear();const n=document.getElementById("animation-stage");if($!=null&&$._stageWidth||$!=null&&$._stageHeight){const o=$._stageWidth||900,s=$._stageHeight||500;n.setAttribute("viewBox",`0 0 ${o} ${s}`),n.style.width=`${o}px`,n.style.minWidth=`${o}px`,N.info("Updated stage dimensions",{width:o,height:s})}const i=n==null?void 0:n.querySelector("#stage-viewport");i&&Gn(n,i);const r=t.scenes&&($!=null&&$.name)?`${t.name}  ${$.name}`:t.name;y.scenarioInfo.innerHTML=`
        <h4 style="margin-bottom: 8px; color: var(--text-primary);">${r}</h4>
        <p>${($==null?void 0:$.description)||t.description}</p>
    `,$!=null&&$.zones&&$.zones.forEach(o=>{xe.addZone(o.id,o)}),$!=null&&$.components&&$.components.forEach(o=>{xe.addComponent(o.id,o.type,o)}),$!=null&&$.connections&&$.connections.forEach(o=>{xe.addConnection(o.id,o.type||"arrow",o)}),xe.buildTimeline(($==null?void 0:$.steps)||[]),Id(($==null?void 0:$.steps)||[]),wi(),$!=null&&$.steps&&$.steps.length>0&&zr(0,$.steps[0]),Ld(t),N.info("Scenario loaded successfully",{name:t.name})}function Md(t){const e=Ba.find(n=>n.id===t);if(!e){N.error("Scenario not found",{id:t});return}Rr(e)}function Id(t){if(!y.stepsTimeline)return;let e="";t.forEach((n,i)=>{e+=`
            <div class="timeline-step${i===0?" active":""}" data-step="${i}">
                <span class="timeline-step-num">${i+1}</span>
                <span class="timeline-step-title">${n.title}</span>
            </div>
        `}),y.stepsTimeline.innerHTML=e,y.stepsTimeline.querySelectorAll(".timeline-step").forEach(n=>{n.addEventListener("click",()=>{const i=parseInt(n.dataset.step);xe.goToStep(i)})})}function kd(){var t,e,n,i,r,o,s,a,l,c,u,f,h,p,m;N.debug("Setting up YAML editor"),(t=y.btnYamlEditor)==null||t.addEventListener("click",Dr),(e=y.btnUpload)==null||e.addEventListener("click",()=>{var d;return(d=y.fileInput)==null?void 0:d.click()}),(n=y.fileInput)==null||n.addEventListener("change",Rd),(i=y.btnCloseModal)==null||i.addEventListener("click",xn),(r=y.btnCancelYaml)==null||r.addEventListener("click",xn),(o=y.btnApplyYaml)==null||o.addEventListener("click",Dd),(s=y.btnLoadExample)==null||s.addEventListener("click",zd),(a=y.btnDownloadYaml)==null||a.addEventListener("click",Nd),(l=y.btnSaveDraft)==null||l.addEventListener("click",Bd),(c=y.btnLoadDraft)==null||c.addEventListener("click",Yd),document.addEventListener("click",d=>{d.target.closest(".dropdown-container")||Wa()}),(u=y.yamlEditor)==null||u.addEventListener("input",Ha),(f=y.yamlEditor)==null||f.addEventListener("click",Bo),(h=y.yamlEditor)==null||h.addEventListener("keyup",Bo),(p=y.yamlEditor)==null||p.addEventListener("keydown",Od),document.addEventListener("keydown",d=>{var g;d.key==="Escape"&&((g=y.yamlModal)==null?void 0:g.style.display)!=="none"&&xn()}),(m=y.yamlModal)==null||m.addEventListener("click",d=>{d.target===y.yamlModal&&xn()})}function Dr(){N.debug("Opening YAML editor"),y.yamlModal.style.display="flex",y.yamlEditor.focus(),y.yamlEditor.value.trim()&&Yn()}function xn(){N.debug("Closing YAML editor"),y.yamlModal.style.display="none",Ua()}function Od(t){if(t.key==="Tab"){t.preventDefault();const e=t.target.selectionStart,n=t.target.selectionEnd,i=t.target.value;t.target.value=i.substring(0,e)+"  "+i.substring(n),t.target.selectionStart=t.target.selectionEnd=e+2,Ha()}}function Bo(){if(!y.yamlEditor||!y.editorLineInfo)return;const t=y.yamlEditor.value,e=y.yamlEditor.selectionStart,n=t.substring(0,e).split(`
`),i=n.length,r=n[n.length-1].length+1;y.editorLineInfo.textContent=`Ln ${i}, Col ${r}`}function Ha(){clearTimeout(No),No=setTimeout(Yn,300)}function Yn(){const t=y.yamlEditor.value.trim();if(!t){Pd();return}try{N.debug("Validating YAML content");const e=Fr.parse(t);$d(e),Ua()}catch(e){N.warn("YAML validation failed",e),Fd(e)}}function Pd(){y.validationStatus.textContent=" Valid",y.validationStatus.className="validation-badge valid",y.validationOutput.innerHTML=`
        <div class="validation-placeholder">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="40" height="40">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="16" x2="12" y2="12"/>
                <line x1="12" y1="8" x2="12" y2="8"/>
            </svg>
            <p>Write or paste YAML to validate</p>
        </div>
    `,y.parsedSummary.style.display="none"}function $d(t){var e,n,i;if(y.validationStatus.textContent=" Valid",y.validationStatus.className="validation-badge valid",y.validationOutput.innerHTML=`
        <div class="validation-success">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>YAML is valid and ready to play!</span>
        </div>
    `,y.parsedSummary.style.display="block",t.scenes&&Array.isArray(t.scenes)){const r=t.scenes.reduce((o,s)=>{var a,l,c;return o.components+=((a=s.components)==null?void 0:a.length)||0,o.connections+=((l=s.connections)==null?void 0:l.length)||0,o.steps+=((c=s.steps)==null?void 0:c.length)||0,o},{components:0,connections:0,steps:0});y.summaryComponents.textContent=r.components,y.summaryConnections.textContent=r.connections,y.summarySteps.textContent=r.steps}else y.summaryComponents.textContent=((e=t.components)==null?void 0:e.length)||0,y.summaryConnections.textContent=((n=t.connections)==null?void 0:n.length)||0,y.summarySteps.textContent=((i=t.steps)==null?void 0:i.length)||0}function Fd(t){y.validationStatus.textContent=" Error",y.validationStatus.className="validation-badge invalid";let e="";t.line?e=`
            <div class="validation-error">
                <strong>Line ${t.line}:</strong> ${t.message}
            </div>
        `:e=`
            <div class="validation-error">
                ${t.message}
            </div>
        `,y.validationOutput.innerHTML=e,y.parsedSummary.style.display="none"}function at(t){y.errorBanner.style.display="flex",y.errorMessage.textContent=t}function Ua(){y.errorBanner.style.display="none"}async function Rd(t){const e=t.target.files[0];if(e){N.info("Uploading file",{name:e.name});try{const n=await e.text();y.yamlEditor.value=n,Dr(),Yn()}catch(n){N.error("File upload failed",n),at("Failed to read file: "+n.message)}t.target.value=""}}function Dd(){const t=y.yamlEditor.value.trim();if(!t){at("Please enter YAML content");return}try{N.info("Applying YAML scenario");const e=Fr.parse(t);xn(),Rr(e),y.scenarioSelect.value="",setTimeout(()=>{Nn=xe.togglePlay(),bi()},500),N.info("Custom YAML scenario applied successfully")}catch(e){N.error("Failed to apply YAML",e),at(e.message)}}function zd(){N.debug("Loading example YAML");const t=`# Kubernetes Control Plane Flow
# This example shows how kubectl commands flow through the control plane

name: Kubernetes Control Plane
description: How kubectl commands flow through the Kubernetes control plane
category: Kubernetes

zones:
  - id: control-plane
    label: CONTROL PLANE
    position: [50, 50]
    size: [500, 300]
    color: "#6366f1"

  - id: worker-nodes
    label: WORKER NODES
    position: [600, 50]
    size: [550, 600]
    color: "#10b981"

components:
  # Control Plane Components
  - id: user
    type: user
    position: [100, 450]
    label: kubectl

  - id: api-server
    type: rectangle
    position: [150, 150]
    size: [120, 50]
    color: "#6366f1"
    label: API Server

  - id: etcd
    type: cylinder
    position: [350, 100]
    size: [80, 100]
    color: "#ef4444"
    label: etcd

  - id: scheduler
    type: hexagon
    position: [200, 280]
    size: 35
    color: "#f59e0b"
    label: Scheduler

  # Worker Node Components
  - id: node1
    type: server
    position: [700, 150]
    label: Node 1

  - id: pod1
    type: hexagon
    position: [700, 350]
    size: 25
    color: "#326CE5"
    label: Pod

connections:
  - id: user-to-api
    from: user
    to: api-server
    type: arrow
    color: "#6366f1"

  - id: api-to-etcd
    from: api-server
    to: etcd
    type: arrow
    color: "#ef4444"

  - id: api-to-scheduler
    from: api-server
    to: scheduler
    type: arrow
    color: "#f59e0b"

  - id: node-to-pod
    from: node1
    to: pod1
    type: arrow
    color: "#326CE5"

steps:
  - title: User sends kubectl command
    description: User runs kubectl apply to create a Deployment
    animate:
      - fadeIn: user
      - fadeIn: control-plane
      - fadeIn: api-server
        delay: 0.3

  - title: API Server receives request
    description: API Server authenticates and validates the request
    animate:
      - fadeIn: user-to-api
      - drawLine: user-to-api
        duration: 0.8
      - pulse: api-server

  - title: State persisted to etcd
    description: API Server writes the desired state to etcd
    animate:
      - fadeIn: etcd
      - fadeIn: api-to-etcd
      - drawLine: api-to-etcd
        duration: 0.6
      - pulse: etcd

  - title: Scheduler assigns Pod
    description: Scheduler detects new Pod and assigns to Node
    animate:
      - fadeIn: scheduler
      - fadeIn: api-to-scheduler
      - fadeIn: worker-nodes
      - fadeIn: node1
        delay: 0.3

  - title: Pod is created
    description: Kubelet creates the container on the node
    animate:
      - fadeIn: node-to-pod
      - drawLine: node-to-pod
      - fadeIn: pod1
      - highlight: pod1
        color: "#10b981"

  - title: Deployment Complete!
    description: Pod is running and ready to serve traffic
    animate:
      - color: pod1
        to: "#10b981"
`;y.yamlEditor.value=t,Yn()}function Nd(){const t=y.yamlEditor.value;if(!t.trim()){at("No content to download");return}const e=new Blob([t],{type:"text/yaml"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="scenario.yaml",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),N.info("YAML downloaded")}function Bd(){const t=y.yamlEditor.value.trim();if(!t){at("No content to save");return}let e="Untitled Draft";try{const r=t.match(/name:\s*['"]*([^'"\\n]+)/);r&&(e=r[1].trim())}catch{}const n=prompt("Enter draft name:",e);if(!n)return;Bn.saveDraft(n,t)?(Dn("Draft saved!"),N.info(`Draft saved: ${n}`)):at("Failed to save draft")}function Yd(){const t=y.draftsDropdown;if(!t)return;t.style.display!=="none"?t.style.display="none":(qa(),t.style.display="block")}function Wa(){y.draftsDropdown&&(y.draftsDropdown.style.display="none")}function qa(){if(!y.draftsList)return;const t=Bn.getDrafts();if(t.length===0){y.draftsList.innerHTML='<div class="empty-drafts">No saved drafts</div>';return}let e="";t.forEach(n=>{const i=new Date(n.savedAt),r=i.toLocaleDateString()+" "+i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});e+=`
            <div class="draft-item" data-id="${n.id}">
                <div class="draft-item-info">
                    <div class="draft-item-name">${Ud(n.name)}</div>
                    <div class="draft-item-meta">${r}</div>
                </div>
                <button class="draft-item-delete" data-id="${n.id}" title="Delete">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                </button>
            </div>
        `}),y.draftsList.innerHTML=e,y.draftsList.querySelectorAll(".draft-item").forEach(n=>{n.addEventListener("click",i=>{i.target.closest(".draft-item-delete")||Gd(n.dataset.id)})}),y.draftsList.querySelectorAll(".draft-item-delete").forEach(n=>{n.addEventListener("click",i=>{i.stopPropagation(),Hd(n.dataset.id)})})}function Gd(t){const e=Bn.getDraft(t);if(!e){at("Draft not found");return}y.yamlEditor.value=e.content,Wa(),Yn(),N.info(`Loaded draft: ${e.name}`)}function Hd(t){if(!confirm("Delete this draft?"))return;Bn.deleteDraft(t)&&(qa(),Dn("Draft deleted"))}function Dn(t){const e=document.querySelector(".save-toast");e&&e.remove();const n=document.createElement("div");n.className="save-toast",n.textContent=t,document.body.appendChild(n),setTimeout(()=>n.remove(),2500)}function Ud(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function Xa(){if(!y.shortcutsModal)return;const t=y.shortcutsModal.style.display!=="none";y.shortcutsModal.style.display=t?"none":"flex"}function Yo(){y.shortcutsModal&&(y.shortcutsModal.style.display="none")}function Wd(){var t,e,n;(t=y.btnHelp)==null||t.addEventListener("click",Xa),(e=y.btnCloseShortcuts)==null||e.addEventListener("click",Yo),(n=y.shortcutsModal)==null||n.addEventListener("click",i=>{i.target===y.shortcutsModal&&Yo()})}function qd(){var t;(t=y.btnExportPng)==null||t.addEventListener("click",Xd)}async function Xd(){const t=document.getElementById("animation-stage");if(!t){at("No animation stage found");return}try{N.info("Exporting SVG as PNG..."),Dn("Exporting PNG...");const e=t.getBoundingClientRect(),n=e.width,i=e.height,r=t.cloneNode(!0),o=document.createElement("style");o.textContent=`
            .shape-body { stroke-width: 2; }
            text { font-family: 'Inter', sans-serif; }
        `,r.insertBefore(o,r.firstChild);const s=new XMLSerializer().serializeToString(r),a=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(a),c=new Image;c.onload=()=>{const u=document.createElement("canvas");u.width=n*2,u.height=i*2;const f=u.getContext("2d");f.scale(2,2),f.fillStyle="#0a0a0a",f.fillRect(0,0,n,i),f.drawImage(c,0,0,n,i),u.toBlob(h=>{const p=URL.createObjectURL(h),m=document.createElement("a");m.href=p,m.download=`flow-animation-${Date.now()}.png`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p),URL.revokeObjectURL(l),N.info("PNG exported successfully"),Dn("PNG exported!")},"image/png")},c.onerror=()=>{N.error("Failed to load SVG for export"),at("Export failed")},c.src=l}catch(e){N.error("Export failed",e),at("Export failed: "+e.message)}}function Vd(){var t;(t=y.btnToggleSidebar)==null||t.addEventListener("click",jd)}function jd(){y.componentPalette&&(y.componentPalette.classList.toggle("collapsed"),N.info("Sidebar toggled",{collapsed:y.componentPalette.classList.contains("collapsed")}))}let He=1;const sr=.25,ar=3,Va=.25,Kd=.0018;let zi=!1,Qn=!1,Go=0,Ho=0,Uo=0,Wo=0;function Zd(){const t=document.getElementById("btn-zoom-in"),e=document.getElementById("btn-zoom-out"),n=document.getElementById("btn-zoom-reset"),i=document.getElementById("animation-stage"),r=i==null?void 0:i.querySelector("#stage-viewport"),o=document.querySelector(".stage-wrapper");t==null||t.addEventListener("click",()=>qo(i,r)),e==null||e.addEventListener("click",()=>Xo(i,r)),n==null||n.addEventListener("click",()=>Vo(i,r)),document.addEventListener("keydown",s=>{(s.ctrlKey||s.metaKey)&&(s.key==="="||s.key==="+"?(s.preventDefault(),qo(i,r)):s.key==="-"?(s.preventDefault(),Xo(i,r)):s.key==="0"&&(s.preventDefault(),Vo(i,r))),s.code==="Space"&&!Qn&&(Qn=!0,o==null||o.classList.add("pan-active"))}),o==null||o.addEventListener("wheel",s=>{if(s.ctrlKey||s.metaKey){s.preventDefault();const a=-s.deltaY*Kd;a!==0&&(He=Math.min(ar,Math.max(sr,He+a)),Gn(i,r))}},{passive:!1}),o==null||o.addEventListener("mousedown",s=>{const a=s.button===1;!Qn&&!a||(s.preventDefault(),zi=!0,Go=s.clientX,Ho=s.clientY,Uo=o.scrollLeft,Wo=o.scrollTop,o.classList.add("panning"))}),window.addEventListener("mousemove",s=>{if(!zi||!o)return;const a=s.clientX-Go,l=s.clientY-Ho;o.scrollLeft=Uo-a,o.scrollTop=Wo-l}),window.addEventListener("mouseup",()=>{o&&(zi=!1,o.classList.remove("panning"))}),window.addEventListener("keyup",s=>{s.code==="Space"&&(Qn=!1,o==null||o.classList.remove("pan-active"))}),N.info("Zoom controls initialized")}function qo(t,e){He<ar&&(He=Math.min(ar,He+Va),Gn(t,e))}function Xo(t,e){He>sr&&(He=Math.max(sr,He-Va),Gn(t,e))}function Vo(t,e){He=1,Gn(t,e)}function Gn(t,e){if(!t||!e)return;const n=t.viewBox.baseVal,i=n.width/2,r=n.height/2,o=`translate(${i} ${r}) scale(${He}) translate(${-i} ${-r})`;e.setAttribute("transform",o),t.style.transform="";const s=document.getElementById("zoom-level");s&&(s.textContent=`${Math.round(He*100)}%`),N.debug("Zoom applied",{zoom:He})}function Qd(){var t,e,n,i,r;(t=y.btnShare)==null||t.addEventListener("click",Jd),(e=y.btnCloseEmbed)==null||e.addEventListener("click",jo),(n=y.btnCopyIframe)==null||n.addEventListener("click",()=>Ko("iframe")),(i=y.btnCopyUrl)==null||i.addEventListener("click",()=>Ko("url")),(r=y.embedModal)==null||r.addEventListener("click",o=>{o.target===y.embedModal&&jo()})}function Jd(){if(!y.embedModal)return;const t=window.location.href.split("?")[0],e=`<iframe src="${t}" width="800" height="600" frameborder="0" style="border-radius: 8px;"></iframe>`;y.embedIframeCode&&(y.embedIframeCode.textContent=e),y.embedUrlCode&&(y.embedUrlCode.textContent=t),y.embedModal.style.display="flex",N.info("Embed modal opened")}function jo(){y.embedModal&&(y.embedModal.style.display="none")}async function Ko(t){let e="";t==="iframe"&&y.embedIframeCode?e=y.embedIframeCode.textContent:t==="url"&&y.embedUrlCode&&(e=y.embedUrlCode.textContent);try{await navigator.clipboard.writeText(e),Dn("Copied to clipboard!"),N.info(`Copied ${t} to clipboard`)}catch(n){N.error("Failed to copy",n),at("Failed to copy to clipboard")}}function eh(){var t;y.scenarioSelect.addEventListener("change",e=>{e.target.value&&Md(e.target.value)}),y.btnPlay.addEventListener("click",ja),y.btnReset.addEventListener("click",Ka),y.btnPrev.addEventListener("click",()=>xe.prevStep()),y.btnNext.addEventListener("click",()=>xe.nextStep()),(t=y.btnLoop)==null||t.addEventListener("click",Za),y.speedSlider.addEventListener("input",e=>{const n=parseFloat(e.target.value);xe.setSpeed(n),y.speedValue.textContent=`${n}x`}),document.addEventListener("keydown",oh)}function ja(){if(!Ya){alert("Please select a scenario first");return}Nn=xe.togglePlay(),bi()}function Ka(){xe.reset(),Nn=!1,bi(),wi()}function Za(){const t=xe.toggleLoop();th(t),N.info(`Loop mode ${t?"enabled":"disabled"}`)}function th(t){y.btnLoop&&(t?(y.btnLoop.classList.add("loop-active"),y.iconLoopOff.style.display="none",y.iconLoopOn.style.display="block"):(y.btnLoop.classList.remove("loop-active"),y.iconLoopOff.style.display="block",y.iconLoopOn.style.display="none"))}function nh(t,e){zr(t,e),wi(),Qa(t)}function ih(){Nn=!1,bi(),N.info("Animation complete")}function rh(){N.info("Animation looping..."),wi(),Qa(0),$&&$.steps&&$.steps.length>0&&zr(0,$.steps[0])}function oh(t){var e,n;if(!(t.target.tagName==="INPUT"||t.target.tagName==="SELECT"||t.target.tagName==="TEXTAREA")){if(t.key==="?"||t.shiftKey&&t.key==="/"){t.preventDefault(),Xa();return}if(!(((e=y.yamlModal)==null?void 0:e.style.display)!=="none"||((n=y.shortcutsModal)==null?void 0:n.style.display)!=="none"))switch(t.key){case" ":t.preventDefault(),ja();break;case"ArrowLeft":xe.prevStep();break;case"ArrowRight":xe.nextStep();break;case"r":case"R":Ka();break;case"e":case"E":Dr();break;case"l":case"L":Za();break}}}function bi(){Nn?(y.iconPlay.style.display="none",y.iconPause.style.display="block"):(y.iconPlay.style.display="block",y.iconPause.style.display="none")}function zr(t,e){y.stepInfo&&(y.stepInfo.innerHTML=`
        <div class="step-number">${t+1}</div>
        <div class="step-content">
            <strong style="display: block; margin-bottom: 4px; color: var(--text-primary);">${e.title}</strong>
            <span class="step-description">${e.description}</span>
        </div>
    `)}function wi(){const t=xe.getProgress(),e=t.total>1?t.current/(t.total-1)*100:0;y.progressFill.style.width=`${e}%`,y.progressText.textContent=`${t.current+1} / ${t.total}`}function Qa(t){y.stepsTimeline&&y.stepsTimeline.querySelectorAll(".timeline-step").forEach((e,n)=>{e.classList.remove("active","completed"),n===t?e.classList.add("active"):n<t&&e.classList.add("completed")})}function sh(){const t=document.querySelectorAll(".component-item"),e=document.getElementById("animation-stage");t.forEach(n=>{n.addEventListener("dragstart",i=>{i.dataTransfer.setData("text/plain",n.dataset.type),i.dataTransfer.effectAllowed="copy"})}),e.addEventListener("dragover",n=>{n.preventDefault(),n.dataTransfer.dropEffect="copy"}),e.addEventListener("drop",n=>{n.preventDefault();const i=n.dataTransfer.getData("text/plain"),r=e.getBoundingClientRect(),o=e.viewBox.baseVal,s=o.width/r.width,a=o.height/r.height;let l=(n.clientX-r.left)*s,c=(n.clientY-r.top)*a;const u=o.width/2,f=o.height/2;l=u+(l-u)/He,c=f+(c-f)/He;const h=`dropped-${i}-${Date.now()}`,p=xe.addComponent(h,i,{x:l,y:c,label:i.charAt(0).toUpperCase()+i.slice(1)});p&&(p.style.opacity="0",ol(async()=>{const{gsap:m}=await Promise.resolve().then(()=>Sc);return{gsap:m}},void 0).then(({gsap:m})=>{m.to(p,{opacity:1,duration:.3,ease:"power2.out"})})),N.debug(`Added ${i} at (${Math.round(l)}, ${Math.round(c)})`)})}document.addEventListener("DOMContentLoaded",Sd);
